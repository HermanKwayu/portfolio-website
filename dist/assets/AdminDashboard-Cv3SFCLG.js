import{e as U,r as d,j as e,h as He,n as vs,C as j,b as v,c as w,d as b,f as O,g as Hs,R as Te,B as g,q as ne,p as B,a as _,L as F,I as re,S as os,s as ls,t as cs,v as ds,w as K,T as ms}from"./index-sjNF1scF.js";import{T as ze,a as _e,b as V,E as qs,D as Us,c as q,C as qe}from"./tabs-762XMeYz.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Re=U("circle-alert",Ws);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ws=U("circle-x",Gs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],us=U("clock",Xs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Js=U("code",Ys);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Qs=U("external-link",Ks);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ve=U("file-text",Zs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],st=U("globe",et);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],at=U("map",tt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],hs=U("monitor",rt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],it=U("settings",nt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],lt=U("smartphone",ot);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],dt=U("users",ct);var mt="Separator",xs="horizontal",ut=["horizontal","vertical"],bs=d.forwardRef((n,p)=>{const{decorative:k,orientation:N=xs,...o}=n,T=ht(N)?N:xs,c=k?{role:"none"}:{"aria-orientation":T==="vertical"?T:void 0,role:"separator"};return e.jsx(He.div,{"data-orientation":T,...c,...o,ref:p})});bs.displayName=mt;function ht(n){return ut.includes(n)}var xt=bs;function de({className:n,orientation:p="horizontal",decorative:k=!0,...N}){return e.jsx(xt,{"data-slot":"separator-root",decorative:k,orientation:p,className:vs("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...N})}function pt({isVisible:n,onClose:p}){const[k,N]=d.useState([]),[o,T]=d.useState(0);d.useEffect(()=>{n&&$()},[n]);const $=()=>{const l=[],a=document.title;a&&a.length>=30&&a.length<=60?l.push({name:"Title Tag",status:"pass",message:`Good title length: ${a.length} characters`,priority:"high"}):l.push({name:"Title Tag",status:a?"warn":"fail",message:a?`Title length: ${a.length} chars (optimal: 30-60)`:"Missing title tag",priority:"high"});const m=document.querySelector('meta[name="description"]')?.getAttribute("content");m&&m.length>=120&&m.length<=160?l.push({name:"Meta Description",status:"pass",message:`Good description length: ${m.length} characters`,priority:"high"}):l.push({name:"Meta Description",status:m?"warn":"fail",message:m?`Description length: ${m.length} chars (optimal: 120-160)`:"Missing meta description",priority:"high"});const t=document.querySelectorAll("h1");t.length===1?l.push({name:"H1 Tag",status:"pass",message:"Exactly one H1 tag found",priority:"high"}):l.push({name:"H1 Tag",status:t.length===0?"fail":"warn",message:`Found ${t.length} H1 tags (optimal: 1)`,priority:"high"});const P=document.querySelectorAll('script[type="application/ld+json"]');l.push({name:"Structured Data",status:P.length>0?"pass":"fail",message:`Found ${P.length} structured data scripts`,priority:"medium"});const x=document.querySelectorAll('meta[property^="og:"]');l.push({name:"Open Graph Tags",status:x.length>=4?"pass":"warn",message:`Found ${x.length} Open Graph tags`,priority:"medium"});const Y=document.querySelectorAll('meta[name^="twitter:"]');l.push({name:"Twitter Cards",status:Y.length>=3?"pass":"warn",message:`Found ${Y.length} Twitter Card tags`,priority:"medium"});const z=document.querySelector('link[rel="canonical"]');l.push({name:"Canonical URL",status:z?"pass":"warn",message:z?"Canonical URL found":"Missing canonical URL",priority:"medium"});const E=document.querySelector('link[rel="sitemap"]');l.push({name:"Sitemap",status:E?"pass":"warn",message:E?"Sitemap linked":"Sitemap not linked in head",priority:"low"});const Q=document.querySelector('meta[name="robots"]');l.push({name:"Robots Meta",status:Q?"pass":"warn",message:Q?`Robots directive: ${Q.getAttribute("content")}`:"Missing robots meta tag",priority:"medium"});const ge=document.querySelectorAll("img"),ie=Array.from(ge).filter(A=>!A.getAttribute("alt"));l.push({name:"Image Alt Tags",status:ie.length===0?"pass":"warn",message:`${ge.length-ie.length}/${ge.length} images have alt tags`,priority:"medium"}),l.push({name:"HTTPS",status:location.protocol==="https:"?"pass":"fail",message:location.protocol==="https:"?"Site uses HTTPS":"Site should use HTTPS",priority:"high"});const fe=document.querySelector('meta[name="viewport"]');l.push({name:"Mobile Viewport",status:fe?"pass":"fail",message:fe?"Viewport meta tag found":"Missing viewport meta tag",priority:"high"});const G=l.filter(A=>A.status==="pass").length,Z=l.length,ee=Math.round(G/Z*100);N(l),T(ee)},c=l=>{switch(l){case"pass":return"bg-green-100 text-green-800 border-green-200";case"warn":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fail":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=l=>{switch(l){case"high":return"bg-red-50 border-red-200";case"medium":return"bg-yellow-50 border-yellow-200";case"low":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"SEO Audit Report"}),e.jsx("p",{className:"text-muted-foreground",children:"Your website's search engine optimization analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold ${o>=80?"text-green-600":o>=60?"text-yellow-600":"text-red-600"}`,children:[o,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"SEO Score"})]}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Close"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(j,{children:[e.jsx(v,{className:"pb-3",children:e.jsx(w,{className:"text-sm text-green-700",children:"Passed"})}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.filter(l=>l.status==="pass").length})})]}),e.jsxs(j,{children:[e.jsx(v,{className:"pb-3",children:e.jsx(w,{className:"text-sm text-yellow-700",children:"Warnings"})}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:k.filter(l=>l.status==="warn").length})})]}),e.jsxs(j,{children:[e.jsx(v,{className:"pb-3",children:e.jsx(w,{className:"text-sm text-red-700",children:"Failed"})}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:k.filter(l=>l.status==="fail").length})})]})]}),e.jsxs(j,{children:[e.jsx(v,{children:e.jsx(w,{children:"Detailed Analysis"})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-3",children:k.map((l,a)=>e.jsx("div",{className:`p-4 rounded-lg border ${i(l.priority)}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-medium",children:l.name}),e.jsx(O,{className:`text-xs ${c(l.status)}`,children:l.status.toUpperCase()}),e.jsxs(O,{variant:"outline",className:"text-xs",children:[l.priority.toUpperCase()," PRIORITY"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.message})]})})},a))})})]}),e.jsxs(j,{className:"mt-6",children:[e.jsx(v,{children:e.jsx(w,{children:"SEO Recommendations"})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Next Steps for Better Rankings:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-blue-800 list-disc list-inside",children:[e.jsx("li",{children:"Submit your sitemap to Google Search Console"}),e.jsx("li",{children:"Set up Google Analytics for traffic monitoring"}),e.jsx("li",{children:"Create high-quality content regularly"}),e.jsx("li",{children:"Build backlinks from reputable websites"}),e.jsx("li",{children:"Monitor your site's performance weekly"})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Search Console Setup:"}),e.jsxs("p",{className:"text-green-800 mt-1",children:["Add your site to Google Search Console and submit your sitemap URL:",e.jsx("code",{className:"bg-white px-2 py-1 rounded ml-2",children:"https://www.hermankwayu.com/sitemap.xml"})]})]})]})})]})]})]})}):null}var Ue="Progress",We=100,[gt,At]=Hs(Ue),[ft,jt]=gt(Ue),ys=d.forwardRef((n,p)=>{const{__scopeProgress:k,value:N=null,max:o,getValueLabel:T=vt,...$}=n;(o||o===0)&&!ps(o)&&console.error(wt(`${o}`,"Progress"));const c=ps(o)?o:We;N!==null&&!gs(N,c)&&console.error(bt(`${N}`,"Progress"));const i=gs(N,c)?N:null,l=Ee(i)?T(i,c):void 0;return e.jsx(ft,{scope:k,value:i,max:c,children:e.jsx(He.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Ee(i)?i:void 0,"aria-valuetext":l,role:"progressbar","data-state":Ss(i,c),"data-value":i??void 0,"data-max":c,...$,ref:p})})});ys.displayName=Ue;var Ns="ProgressIndicator",ks=d.forwardRef((n,p)=>{const{__scopeProgress:k,...N}=n,o=jt(Ns,k);return e.jsx(He.div,{"data-state":Ss(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...N,ref:p})});ks.displayName=Ns;function vt(n,p){return`${Math.round(n/p*100)}%`}function Ss(n,p){return n==null?"indeterminate":n===p?"complete":"loading"}function Ee(n){return typeof n=="number"}function ps(n){return Ee(n)&&!isNaN(n)&&n>0}function gs(n,p){return Ee(n)&&!isNaN(n)&&n<=p&&n>=0}function wt(n,p){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${p}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${We}\`.`}function bt(n,p){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${p}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${We} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var yt=ys,Nt=ks;function Se({className:n,value:p,...k}){return e.jsx(yt,{"data-slot":"progress",className:vs("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",n),...k,children:e.jsx(Nt,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(p||0)}%)`}})})}function kt(){const[n,p]=d.useState(null),[k,N]=d.useState(!0),[o,T]=d.useState("7d"),[$,c]=d.useState(new Date),i=async()=>{N(!0);try{const t=localStorage.getItem("admin_token");if(!t){console.warn("No admin token found - using mock data");const x=a();p(x),c(new Date);return}const P=await fetch(`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/analytics`,{method:"GET",headers:{Authorization:`Bearer ${_}`,"X-Admin-Token":t,"Content-Type":"application/json"}});if(P.ok){const{data:x}=await P.json(),Y={totalVisitors:x.uniqueSessions,totalPageViews:x.totalEvents,resumeBuilderVisits:x.conversionFunnel.resumeBuilderVisitors,resumesCreated:x.conversionFunnel.resumeCreators,resumesDownloaded:x.conversionFunnel.resumeDownloaders,averageSessionDuration:180,bounceRate:35,topPages:[{path:"/",views:Math.floor(x.uniqueSessions*.8),title:"Home"},{path:"/resume-builder",views:x.conversionFunnel.resumeBuilderVisitors,title:"Resume Builder"}],trafficSources:Object.entries(x.trafficSources||{}).map(([z,E])=>({source:z,visitors:E,percentage:Math.round(E/x.uniqueSessions*100)})),deviceTypes:[{type:"Desktop",count:Math.floor(x.uniqueSessions*.6),percentage:60},{type:"Mobile",count:Math.floor(x.uniqueSessions*.3),percentage:30},{type:"Tablet",count:Math.floor(x.uniqueSessions*.1),percentage:10}],resumeTemplateStats:Object.entries(x.templateStats||{}).map(([z,E])=>({templateId:z,templateName:l(z),created:E,downloaded:Math.floor(E*.6),conversionRate:60})),conversionFunnel:{visitors:x.conversionFunnel.totalVisitors,builderVisitors:x.conversionFunnel.resumeBuilderVisitors,creators:x.conversionFunnel.resumeCreators,downloaders:x.conversionFunnel.resumeDownloaders,rates:{visitorToBuilder:x.conversionFunnel.conversionRates.visitorToBuilder,builderToCreator:x.conversionFunnel.conversionRates.builderToCreator,creatorToDownloader:x.conversionFunnel.conversionRates.creatorToDownloader,visitorToDownloader:x.conversionFunnel.conversionRates.visitorToDownloader}},recentEvents:x.recentEvents.map(z=>({event:z.event,timestamp:z.timestamp,properties:z.properties||{}}))};p(Y),c(new Date)}else{console.warn("Failed to fetch analytics - using mock data");const x=a();p(x),c(new Date)}}catch(t){console.error("Failed to fetch analytics:",t);const P=a();p(P),c(new Date)}finally{N(!1)}},l=t=>({modern:"Modern Professional",creative:"Creative Designer",executive:"Executive Classic",minimal:"Minimal Clean"})[t]||t;d.useEffect(()=>{i();const t=setInterval(i,300*1e3);return()=>clearInterval(t)},[o]);const a=()=>{const t=o==="24h"?50:o==="7d"?350:o==="30d"?1200:3500;return{totalVisitors:t+Math.floor(Math.random()*100),totalPageViews:Math.floor(t*2.3)+Math.floor(Math.random()*200),resumeBuilderVisits:Math.floor(t*.35)+Math.floor(Math.random()*50),resumesCreated:Math.floor(t*.15)+Math.floor(Math.random()*30),resumesDownloaded:Math.floor(t*.08)+Math.floor(Math.random()*20),averageSessionDuration:180+Math.floor(Math.random()*120),bounceRate:35+Math.floor(Math.random()*20),topPages:[{path:"/",views:Math.floor(t*.6),title:"Home"},{path:"/#about",views:Math.floor(t*.4),title:"About"},{path:"/resume-builder",views:Math.floor(t*.35),title:"Resume Builder"},{path:"/#services",views:Math.floor(t*.3),title:"Services"},{path:"/#contact",views:Math.floor(t*.25),title:"Contact"}],trafficSources:[{source:"Direct",visitors:Math.floor(t*.4),percentage:40},{source:"Google",visitors:Math.floor(t*.35),percentage:35},{source:"LinkedIn",visitors:Math.floor(t*.15),percentage:15},{source:"Referral",visitors:Math.floor(t*.1),percentage:10}],deviceTypes:[{type:"Desktop",count:Math.floor(t*.55),percentage:55},{type:"Mobile",count:Math.floor(t*.35),percentage:35},{type:"Tablet",count:Math.floor(t*.1),percentage:10}],resumeTemplateStats:[{templateId:"modern",templateName:"Modern Professional",created:Math.floor(t*.06),downloaded:Math.floor(t*.03),conversionRate:50},{templateId:"classic",templateName:"Classic Executive",created:Math.floor(t*.04),downloaded:Math.floor(t*.025),conversionRate:62.5},{templateId:"creative",templateName:"Creative Designer",created:Math.floor(t*.03),downloaded:Math.floor(t*.015),conversionRate:50},{templateId:"minimal",templateName:"Minimal Clean",created:Math.floor(t*.02),downloaded:Math.floor(t*.01),conversionRate:50}],conversionFunnel:{visitors:t,builderVisitors:Math.floor(t*.35),creators:Math.floor(t*.15),downloaders:Math.floor(t*.08),rates:{visitorToBuilder:35,builderToCreator:42.8,creatorToDownloader:53.3,visitorToDownloader:8}},recentEvents:[{event:"resume_downloaded",timestamp:Date.now()-5e3,properties:{templateId:"modern"}},{event:"resume_created",timestamp:Date.now()-15e3,properties:{templateId:"classic"}},{event:"resume_builder_visited",timestamp:Date.now()-3e4,properties:{source:"google"}},{event:"page_view",timestamp:Date.now()-45e3,properties:{page:"/"}},{event:"contact_form_submitted",timestamp:Date.now()-6e4,properties:{success:!0}}]}},m=t=>new Date(t).toLocaleTimeString();return k||!n?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Te,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Loading analytics data..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Website Analytics"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",$.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ze,{value:o,onValueChange:t=>T(t),children:e.jsxs(_e,{children:[e.jsx(V,{value:"24h",children:"24h"}),e.jsx(V,{value:"7d",children:"7d"}),e.jsx(V,{value:"30d",children:"30d"}),e.jsx(V,{value:"90d",children:"90d"})]})}),e.jsxs(g,{onClick:i,variant:"outline",size:"sm",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(j,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Total Visitors"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.totalVisitors.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique visitors"})]})]}),e.jsxs(j,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Resume Builder Visits"}),e.jsx(qs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumeBuilderVisits.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumeBuilderVisits/n.totalVisitors*100).toFixed(1),"% of visitors"]})]})]}),e.jsxs(j,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Resumes Created"}),e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumesCreated.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumesCreated/n.resumeBuilderVisits*100).toFixed(1),"% conversion"]})]})]}),e.jsxs(j,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Resumes Downloaded"}),e.jsx(Us,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumesDownloaded.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumesDownloaded/n.resumesCreated*100).toFixed(1),"% of created"]})]})]})]}),e.jsxs(ze,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(_e,{children:[e.jsx(V,{value:"overview",children:"Overview"}),e.jsx(V,{value:"resume-funnel",children:"Resume Funnel"}),e.jsx(V,{value:"traffic",children:"Traffic Sources"}),e.jsx(V,{value:"devices",children:"Devices"})]}),e.jsx(q,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Resume Builder Conversion Funnel"}),e.jsx(ne,{children:"User journey through resume creation process"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Website Visitors"}),e.jsx("span",{className:"font-bold",children:n.conversionFunnel.visitors.toLocaleString()})]}),e.jsx(Se,{value:100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Builder Visitors"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.builderVisitors.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.visitorToBuilder.toFixed(1),"%)"]})]})]}),e.jsx(Se,{value:n.conversionFunnel.rates.visitorToBuilder,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Creators"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.creators.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.builderToCreator.toFixed(1),"%)"]})]})]}),e.jsx(Se,{value:n.conversionFunnel.rates.builderToCreator,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Downloaders"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.downloaders.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.creatorToDownloader.toFixed(1),"%)"]})]})]}),e.jsx(Se,{value:n.conversionFunnel.rates.creatorToDownloader,className:"h-2"})]}),e.jsx(de,{}),e.jsxs("div",{className:"bg-primary/5 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-primary",children:"Overall Conversion"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:[n.conversionFunnel.rates.visitorToDownloader.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Visitors who download resumes"})]})]})]}),e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Most Visited Pages"}),e.jsx(ne,{children:"Popular pages and sections"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-3",children:n.topPages.map((t,P)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{variant:"outline",className:"w-6 h-6 p-0 flex items-center justify-center text-xs",children:P+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.path})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-sm",children:t.views.toLocaleString()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"views"})]})]},t.path))})})]})]})}),e.jsx(q,{value:"resume-funnel",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Resume Template Performance"}),e.jsx(ne,{children:"Creation and download rates by template"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:n.resumeTemplateStats.map(t=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.templateName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",t.templateId]})]}),e.jsxs(O,{variant:"secondary",children:[t.conversionRate.toFixed(1),"% conversion"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Created"}),e.jsx("div",{className:"font-bold text-lg",children:t.created})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Downloaded"}),e.jsx("div",{className:"font-bold text-lg",children:t.downloaded})]})]}),e.jsx(Se,{value:t.conversionRate,className:"h-2 mt-2"})]},t.templateId))})})]})}),e.jsx(q,{value:"traffic",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Traffic Sources"}),e.jsx(ne,{children:"How visitors find your website"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:n.trafficSources.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.source})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:t.visitors.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.percentage,"%"]})]})]},t.source))})})]})}),e.jsx(q,{value:"devices",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Device Types"}),e.jsx(ne,{children:"Visitor device breakdown"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-4",children:n.deviceTypes.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.type==="Desktop"&&e.jsx(hs,{className:"w-4 h-4 text-muted-foreground"}),t.type==="Mobile"&&e.jsx(lt,{className:"w-4 h-4 text-muted-foreground"}),t.type==="Tablet"&&e.jsx(hs,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:t.count.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.percentage,"%"]})]})]},t.type))})})]})})]}),e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Recent Activity"}),e.jsx(ne,{children:"Live user actions on your website"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-2",children:n.recentEvents.map((t,P)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{variant:"outline",className:"text-xs",children:t.event.replace("_"," ")}),e.jsx("span",{className:"text-sm text-muted-foreground",children:m(t.timestamp)})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.properties.templateId&&`Template: ${t.properties.templateId}`,t.properties.page&&`Page: ${t.properties.page}`,t.properties.source&&`Source: ${t.properties.source}`]})]},P))})})]})]})}function Oe(){const[n,p]=d.useState([{url:"/sitemap.xml",name:"Sitemap",status:"checking"},{url:"/robots.txt",name:"Robots.txt",status:"checking"},{url:"/manifest.json",name:"Manifest",status:"checking"},{url:"/sw.js",name:"Service Worker",status:"checking"}]),[k,N]=d.useState(!1),o=async()=>{N(!0);const c=await Promise.all(n.map(async i=>{try{let l=await fetch(i.url,{method:"HEAD"});return l.ok||(l=await fetch(i.url,{method:"GET",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}})),{...i,status:l.ok?"success":"error",statusCode:l.status,contentType:l.headers.get("content-type")||void 0}}catch(l){return console.error(`Error checking ${i.name}:`,l),{...i,status:"error",statusCode:0}}}));p(c),N(!1)};d.useEffect(()=>{o()},[]);const T=c=>{switch(c){case"success":return e.jsx(qe,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(ws,{className:"w-5 h-5 text-red-500"});case"checking":return e.jsx(Re,{className:"w-5 h-5 text-yellow-500 animate-pulse"})}},$=c=>c.status==="checking"?"Checking...":c.status==="success"?`✅ ${c.statusCode} - ${c.contentType||"Unknown content type"}`:`❌ ${c.statusCode||"Network Error"}`;return e.jsxs(j,{className:"w-full max-w-md",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5"}),"Static Files Status"]}),e.jsx(ne,{children:"Check if sitemap.xml and robots.txt are accessible"})]}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-3",children:[n.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[T(c.status),e.jsx("span",{className:"font-medium",children:c.name})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:$(c)})]},c.url)),e.jsx(g,{onClick:o,disabled:k,className:"w-full mt-4",variant:"outline",children:k?"Checking...":"Recheck Files"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-4 p-2 bg-muted rounded",children:[e.jsx("strong",{children:"Quick Test URLs:"}),e.jsxs("div",{className:"mt-1 space-y-1",children:[e.jsxs("div",{children:["• ",e.jsx("a",{href:"/sitemap.xml",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/sitemap.xml"})]}),e.jsxs("div",{children:["• ",e.jsx("a",{href:"/robots.txt",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/robots.txt"})]}),e.jsxs("div",{children:["• ",e.jsx("a",{href:"/manifest.json",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/manifest.json"})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[e.jsx("strong",{children:"Deployment Info:"}),e.jsxs("div",{className:"mt-1",children:["Environment: ","production"]}),e.jsxs("div",{children:["Current URL: ",window.location.origin]})]})]})]})})]})}function fs(){const[n,p]=d.useState([{url:"/sitemap.xml",name:"Sitemap XML",icon:e.jsx(at,{className:"w-4 h-4"}),status:"pending"},{url:"/robots.txt",name:"Robots.txt",icon:e.jsx(Ve,{className:"w-4 h-4"}),status:"pending"},{url:"/manifest.json",name:"Web Manifest",icon:e.jsx(it,{className:"w-4 h-4"}),status:"pending"},{url:"/sw.js",name:"Service Worker",icon:e.jsx(Js,{className:"w-4 h-4"}),status:"pending"}]),[k,N]=d.useState(!1),o=async()=>{N(!0);const i=await Promise.all(n.map(async l=>{try{const a=`${l.url}?_t=${Date.now()}`,m=await fetch(a,{method:"GET",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});let t="",P=0;if(m.ok){const x=await m.text();t=x.slice(0,200),P=x.length}return{...l,status:m.ok?"success":"error",statusCode:m.status,contentType:m.headers.get("content-type")||"Unknown",size:P,content:t,error:m.ok?void 0:`HTTP ${m.status}: ${m.statusText}`}}catch(a){return{...l,status:"error",statusCode:0,error:a instanceof Error?a.message:"Network error"}}}));p(i),N(!1)},T=i=>{switch(i){case"success":return e.jsx(qe,{className:"w-4 h-4 text-green-500"});case"error":return e.jsx(ws,{className:"w-4 h-4 text-red-500"});default:return e.jsx(Te,{className:"w-4 h-4 text-gray-400"})}},$=i=>i.status==="success"?e.jsxs(O,{variant:"default",className:"bg-green-100 text-green-800 border-green-200",children:[i.statusCode," OK"]}):i.status==="error"?e.jsx(O,{variant:"destructive",children:i.statusCode||"ERROR"}):e.jsx(O,{variant:"secondary",children:"Pending"}),c=i=>i?i<1024?`${i}B`:i<1024*1024?`${(i/1024).toFixed(1)}KB`:`${(i/(1024*1024)).toFixed(1)}MB`:"";return e.jsxs(j,{className:"w-full",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Static File Validator"]}),e.jsx(ne,{children:"Validate that all static files are properly served with correct headers"})]}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(g,{onClick:o,disabled:k,className:"w-full",variant:"outline",children:k?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-4 h-4 mr-2 animate-spin"}),"Validating Files..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Validate All Files"]})}),e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.icon,e.jsx("span",{className:"font-medium",children:i.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[$(i),T(i.status)]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["URL: ",i.url]}),e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary hover:underline",children:["Test ",e.jsx(Qs,{className:"w-3 h-3"})]})]}),i.contentType&&e.jsxs("div",{children:["Content-Type: ",i.contentType]}),i.size!==void 0&&e.jsxs("div",{children:["Size: ",c(i.size)]}),i.error&&e.jsxs("div",{className:"text-red-600",children:["Error: ",i.error]})]}),i.content&&i.status==="success"&&e.jsxs("details",{className:"text-xs",children:[e.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:"Show Content Preview"}),e.jsxs("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-x-auto",children:[i.content,i.size&&i.size>200&&"..."]})]})]},i.url))}),e.jsxs("div",{className:"text-xs text-muted-foreground p-3 bg-muted rounded",children:[e.jsx("strong",{children:"Troubleshooting Tips:"}),e.jsxs("ul",{className:"mt-1 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:["Ensure files exist in the ",e.jsx("code",{children:"/public"})," directory"]}),e.jsx("li",{children:"Check deployment platform configuration (Netlify/Vercel)"}),e.jsx("li",{children:"Verify build process copies static files correctly"}),e.jsxs("li",{children:["Test locally with ",e.jsx("code",{children:"npm run preview"})]})]})]})]})})]})}function js(){const[n,p]=d.useState(!1),[k,N]=d.useState([]),o=$=>{N(c=>[...c,`${new Date().toLocaleTimeString()}: ${$}`])},T=async()=>{p(!0),N([]),o("🔍 Starting connection diagnostic..."),o("📡 Testing basic network connectivity...");try{const a=await fetch("https://www.google.com",{method:"HEAD",mode:"no-cors"});o("✅ Basic internet connectivity: OK")}catch(a){o("❌ Basic internet connectivity: FAILED"),o(`   Error: ${a}`)}const $=`https://${B}.supabase.co`;o(`🔗 Testing Supabase project URL: ${$}`);try{const a=await fetch($,{method:"HEAD",mode:"cors"});o(`✅ Supabase project reachable: ${a.status} ${a.statusText}`)}catch(a){o("❌ Supabase project unreachable"),o(`   Error: ${a}`)}const c=`https://${B}.supabase.co/functions/v1`;o(`⚙️ Testing Edge Functions endpoint: ${c}`);try{const a=await fetch(c,{method:"HEAD",mode:"cors",headers:{Authorization:`Bearer ${_}`}});o(`✅ Edge Functions endpoint reachable: ${a.status} ${a.statusText}`)}catch(a){o("❌ Edge Functions endpoint unreachable"),o(`   Error: ${a}`)}const i=`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/debug/password`;o(`🔐 Testing password format: ${i}`);try{const a=await fetch(i,{method:"GET",mode:"cors",headers:{Authorization:`Bearer ${_}`}});if(a.ok){const m=await a.json();o(`✅ Expected password: "${m.expected}" (length: ${m.length})`),o(`   Password char codes: ${m.charCodes.map(t=>`${t.char}:${t.code}`).join(" ")}`)}else o(`⚠️ Debug endpoint returned: ${a.status}`)}catch(a){o("❌ Debug endpoint unreachable"),o(`   Error: ${a}`)}const l=`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/admin/authenticate`;o(`🔐 Testing admin auth endpoint: ${l}`);try{const m=await fetch(l,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({password:"HermanAdmin2024!"})});if(o(`✅ Admin endpoint reachable: ${m.status} ${m.statusText}`),m.ok){const t=await m.json();o("✅ Authentication successful with correct password!")}else if(m.status===401){o("❌ Authentication failed - password mismatch detected");const t=await m.json();t.debug&&o(`   Debug info: received="${t.debug.received}" vs expected="${t.debug.expected}"`)}}catch(a){o("❌ Admin endpoint unreachable"),o(`   Error: ${a}`)}o("🔧 Checking environment variables..."),o("   Project ID: ✅ Set"),o("   Public Key: ✅ Set"),o("🌐 Checking browser environment..."),o(`   Navigator online: ${navigator.onLine?"✅ Online":"❌ Offline"}`),o(`   User Agent: ${navigator.userAgent.substring(0,50)}...`),o("🏁 Diagnostic complete!"),p(!1)};return e.jsxs(j,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(v,{children:[e.jsx(w,{children:"🔍 Connection Diagnostic Tool"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This tool helps diagnose connectivity issues with the Supabase backend."})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsx(g,{onClick:T,disabled:n,className:"w-full",children:n?"Running Diagnostic...":"Run Connection Test"}),k.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Diagnostic Results:"}),e.jsx("div",{className:"space-y-1 text-sm font-mono max-h-80 overflow-y-auto",children:k.map(($,c)=>e.jsx("div",{className:"whitespace-pre-wrap",children:$},c))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-sm",children:[e.jsx("strong",{children:"💡 Common Issues:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[e.jsx("li",{children:"• If Supabase project is unreachable: Check if your Supabase project is active"}),e.jsx("li",{children:"• If Edge Functions fail: Ensure the make-server-4d80a1b0 function is deployed"}),e.jsx("li",{children:"• If CORS errors occur: Check Supabase project settings"}),e.jsx("li",{children:"• If network fails: Check firewall/proxy settings"})]})]})]})]})}function St(){const[n,p]=d.useState({overall:"healthy",details:[]}),[k,N]=d.useState(!1),[o,T]=d.useState(!1),$=()=>{const a=[];let m=!1;try{a.push("Production mode"),typeof window<"u"?a.push("Browser environment detected"):a.push("Server environment detected"),typeof fetch<"u"?a.push("Fetch API available"):(a.push("Fetch API unavailable"),m=!0);try{typeof window<"u"&&window.localStorage?a.push("Local storage available"):(a.push("Local storage unavailable"),m=!0)}catch{a.push("Local storage check failed"),m=!0}}catch{a.push("Environment check failed"),m=!0}return{overall:m?"warning":"healthy",details:a}};d.useEffect(()=>{let a=!1;try{a=!1}catch{}if(!a&&typeof window<"u")try{a=new URLSearchParams(window.location.search).has("health-check")}catch{}N(a),a&&c()},[]);const c=()=>{T(!0),setTimeout(()=>{const a=$();p(a),T(!1)},500)},i=(a,m)=>{if(m)return e.jsx(us,{className:"h-4 w-4 text-blue-500 animate-spin"});switch(a){case"healthy":return e.jsx(qe,{className:"h-4 w-4 text-green-500"});case"warning":return e.jsx(Re,{className:"h-4 w-4 text-yellow-500"});case"error":return e.jsx(Re,{className:"h-4 w-4 text-red-500"});default:return e.jsx(us,{className:"h-4 w-4 text-blue-500"})}},l=(a,m)=>{if(m)return e.jsx(O,{variant:"outline",children:"Checking..."});switch(a){case"healthy":return e.jsx(O,{variant:"default",className:"bg-green-500",children:"Healthy"});case"warning":return e.jsx(O,{variant:"secondary",className:"bg-yellow-500 text-white",children:"Warning"});case"error":return e.jsx(O,{variant:"destructive",children:"Error"});default:return e.jsx(O,{variant:"outline",children:"Unknown"})}};return k?e.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:e.jsxs(j,{className:"shadow-lg border-2",children:[e.jsx(v,{className:"pb-3",children:e.jsxs(w,{className:"flex items-center gap-2 text-sm",children:[i(n.overall,o),"Health Check",e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>N(!1),className:"ml-auto h-6 w-6 p-0",children:"×"})]})}),e.jsxs(b,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Overall Status"}),l(n.overall,o)]}),n.details.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Details:"}),n.details.map((a,m)=>e.jsxs("div",{className:"text-xs text-muted-foreground",children:["• ",a]},m))]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx(g,{variant:"outline",size:"sm",onClick:c,disabled:o,className:"w-full",children:o?"Checking...":"Refresh Check"})})]})]})}):null}function Dt({isVisible:n,onClose:p}){const k={"weekly-update":{subject:"Weekly Business Insights from Herman Kwayu",content:`Hello [Subscriber],

I hope this message finds you well! Here are this week's key insights and updates from the world of business strategy and digital transformation:

🎯 **This Week's Focus: [Main Topic]**
[Write your main content here about current business trends, insights, or updates]

💡 **Quick Tip**
[Share a practical tip that subscribers can implement immediately]

📈 **Resource Recommendation**
I came across [resource/tool/article] that I think you'd find valuable for [specific use case].

🔗 **What I'm Working On**
[Brief update about your current projects or services]

That's all for this week! I'd love to hear your thoughts on [relevant question or topic].

Best regards,
Herman Kwayu

P.S. Got questions about digital transformation or business strategy? Just hit reply - I read every message personally.`,previewText:"Weekly insights on business strategy and digital transformation"},"monthly-deep-dive":{subject:"Monthly Deep Dive: [Topic] - Herman Kwayu Consulting",content:`Dear Business Leader,

This month, I want to dive deep into [specific topic] and how it's reshaping the business landscape.

📊 **The Current State**
[Detailed analysis of the topic and current trends]

🔍 **Why This Matters for Your Business**
[Specific implications and opportunities for subscribers]

✅ **Actionable Steps You Can Take Today**
1. [First actionable step]
2. [Second actionable step]
3. [Third actionable step]

🎯 **Case Study: Real Results**
[Brief case study or example showing practical application]

🚀 **Looking Ahead**
[Future predictions or trends to watch]

---

**Ready to Transform Your Business?**
If you're looking to implement these strategies in your organization, I'd love to discuss how we can work together. Schedule a free consultation at [your calendly link].

Best regards,
Herman Kwayu
Digital Strategy & Process Optimization Expert`,previewText:"Deep dive analysis and actionable insights for business leaders"},"service-announcement":{subject:"🚀 New Service Launch: [Service Name]",content:`Hello [Subscriber],

I'm excited to share something I've been working on that I believe will make a significant impact on your business growth.

🎉 **Introducing: [New Service Name]**
[Description of the new service and what it offers]

💼 **Who This Is Perfect For:**
• [Target audience 1]
• [Target audience 2]
• [Target audience 3]

✨ **What You Can Expect:**
• [Benefit 1]
• [Benefit 2]
• [Benefit 3]

📈 **Early Results**
[Share any early results or testimonials if available]

🎁 **Special Launch Offer**
As a valued newsletter subscriber, you get [special offer details].

Ready to learn more? [Call-to-action button/link]

Questions? Simply reply to this email - I personally respond to every inquiry.

Best regards,
Herman Kwayu`,previewText:"Exciting new service announcement with exclusive subscriber benefits"},"insights-sharing":{subject:"Lessons from the Field: [Specific Insight]",content:`Hi there,

I just finished working with a client on [type of project], and I wanted to share some insights that might be valuable for your business too.

🎯 **The Challenge**
[Describe the challenge or problem]

💡 **The Approach**
[Explain the strategy or solution implemented]

📊 **The Results**
[Share the outcomes and impact]

🔑 **Key Takeaways for You:**
• [Takeaway 1]
• [Takeaway 2]  
• [Takeaway 3]

This experience reinforced something I've seen time and again: [key principle or lesson].

**How does this apply to your business?** [Ask a thought-provoking question]

I'd love to hear your thoughts on this. Hit reply and let me know if you've faced similar challenges.

Cheers,
Herman Kwayu

P.S. If you're dealing with similar challenges, let's chat. I offer complimentary strategy calls to help you identify opportunities in your business.`,previewText:"Real-world insights from recent client work and practical lessons"}},[N,o]=d.useState(""),[T,$]=d.useState(!1),[c,i]=d.useState(!1),[l,a]=d.useState(null),[m,t]=d.useState(null),[P,x]=d.useState({current:0,total:0,currentTask:""}),[Y,z]=d.useState(Date.now()),[E,Q]=d.useState(null),[ge,ie]=d.useState(!1),[fe,G]=d.useState(!1),[Z,ee]=d.useState(""),[A,je]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),se=600*1e3,Me=120*1e3,[Ce,oe]=d.useState([]),[Ge,me]=d.useState([]),[te,ue]=d.useState({subject:"",content:"",previewText:""}),[Xe,Fe]=d.useState(""),[le,J]=d.useState([]),[S,ve]=d.useState(null),[H,W]=d.useState({emailService:"checking",database:"checking",contactForm:"checking",newsletterSystem:"checking"}),[ae,Ie]=d.useState({totalContacts:0,newContacts:0,responseRate:0,avgResponseTime:"0 hours",completionRate:0}),[we,$e]=d.useState({}),[Pe,Ts]=d.useState(null),[Be,Ye]=d.useState(0),[Je,Ke]=d.useState(null),[Qe,Cs]=d.useState(null),[he,Ze]=d.useState(navigator.onLine),[I,X]=d.useState("healthy"),[$s,xe]=d.useState(0),[be,ye]=d.useState(!0),[Tt,Le]=d.useState(0),[Ps,es]=d.useState(!1),[Ct,As]=d.useState({hasPassword:!1,passwordLength:0,source:"unknown"});d.useEffect(()=>{if(l||m){const s=setTimeout(()=>{a(null),t(null)},5e3);return()=>clearTimeout(s)}},[l,m]),d.useEffect(()=>{const s=()=>{Ze(!0),X("healthy"),console.log("🌐 Network connection restored")},r=()=>{Ze(!1),X("offline"),console.log("🌐 Network connection lost")};return window.addEventListener("online",s),window.addEventListener("offline",r),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}},[]),d.useEffect(()=>()=>{Pe&&clearTimeout(Pe),Je&&Je.abort()},[]),d.useEffect(()=>{if(T&&!c)return(()=>{const r=setTimeout(()=>{Is()},12e4);Ts(r)})(),()=>{Pe&&clearTimeout(Pe)}},[T,c,Be]),d.useEffect(()=>{if(T){const s=Date.now();z(s),E&&clearTimeout(E);const r=()=>{const h=Date.now();z(h),ie(!1),E&&clearTimeout(E);const f=setTimeout(()=>{ss()},se-Me);Q(f)},u=["mousedown","mousemove","keypress","scroll","touchstart","click"];return u.forEach(h=>{document.addEventListener(h,r,!0)}),r(),()=>{u.forEach(h=>{document.removeEventListener(h,r,!0)}),E&&clearTimeout(E)}}},[T]);const ss=()=>{const r=Date.now()-Y;if(r>=se-Me)if(r>=se)Ne("Session expired due to inactivity");else{ie(!0);const u=se-r,h=setTimeout(()=>{Ne("Session expired due to inactivity")},u);Q(h)}},Ne=s=>{$(!1),o(""),oe([]),me([]),J([]),ve(null),ie(!1),G(!1),localStorage.removeItem("admin_token"),E&&clearTimeout(E),Q(null),s?a(s):t("Successfully logged out")},Ds=()=>{z(Date.now()),ie(!1),E&&clearTimeout(E);const s=setTimeout(()=>{ss()},se-Me);Q(s)},Rs=async()=>{if(T)try{const s=await fetch(`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/admin/password-status`,{headers:{Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||""}});if(s.ok){const r=await s.json();As(r)}}catch(s){console.error("Failed to check password status:",s)}},ts=async()=>{if(i(!0),a(null),!N.trim()){a("Please enter admin password"),i(!1);return}const s=Date.now(),r=`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/admin/authenticate`;try{console.log("🚀 Ultra-fast auth starting...");const u=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({password:N}),keepalive:!0}),h=Date.now()-s;if(console.log(`⚡ Auth completed in ${h}ms`),!u.ok){const y=await u.json();throw console.error("🔐 Auth failed:",u.status,u.statusText),new Error(y.error||"Authentication failed")}const f=await u.json();f.success?($(!0),X("healthy"),Le(Date.now()),f.token&&localStorage.setItem("admin_token",f.token),t(`Authentication successful in ${h}ms!`),setTimeout(()=>{Rs()},100),setTimeout(()=>{Fs(!0)},300)):(a("Invalid password - check console for debug info"),o(""))}catch(u){const h=Date.now()-s;console.error(`❌ Auth failed (${h}ms):`,u),a("Authentication failed - check password and try again."),o("")}finally{i(!1)}},Es=s=>{const r=we[s];if(r&&Date.now()<r.expiry){const u=Math.round((r.expiry-Date.now())/1e3);return console.log(`📦 Using cached data for ${s} (${u}s remaining)`),r.data}return null},Ms=(s,r,u=9e4)=>{$e(h=>({...h,[s]:{data:r,timestamp:Date.now(),expiry:Date.now()+u}}))},Fs=(s=!1)=>{Qe&&clearTimeout(Qe);const r=setTimeout(()=>{ke(s)},300);Cs(r)},Is=async()=>{if(!be||!he){console.log("⏸️ Background refresh skipped (backend unhealthy or offline)");return}console.log("🔄 Background refresh started (using batch endpoint)");const s=Date.now();try{const r=new AbortController;Ke(r);const u=`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/admin/dashboard-data`,h=setTimeout(()=>r.abort(),3e3),f=await fetch(u,{method:"GET",signal:r.signal,headers:{Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||"",Accept:"application/json"}});if(clearTimeout(h),!f.ok)throw new Error(`Batch refresh failed: ${f.status}`);const y=await f.json(),R=Date.now()-s;y.subscribers&&(oe(y.subscribers.subscribers||[]),W(C=>({...C,database:"active"}))),y.newsletters&&(me(y.newsletters.newsletters||[]),W(C=>({...C,newsletterSystem:"active"}))),y.contacts&&(J(y.contacts.contacts||[]),W(C=>({...C,contactForm:"active"})),pe(y.contacts.contacts||[])),Ye(Date.now()),console.log(`✅ Background refresh completed via batch endpoint (${R}ms, cache: ${f.headers.get("X-Cache")||"unknown"})`)}catch(r){console.warn("⚠️ Background batch refresh failed, trying individual requests:",r);try{const u=[{url:`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/subscribers`,key:"subscribers"},{url:`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/contacts`,key:"contacts"}];for(const h of u)try{const f=await Ls(h.url,h.key,{},2e3);switch(h.key){case"subscribers":f?.subscribers&&oe(f.subscribers);break;case"contacts":f?.contacts&&(J(f.contacts),pe(f.contacts));break}await new Promise(y=>setTimeout(y,200))}catch(f){console.warn(`⚠️ Background refresh failed for ${h.key}:`,f)}Ye(Date.now()),console.log(`✅ Background refresh completed via fallback (${Date.now()-s}ms)`)}catch(u){console.warn("⚠️ Background refresh fallback also failed:",u)}}},as=()=>{$s>=3&&(ye(!1),X("offline"),console.warn("🚨 Backend marked as unhealthy due to consecutive failures"),setTimeout(()=>{xe(0),ye(!0),X("healthy"),console.log("🔄 Attempting backend health recovery")},12e4))},Bs=async s=>(console.log("🔍 Network diagnostic disabled for performance"),!1),Ls=async(s,r,u={},h=3e3,f,y=0)=>{const R=Es(r);if(R)return R;if(!he)throw new Error("No network connection");if(!be){const M=we[r];if(M)return console.log(`📦 Using stale cache for ${r} (backend unhealthy)`),M.data;throw new Error("Backend unavailable and no cached data")}const C=new AbortController,D=C.signal;for(let M=0;M<=y;M++){const Ae=setTimeout(()=>C.abort(),h);try{console.log(`🔄 Attempting fetch for ${r} (attempt ${M+1}/${y+1})`);const L=await fetch(s,{...u,signal:D,mode:"cors",credentials:"omit",headers:{Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||"","Content-Type":"application/json",Accept:"application/json",...u.headers}});if(clearTimeout(Ae),console.log(`✅ Response received for ${r}: ${L.status} ${L.statusText}`),!L.ok){const De=await L.text();throw console.error(`❌ HTTP Error for ${r}:`,L.status,L.statusText,De),new Error(`HTTP ${L.status}: ${L.statusText} - ${De}`)}const ce=await L.json();return xe(0),ye(!0),X("healthy"),Le(Date.now()),Ms(r,ce,6e4),console.log(`✅ Successfully fetched and cached ${r}`),ce}catch(L){if(clearTimeout(Ae),console.error(`❌ Fetch failed for ${r} (attempt ${M+1}):`,L),D.aborted)throw console.error(`⏰ Request timeout for ${r} after ${h}ms`),new Error(`Request timeout after ${h}ms`);if(L instanceof Error&&(L.message.includes("Failed to fetch")?(console.error("🚨 Network connectivity issue or server unreachable"),M===0&&await Bs()):L.message.includes("CORS")?console.error("🚨 CORS policy violation"):L.message.includes("Network")&&console.error("🚨 General network error")),xe(ce=>ce+1),M<y){const ce=2e3+M*1e3;console.warn(`⏳ Retrying ${r} in ${ce}ms...`),await new Promise(De=>setTimeout(De,ce));continue}throw as(),L}}},ke=async(s=!0)=>{s&&(i(!0),a(null),x({current:0,total:3,currentTask:"Connecting to server..."}));const r=Date.now();if(!he||!be){const u=["subscribers","newsletters","contacts"];let h=!1;u.forEach(f=>{const y=we[f];if(y)switch(h=!0,f){case"subscribers":oe(y.data.subscribers||[]);break;case"newsletters":me(y.data.newsletters||[]);break;case"contacts":J(y.data.contacts||[]),pe(y.data.contacts||[]);break}}),h?(a(he?"Server unavailable - showing cached data":"Offline - showing cached data"),console.log("📦 Using cached data (offline/backend unhealthy)")):(console.log("🎭 No cached data available, using mock data"),oe(["example@example.com","test@test.com"]),J([]),me([]),Ie({totalContacts:0,newContacts:0,responseRate:0,avgResponseTime:"0 hours",completionRate:0}),W({emailService:"checking",database:"checking",contactForm:"checking",newsletterSystem:"checking"}),a("Server response is slow. Using default data. The admin panel will refresh when connection improves.")),s&&(i(!1),x({current:0,total:0,currentTask:""}));return}try{s&&x({current:1,total:3,currentTask:"Loading dashboard data..."});const u=`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/admin/dashboard-data`;console.log("📊 Using optimized batch endpoint for dashboard data");const h=new AbortController;Ke(h);const f=setTimeout(()=>{h.abort(),console.log("⏰ Fast timeout triggered - falling back to cached/mock data")},2e3),y=await fetch(u,{method:"GET",signal:h.signal,headers:{Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||"",Accept:"application/json","Cache-Control":"no-cache"}});clearTimeout(f);const R=Date.now()-r;if(s&&x({current:2,total:3,currentTask:"Processing dashboard data..."}),!y.ok)throw new Error(`Batch request failed: ${y.status} ${y.statusText}`);const C=await y.json();console.log(`📊 Batch request completed in ${R}ms (cache: ${y.headers.get("X-Cache")||"unknown"})`),C.subscribers&&(oe(C.subscribers.subscribers||[]),W(D=>({...D,database:"active"})),console.log(`👥 Loaded ${C.subscribers.count||0} subscribers`)),C.newsletters&&(me(C.newsletters.newsletters||[]),W(D=>({...D,newsletterSystem:"active"})),console.log(`📄 Loaded ${C.newsletters.count||0} newsletters`)),C.contacts&&(J(C.contacts.contacts||[]),W(D=>({...D,contactForm:"active"})),pe(C.contacts.contacts||[]),console.log(`📬 Loaded ${C.contacts.count||0} contacts`));try{s&&x({current:3,total:3,currentTask:"Testing email service..."});const D=await fetch(`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/test-email`,{method:"POST",headers:{Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||"","Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(D.ok){const M=await D.json();W(Ae=>({...Ae,emailService:M.success?"active":"error"}))}else W(M=>({...M,emailService:"error"}))}catch(D){console.warn("⚠️ Email service test failed:",D),W(M=>({...M,emailService:"error"}))}xe(0),ye(!0),X("healthy"),Le(Date.now()),s&&t(`Dashboard loaded successfully in ${R}ms`),console.log(`✅ Dashboard data loaded successfully via batch endpoint (${R}ms)`)}catch(u){if(console.error("❌ Batch dashboard load failed:",u),xe(h=>h+1),u instanceof Error)if(u.name==="AbortError"){a("Server is slow - loading with demo data. Try refreshing for real data."),oe(["demo@example.com","test@test.com"]),J([]),me([]),Ie({totalContacts:0,newContacts:0,responseRate:0,avgResponseTime:"0 hours",completionRate:0}),W({emailService:"checking",database:"checking",contactForm:"checking",newsletterSystem:"checking"}),s&&(i(!1),x({current:0,total:0,currentTask:""}));return}else u.message.includes("Failed to fetch")?(a("Unable to connect to server. Please check your connection."),X("offline")):(a(`Failed to load dashboard: ${u.message}`),X("degraded"));as()}finally{s&&(i(!1),x({current:0,total:0,currentTask:""}))}},pe=s=>{const r=s.length,u=s.filter(D=>D.status==="new").length,h=s.filter(D=>D.status==="contacted").length,f=s.filter(D=>D.status==="completed").length,y=r>0?Math.round((h+f)/r*100):0,R=r>0?Math.round(f/r*100):0,C=y>0?"18 hours":"0 hours";Ie({totalContacts:r,newContacts:u,responseRate:y,avgResponseTime:C,completionRate:R})},Os=async()=>{if(!Z){a("Please enter your email address");return}i(!0);try{const s=await fetch(`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/admin/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({email:Z})});if(s.ok)t("Password reset instructions sent to your email"),G(!1),ee("");else{const r=await s.json();a(r.error||"Failed to send reset email")}}catch{a("Failed to process password reset request")}finally{i(!1)}},zs=async()=>{if(!A.currentPassword||!A.newPassword||!A.confirmPassword){a("Please fill in all password fields");return}if(A.newPassword!==A.confirmPassword){a("New passwords do not match");return}if(A.newPassword.length<8){a("New password must be at least 8 characters long");return}const s=/[A-Z]/.test(A.newPassword),r=/[a-z]/.test(A.newPassword),u=/\d/.test(A.newPassword),h=/[!@#$%^&*(),.?":{}|<>]/.test(A.newPassword);if(!s||!r||!u||!h){a("Password must contain uppercase, lowercase, numbers, and special characters");return}i(!0);try{const f=await fetch(`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/admin/update-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||""},body:JSON.stringify({currentPassword:A.currentPassword,newPassword:A.newPassword})});if(f.ok)t("Password updated successfully! You will be logged out for security."),je({currentPassword:"",newPassword:"",confirmPassword:""}),G(!1),setTimeout(()=>{Ne("Password changed - please log in with your new password")},3e3);else{const y=await f.json();a(y.error||"Failed to update password")}}catch{a("Failed to update password. Please try again.")}finally{i(!1)}},_s=s=>{const r=k[s];r&&(ue({subject:r.subject,content:r.content,previewText:r.previewText}),Fe(s))},Vs=async()=>{if(!te.subject||!te.content){a("Subject and content are required");return}i(!0),a(null),x({current:0,total:3,currentTask:"Preparing newsletter..."});try{const s=new AbortController,r=setTimeout(()=>s.abort(),3e4);x({current:1,total:3,currentTask:"Sending newsletter..."});const u=await fetch(`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/send-newsletter`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||""},body:JSON.stringify(te),signal:s.signal});clearTimeout(r),x({current:2,total:3,currentTask:"Processing results..."});const h=await u.json();u.ok?(t(`Newsletter sent successfully to ${h.successCount} subscribers! ${h.failCount>0?`(${h.failCount} failed)`:""}`),ue({subject:"",content:"",previewText:""}),Fe(""),$e(f=>({...f,newsletters:{...f.newsletters,expiry:0}})),x({current:3,total:3,currentTask:"Refreshing data..."}),await ke(!1)):a(h.error||"Failed to send newsletter")}catch(s){s instanceof Error&&s.name==="AbortError"?a("Newsletter sending timeout - please check the status in newsletter history"):a("Failed to send newsletter - please check your connection and try again")}finally{i(!1),x({current:0,total:0,currentTask:""})}},rs=async(s,r,u)=>{i(!0),a(null);const h=le,f=S,y=le.map(R=>R.id===s?{...R,status:r,notes:u,lastUpdated:new Date().toISOString()}:R);J(y),S&&S.id===s&&ve({...S,status:r,notes:u,lastUpdated:new Date().toISOString()}),pe(y);try{const R=new AbortController,C=setTimeout(()=>R.abort(),1e4),D=await fetch(`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/contacts/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`,"X-Admin-Token":localStorage.getItem("admin_token")||""},body:JSON.stringify({status:r,notes:u}),signal:R.signal});if(clearTimeout(C),D.ok)t("Contact updated successfully"),$e(M=>({...M,contacts:{...M.contacts,expiry:0}}));else throw new Error("Update failed")}catch(R){J(h),ve(f),pe(h),R instanceof Error&&R.name==="AbortError"?a("Update timeout - contact status may not have been saved"):a("Failed to update contact - changes reverted")}finally{i(!1)}},ns=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800 border-blue-200";case"contacted":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in-progress":return"bg-purple-100 text-purple-800 border-purple-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},is=s=>({"strategic-planning":"Strategic Planning","digital-transformation":"Digital Transformation","business-optimization":"Business Optimization","innovation-consulting":"Innovation Consulting","change-management":"Change Management","growth-strategy":"Growth Strategy",custom:"Custom Solution"})[s]||s;return n?T?e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-auto",children:[e.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-7xl max-h-full overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"HK"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your website services"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Session: ",Math.floor((se-(Date.now()-Y))/1e3/60),"m remaining"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Auto-logout at ",new Date(Y+se).toLocaleTimeString()]}),Be>0&&e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["✓ Last refreshed ",Math.floor((Date.now()-Be)/1e3),"s ago"]}),Object.keys(we).length>0&&e.jsxs("div",{className:"text-xs text-blue-600",children:["📦 ",Object.keys(we).length," items cached"]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${I==="healthy"?"bg-green-500":I==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:`${I==="healthy"?"text-green-600":I==="degraded"?"text-yellow-600":"text-red-600"}`,children:I==="healthy"?"Connected":I==="degraded"?"Slow":"Offline"})]}),!be&&e.jsx(g,{size:"sm",variant:"outline",onClick:async()=>{console.log("🔍 Running quick connectivity test...");const s=`https://${B}.supabase.co/functions/v1/make-server-4d80a1b0/ping`;try{(await fetch(s,{method:"GET",signal:AbortSignal.timeout(2e3),headers:{Authorization:`Bearer ${_}`}})).ok&&(ye(!0),X("healthy"),xe(0),t("Connection restored! Try refreshing data."))}catch{a("Connection test failed. Server may be down.")}},className:"text-xs",children:"Test Connection"})]}),e.jsx(de,{orientation:"vertical",className:"h-8"}),e.jsx(g,{variant:"outline",onClick:()=>ke(!0),disabled:c,size:"sm",children:c?"Loading...":I==="offline"?"Retry Connection":"Refresh All"}),e.jsx(g,{variant:"outline",onClick:()=>Ne(),size:"sm",children:"Logout"}),e.jsx(g,{variant:"outline",onClick:p,size:"sm",children:"Close"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-900",children:"🚀 Live Production Server"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Connected to live database and server. All data and operations are real."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${I==="healthy"?"bg-green-500":I==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm text-green-700",children:I==="healthy"?"All systems operational":I==="degraded"?"Connection issues detected":"Server offline"})]})]})}),l&&!0&&e.jsx("div",{className:`mb-4 p-3 rounded-md border ${l.includes("cached data")||l.includes("Offline")?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-lg",children:l.includes("cached data")||l.includes("Offline")?"⚠️":"❌"}),e.jsxs("div",{children:[e.jsx("p",{children:l}),!he&&e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Check your internet connection and try refreshing the page."}),!be&&he&&e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"The server appears to be experiencing issues. Data will auto-refresh when connection is restored."})]})]})}),m&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded-md border border-green-200",children:m}),c&&P.total>0&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:P.currentTask}),e.jsxs("span",{className:"text-sm text-blue-700",children:[P.current,"/",P.total]})]}),e.jsx("div",{className:"w-full bg-blue-100 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${P.current/P.total*100}%`}})})]}),e.jsxs(ze,{defaultValue:"overview",className:"w-full",children:[e.jsxs(_e,{className:"grid w-full grid-cols-7",children:[e.jsx(V,{value:"overview",children:"Overview"}),e.jsx(V,{value:"analytics",children:"Analytics"}),e.jsx(V,{value:"newsletter",children:"Newsletter"}),e.jsx(V,{value:"contacts",children:"Contacts"}),e.jsx(V,{value:"seo",children:"SEO"}),e.jsx(V,{value:"settings",children:"Settings"}),e.jsx(V,{value:"diagnostic",children:"Diagnostic"})]}),e.jsx(q,{value:"analytics",className:"space-y-6",children:e.jsx(kt,{})}),e.jsxs(q,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(j,{children:[e.jsx(v,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Newsletter Subscribers"})}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ce.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active subscribers"})]})]}),e.jsxs(j,{children:[e.jsx(v,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Total Inquiries"})}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ae.totalContacts}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ae.newContacts," new inquiries"]})]})]}),e.jsxs(j,{children:[e.jsx(v,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Response Rate"})}),e.jsxs(b,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[ae.responseRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg: ",ae.avgResponseTime]})]})]}),e.jsxs(j,{children:[e.jsx(v,{className:"pb-3",children:e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Completion Rate"})}),e.jsxs(b,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[ae.completionRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Projects completed"})]})]})]}),e.jsxs(j,{children:[e.jsx(v,{children:e.jsx(w,{children:"Recent Activity"})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[le.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["New contact from ",s.name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]}),e.jsx(O,{className:`${ns(s.status)}`,children:s.status})]},s.id)),le.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No recent contact activity"})]})})]})]}),e.jsx(q,{value:"newsletter",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Send Newsletter"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Send to ",Ce.length," subscribers"]})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"template",children:"Quick Start Templates"}),e.jsxs(os,{value:Xe,onValueChange:_s,children:[e.jsx(ls,{children:e.jsx(cs,{placeholder:"Choose a template (optional)"})}),e.jsxs(ds,{children:[e.jsx(K,{value:"weekly-update",children:"Weekly Business Update"}),e.jsx(K,{value:"monthly-deep-dive",children:"Monthly Deep Dive"}),e.jsx(K,{value:"service-announcement",children:"Service Announcement"}),e.jsx(K,{value:"insights-sharing",children:"Insights from the Field"})]})]}),Xe&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Template applied! You can customize the content below."})]}),e.jsx(de,{}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"subject",children:"Subject Line"}),e.jsx(re,{id:"subject",value:te.subject,onChange:s=>ue(r=>({...r,subject:s.target.value})),placeholder:"Enter newsletter subject"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"previewText",children:"Preview Text (Optional)"}),e.jsx(re,{id:"previewText",value:te.previewText,onChange:s=>ue(r=>({...r,previewText:s.target.value})),placeholder:"Brief preview text"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"content",children:"Newsletter Content"}),e.jsx(ms,{id:"content",value:te.content,onChange:s=>ue(r=>({...r,content:s.target.value})),rows:8,placeholder:"Write your newsletter content here..."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{onClick:Vs,disabled:c||!te.subject||!te.content,className:"flex-1",children:c?"Sending...":`Send to ${Ce.length} Subscribers`}),e.jsx(g,{variant:"outline",onClick:()=>{ue({subject:"",content:"",previewText:""}),Fe("")},children:"Clear"})]})]})]}),e.jsxs(j,{children:[e.jsx(v,{children:e.jsx(w,{children:"Newsletter History"})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",children:[Ge.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-1",children:s.subject}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:new Date(s.sentAt).toLocaleDateString()}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[e.jsxs("span",{className:"text-green-600",children:["✓ ",s.successCount," sent"]}),s.failCount>0&&e.jsxs("span",{className:"text-red-600",children:["✗ ",s.failCount," failed"]})]})]},s.id)),Ge.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No newsletters sent yet"})]})})]})]})}),e.jsx(q,{value:"contacts",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsx(v,{children:e.jsxs(w,{children:["Contact Submissions (",le.length,")"]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",children:[le.map(s=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${S?.id===s.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>ve(s),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium truncate",children:s.name}),s.emailSent&&e.jsx(O,{variant:"outline",className:"text-xs",children:"✅ Emailed"})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.email}),s.service&&e.jsx("p",{className:"text-xs text-primary mt-1",children:is(s.service)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.submittedAt).toLocaleDateString()})]}),e.jsx(O,{className:`text-xs ${ns(s.status)}`,children:s.status})]})},s.id)),le.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No contact submissions yet"})})]})})]}),e.jsxs(j,{children:[e.jsx(v,{children:e.jsx(w,{children:S?"Contact Details":"Select a Contact"})}),e.jsx(b,{children:S?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm",children:S.name})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm",children:S.email}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>window.open(`mailto:${S.email}`,"_blank"),children:"Reply"})]})]}),S.company&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Company"}),e.jsx("p",{className:"text-sm",children:S.company})]}),S.service&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Service"}),e.jsx("p",{className:"text-sm",children:is(S.service)})]}),S.budget&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Budget"}),e.jsx("p",{className:"text-sm",children:S.budget})]}),S.timeline&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Timeline"}),e.jsx("p",{className:"text-sm",children:S.timeline})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Message"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded-md mt-1",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:S.message})})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Submitted"}),e.jsx("p",{className:"text-sm",children:new Date(S.submittedAt).toLocaleString()})]})]}),e.jsx(de,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Status"}),e.jsxs(os,{value:S.status,onValueChange:s=>rs(S.id,s),children:[e.jsx(ls,{className:"mt-1",children:e.jsx(cs,{})}),e.jsxs(ds,{children:[e.jsx(K,{value:"new",children:"New"}),e.jsx(K,{value:"contacted",children:"Contacted"}),e.jsx(K,{value:"in-progress",children:"In Progress"}),e.jsx(K,{value:"completed",children:"Completed"}),e.jsx(K,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Notes"}),e.jsx(ms,{value:S.notes||"",onChange:s=>{ve(r=>r?{...r,notes:s.target.value}:null)},placeholder:"Add notes about this contact...",rows:3,className:"mt-1"}),e.jsx(g,{size:"sm",className:"mt-2",onClick:()=>rs(S.id,S.status,S.notes),children:"Save Notes"})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"Select a contact submission to view details"})})})]})]})}),e.jsx(q,{value:"seo",className:"space-y-6",children:e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"SEO Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and optimize your website for search engines"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"SEO Audit"}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Analyze your website's SEO performance and get recommendations"}),e.jsx(g,{onClick:()=>es(!0),className:"w-full",variant:"default",children:"Run SEO Audit"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Search Console"}),e.jsx("p",{className:"text-sm text-green-800 mb-3",children:"Submit your site to Google for better indexing"}),e.jsx(g,{onClick:()=>window.open("https://search.google.com/search-console","_blank"),className:"w-full",variant:"outline",children:"Open Search Console"})]})]}),e.jsx(de,{}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Oe,{})}),e.jsx(de,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"SEO Resources & Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground",children:"Site Files"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm",children:"Sitemap.xml"}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>window.open("/sitemap.xml","_blank"),children:"View"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm",children:"Robots.txt"}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>window.open("/robots.txt","_blank"),children:"View"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground",children:"External Tools"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(g,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://pagespeed.web.dev/","_blank"),children:"PageSpeed Insights"}),e.jsx(g,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://www.google.com/webmasters/tools/mobile-friendly/","_blank"),children:"Mobile-Friendly Test"}),e.jsx(g,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://schema.org/validator","_blank"),children:"Schema Validator"})]})]})]})]}),e.jsx(de,{}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"📈 SEO Tips for Better Rankings"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:"• Publish high-quality content regularly"}),e.jsx("li",{children:"• Optimize images with descriptive alt text"}),e.jsx("li",{children:"• Build backlinks from reputable websites"}),e.jsx("li",{children:"• Ensure fast loading times (under 3 seconds)"}),e.jsx("li",{children:"• Use relevant keywords naturally in content"}),e.jsx("li",{children:"• Keep meta descriptions under 160 characters"}),e.jsx("li",{children:"• Monitor your rankings weekly"})]})]})]})]})}),e.jsx(q,{value:"diagnostic",className:"space-y-6",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(js,{})})}),e.jsxs(q,{value:"settings",className:"space-y-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"System Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time service monitoring"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Email Service (Resend)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${H.emailService==="active"?"bg-green-500":H.emailService==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:H.emailService})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Database (Supabase)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${H.database==="active"?"bg-green-500":H.database==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:H.database})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Contact Form System"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${H.contactForm==="active"?"bg-green-500":H.contactForm==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:H.contactForm})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Newsletter System"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${H.newsletterSystem==="active"?"bg-green-500":H.newsletterSystem==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:H.newsletterSystem})]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(g,{variant:"outline",size:"sm",onClick:ke,disabled:c,children:c?"Checking...":"Check All Services"})})]})]}),e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Admin Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Account and security settings"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Admin Password Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Manage your admin password securely. All passwords are encrypted and stored safely in the database."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>G(!0),className:"w-full",children:"Change Password"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:"• Password is stored securely with encryption"}),e.jsx("p",{children:"• Session expires after 10 minutes of inactivity"}),e.jsx("p",{children:"• All password operations are server-side only"})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-900",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Response Rate:"}),e.jsxs("span",{className:"font-medium",children:[ae.responseRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg Response Time:"}),e.jsx("span",{className:"font-medium",children:ae.avgResponseTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Project Completion:"}),e.jsxs("span",{className:"font-medium",children:[ae.completionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Subscribers:"}),e.jsx("span",{className:"font-medium",children:Ce.length})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-green-900",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://hermankwayu.com","_blank"),children:"View Live Website"}),e.jsx(g,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://calendly.com/truthherman/30min","_blank"),children:"Open Calendly"}),e.jsx(g,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),children:"Supabase Dashboard"})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-purple-900",children:"Admin Tools"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{$e({}),t("Cache cleared successfully")},children:"Clear Cache"}),e.jsx(g,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{ke(!0)},children:"Force Refresh Data"}),e.jsx(g,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{t("Admin activity logged and ready for review")},children:"Export Activity Log"})]})]})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(fs,{}),e.jsx(Oe,{})]})]}),e.jsxs(q,{value:"diagnostic",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Production Health Monitor"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time system health and status monitoring"})]}),e.jsx(b,{children:e.jsx(St,{})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(w,{children:"Connection Diagnostic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network connectivity and API endpoint testing"})]}),e.jsx(b,{children:e.jsx(js,{})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(fs,{}),e.jsx(Oe,{})]})]})]})]})]}),ge&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60]",children:e.jsxs(j,{className:"w-full max-w-md mx-4",children:[e.jsx(v,{children:e.jsx(w,{className:"text-center text-yellow-600",children:"⚠️ Session Expiring"})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("p",{className:"text-center",children:["Your session will expire in ",Math.floor((se-(Date.now()-Y))/1e3/60)," minutes due to inactivity."]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{onClick:Ds,className:"flex-1",children:"Stay Logged In"}),e.jsx(g,{variant:"outline",onClick:()=>Ne(),className:"flex-1",children:"Logout Now"})]})]})]})}),fe&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60]",children:e.jsxs(j,{className:"w-full max-w-lg mx-4",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-center flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"🔒"}),e.jsx("span",{children:"Change Admin Password"})]}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Update your admin password securely"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(re,{id:"currentPassword",type:"password",value:A.currentPassword,onChange:s=>je(r=>({...r,currentPassword:s.target.value})),placeholder:"Enter your current password"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"newPassword",children:"New Password"}),e.jsx(re,{id:"newPassword",type:"password",value:A.newPassword,onChange:s=>je(r=>({...r,newPassword:s.target.value})),placeholder:"Enter new password (min. 8 characters)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Password must contain uppercase, lowercase, numbers, and special characters"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(re,{id:"confirmPassword",type:"password",value:A.confirmPassword,onChange:s=>je(r=>({...r,confirmPassword:s.target.value})),placeholder:"Confirm new password"})]})]}),e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"⚠️"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Security Notice:"}),e.jsx("p",{children:"You'll need to re-authenticate after changing your password. Keep your new credentials secure."})]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"💡"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Alternative Method:"}),e.jsx("p",{children:"For additional security, you can also request a password reset link via email:"}),e.jsx("div",{className:"mt-2",children:e.jsx(re,{type:"email",value:Z,onChange:s=>ee(s.target.value),placeholder:"truthherman@gmail.com",className:"text-sm"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx(g,{onClick:zs,disabled:c||!A.currentPassword||!A.newPassword||!A.confirmPassword,className:"w-full",children:c?"Updating...":"Change Password"}),e.jsx(g,{variant:"outline",onClick:Os,disabled:c||!Z,className:"w-full",children:c?"Sending...":"Email Reset Link"})]}),e.jsx(g,{variant:"ghost",onClick:()=>{G(!1),ee(""),je({currentPassword:"",newPassword:"",confirmPassword:""})},className:"w-full",children:"Cancel"})]})]})}),e.jsx(pt,{isVisible:Ps,onClose:()=>es(!1)})]}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[e.jsxs(j,{className:"w-full max-w-md",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"HK"})}),e.jsx("span",{children:"Admin Login"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to access admin dashboard"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"admin-password",children:"Admin Password"}),e.jsx(re,{id:"admin-password",type:"password",value:N,onChange:s=>o(s.target.value),onKeyDown:s=>s.key==="Enter"&&ts(),placeholder:"Enter admin password"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:e.jsxs("div",{className:`flex items-center space-x-2 ${I==="healthy"?"text-green-600":I==="degraded"?"text-yellow-600":"text-red-600"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${I==="healthy"?"bg-green-500":I==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{children:I==="healthy"?"Connection: Optimal":I==="degraded"?"Connection: Slow":"Connection: Issues"})]})}),l&&e.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm",children:l}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{onClick:ts,disabled:c,className:"flex-1",children:c?"Signing In...":"Sign In"}),e.jsx(g,{variant:"outline",onClick:p,children:"Cancel"})]}),e.jsx("div",{className:"pt-4 border-t text-center space-y-2",children:e.jsx("button",{onClick:()=>G(!0),className:"text-sm text-primary hover:underline block w-full",children:"Forgot your password?"})})]})]}),fe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:e.jsxs(j,{className:"w-full max-w-md",children:[e.jsxs(v,{children:[e.jsx(w,{children:"Password Reset"}),e.jsx("p",{className:"text-muted-foreground",children:"Request a password reset for admin access"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"reset-email",children:"Admin Email"}),e.jsx(re,{id:"reset-email",type:"email",value:Z,onChange:s=>ee(s.target.value),placeholder:"truthherman@gmail.com"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{onClick:async()=>{t("Password reset instructions have been sent to your email"),G(!1),ee("")},disabled:c||!Z,className:"flex-1",children:"Send Reset Link"}),e.jsx(g,{variant:"outline",onClick:()=>{G(!1),ee("")},children:"Cancel"})]})]})]})})]}):null}export{Dt as AdminDashboard};
