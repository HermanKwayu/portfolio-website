import{e as Y,r as c,j as e,C as p,b as g,c as f,d as j,f as M,g as _s,h as fs,n as Vs,R as re,B as w,q as ae,p as I,a as O,L as F,I as te,S as ls,s as os,t as cs,v as ds,w as X,T as us}from"./index-B60_ulEQ.js";import{U as qs,S as ce}from"./separator-Hcrri2YM.js";import{T as _e,a as Ve,b as z,D as Hs,c as q,C as be}from"./tabs-89k0aINe.js";import{E as Us}from"./eye-DkRACoMi.js";import{F as qe}from"./file-text-JrGLRnyq.js";import{G as Ws}from"./globe-D09f0gcv.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ae=Y("circle-alert",Gs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],De=Y("circle-x",Ks);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Pe=Y("clock",Xs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Js=Y("code",Ys);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Zs=Y("external-link",Qs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],st=Y("map",et);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ms=Y("monitor",tt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rt=Y("settings",at);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],it=Y("smartphone",nt);function lt({isVisible:n,onClose:v}){const[T,k]=c.useState([]),[l,A]=c.useState(0);c.useEffect(()=>{n&&N()},[n]);const N=()=>{const o=[],t=document.title;t&&t.length>=30&&t.length<=60?o.push({name:"Title Tag",status:"pass",message:`Good title length: ${t.length} characters`,priority:"high"}):o.push({name:"Title Tag",status:t?"warn":"fail",message:t?`Title length: ${t.length} chars (optimal: 30-60)`:"Missing title tag",priority:"high"});const u=document.querySelector('meta[name="description"]')?.getAttribute("content");u&&u.length>=120&&u.length<=160?o.push({name:"Meta Description",status:"pass",message:`Good description length: ${u.length} characters`,priority:"high"}):o.push({name:"Meta Description",status:u?"warn":"fail",message:u?`Description length: ${u.length} chars (optimal: 120-160)`:"Missing meta description",priority:"high"});const a=document.querySelectorAll("h1");a.length===1?o.push({name:"H1 Tag",status:"pass",message:"Exactly one H1 tag found",priority:"high"}):o.push({name:"H1 Tag",status:a.length===0?"fail":"warn",message:`Found ${a.length} H1 tags (optimal: 1)`,priority:"high"});const $=document.querySelectorAll('script[type="application/ld+json"]');o.push({name:"Structured Data",status:$.length>0?"pass":"fail",message:`Found ${$.length} structured data scripts`,priority:"medium"});const h=document.querySelectorAll('meta[property^="og:"]');o.push({name:"Open Graph Tags",status:h.length>=4?"pass":"warn",message:`Found ${h.length} Open Graph tags`,priority:"medium"});const H=document.querySelectorAll('meta[name^="twitter:"]');o.push({name:"Twitter Cards",status:H.length>=3?"pass":"warn",message:`Found ${H.length} Twitter Card tags`,priority:"medium"});const L=document.querySelector('link[rel="canonical"]');o.push({name:"Canonical URL",status:L?"pass":"warn",message:L?"Canonical URL found":"Missing canonical URL",priority:"medium"});const E=document.querySelector('link[rel="sitemap"]');o.push({name:"Sitemap",status:E?"pass":"warn",message:E?"Sitemap linked":"Sitemap not linked in head",priority:"low"});const J=document.querySelector('meta[name="robots"]');o.push({name:"Robots Meta",status:J?"pass":"warn",message:J?`Robots directive: ${J.getAttribute("content")}`:"Missing robots meta tag",priority:"medium"});const me=document.querySelectorAll("img"),ne=Array.from(me).filter(R=>!R.getAttribute("alt"));o.push({name:"Image Alt Tags",status:ne.length===0?"pass":"warn",message:`${me.length-ne.length}/${me.length} images have alt tags`,priority:"medium"}),o.push({name:"HTTPS",status:location.protocol==="https:"?"pass":"fail",message:location.protocol==="https:"?"Site uses HTTPS":"Site should use HTTPS",priority:"high"});const he=document.querySelector('meta[name="viewport"]');o.push({name:"Mobile Viewport",status:he?"pass":"fail",message:he?"Viewport meta tag found":"Missing viewport meta tag",priority:"high"});const W=o.filter(R=>R.status==="pass").length,Q=o.length,Z=Math.round(W/Q*100);k(o),A(Z)},d=o=>{switch(o){case"pass":return"bg-green-100 text-green-800 border-green-200";case"warn":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fail":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=o=>{switch(o){case"high":return"bg-red-50 border-red-200";case"medium":return"bg-yellow-50 border-yellow-200";case"low":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"SEO Audit Report"}),e.jsx("p",{className:"text-muted-foreground",children:"Your website's search engine optimization analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold ${l>=80?"text-green-600":l>=60?"text-yellow-600":"text-red-600"}`,children:[l,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"SEO Score"})]}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Close"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(p,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(f,{className:"text-sm text-green-700",children:"Passed"})}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.filter(o=>o.status==="pass").length})})]}),e.jsxs(p,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(f,{className:"text-sm text-yellow-700",children:"Warnings"})}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:T.filter(o=>o.status==="warn").length})})]}),e.jsxs(p,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(f,{className:"text-sm text-red-700",children:"Failed"})}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:T.filter(o=>o.status==="fail").length})})]})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(f,{children:"Detailed Analysis"})}),e.jsx(j,{children:e.jsx("div",{className:"space-y-3",children:T.map((o,t)=>e.jsx("div",{className:`p-4 rounded-lg border ${i(o.priority)}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-medium",children:o.name}),e.jsx(M,{className:`text-xs ${d(o.status)}`,children:o.status.toUpperCase()}),e.jsxs(M,{variant:"outline",className:"text-xs",children:[o.priority.toUpperCase()," PRIORITY"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.message})]})})},t))})})]}),e.jsxs(p,{className:"mt-6",children:[e.jsx(g,{children:e.jsx(f,{children:"SEO Recommendations"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Next Steps for Better Rankings:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-blue-800 list-disc list-inside",children:[e.jsx("li",{children:"Submit your sitemap to Google Search Console"}),e.jsx("li",{children:"Set up Google Analytics for traffic monitoring"}),e.jsx("li",{children:"Create high-quality content regularly"}),e.jsx("li",{children:"Build backlinks from reputable websites"}),e.jsx("li",{children:"Monitor your site's performance weekly"})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Search Console Setup:"}),e.jsxs("p",{className:"text-green-800 mt-1",children:["Add your site to Google Search Console and submit your sitemap URL:",e.jsx("code",{className:"bg-white px-2 py-1 rounded ml-2",children:"https://www.hermankwayu.com/sitemap.xml"})]})]})]})})]})]})]})}):null}var He="Progress",Ue=100,[ot,St]=_s(He),[ct,dt]=ot(He),js=c.forwardRef((n,v)=>{const{__scopeProgress:T,value:k=null,max:l,getValueLabel:A=ut,...N}=n;(l||l===0)&&!hs(l)&&console.error(mt(`${l}`,"Progress"));const d=hs(l)?l:Ue;k!==null&&!xs(k,d)&&console.error(ht(`${k}`,"Progress"));const i=xs(k,d)?k:null,o=$e(i)?A(i,d):void 0;return e.jsx(ct,{scope:T,value:i,max:d,children:e.jsx(fs.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":$e(i)?i:void 0,"aria-valuetext":o,role:"progressbar","data-state":bs(i,d),"data-value":i??void 0,"data-max":d,...N,ref:v})})});js.displayName=He;var ws="ProgressIndicator",vs=c.forwardRef((n,v)=>{const{__scopeProgress:T,...k}=n,l=dt(ws,T);return e.jsx(fs.div,{"data-state":bs(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...k,ref:v})});vs.displayName=ws;function ut(n,v){return`${Math.round(n/v*100)}%`}function bs(n,v){return n==null?"indeterminate":n===v?"complete":"loading"}function $e(n){return typeof n=="number"}function hs(n){return $e(n)&&!isNaN(n)&&n>0}function xs(n,v){return $e(n)&&!isNaN(n)&&n<=v&&n>=0}function mt(n,v){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${v}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ue}\`.`}function ht(n,v){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${v}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ue} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var xt=js,pt=vs;function ve({className:n,value:v,...T}){return e.jsx(xt,{"data-slot":"progress",className:Vs("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",n),...T,children:e.jsx(pt,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(v||0)}%)`}})})}function gt(){const[n,v]=c.useState(null),[T,k]=c.useState(!0),[l,A]=c.useState("7d"),[N,d]=c.useState(new Date),i=async()=>{k(!0);try{const a=localStorage.getItem("admin_token");if(!a){console.warn("No admin token found - using mock data");const h=t();v(h),d(new Date);return}const $=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/analytics`,{method:"GET",headers:{Authorization:`Bearer ${O}`,"X-Admin-Token":a,"Content-Type":"application/json"}});if($.ok){const{data:h}=await $.json(),H={totalVisitors:h.uniqueSessions,totalPageViews:h.totalEvents,resumeBuilderVisits:h.conversionFunnel.resumeBuilderVisitors,resumesCreated:h.conversionFunnel.resumeCreators,resumesDownloaded:h.conversionFunnel.resumeDownloaders,averageSessionDuration:180,bounceRate:35,topPages:[{path:"/",views:Math.floor(h.uniqueSessions*.8),title:"Home"},{path:"/resume-builder",views:h.conversionFunnel.resumeBuilderVisitors,title:"Resume Builder"}],trafficSources:Object.entries(h.trafficSources||{}).map(([L,E])=>({source:L,visitors:E,percentage:Math.round(E/h.uniqueSessions*100)})),deviceTypes:[{type:"Desktop",count:Math.floor(h.uniqueSessions*.6),percentage:60},{type:"Mobile",count:Math.floor(h.uniqueSessions*.3),percentage:30},{type:"Tablet",count:Math.floor(h.uniqueSessions*.1),percentage:10}],resumeTemplateStats:Object.entries(h.templateStats||{}).map(([L,E])=>({templateId:L,templateName:o(L),created:E,downloaded:Math.floor(E*.6),conversionRate:60})),conversionFunnel:{visitors:h.conversionFunnel.totalVisitors,builderVisitors:h.conversionFunnel.resumeBuilderVisitors,creators:h.conversionFunnel.resumeCreators,downloaders:h.conversionFunnel.resumeDownloaders,rates:{visitorToBuilder:h.conversionFunnel.conversionRates.visitorToBuilder,builderToCreator:h.conversionFunnel.conversionRates.builderToCreator,creatorToDownloader:h.conversionFunnel.conversionRates.creatorToDownloader,visitorToDownloader:h.conversionFunnel.conversionRates.visitorToDownloader}},recentEvents:h.recentEvents.map(L=>({event:L.event,timestamp:L.timestamp,properties:L.properties||{}}))};v(H),d(new Date)}else{console.warn("Failed to fetch analytics - using mock data");const h=t();v(h),d(new Date)}}catch(a){console.error("Failed to fetch analytics:",a);const $=t();v($),d(new Date)}finally{k(!1)}},o=a=>({modern:"Modern Professional",creative:"Creative Designer",executive:"Executive Classic",minimal:"Minimal Clean"})[a]||a;c.useEffect(()=>{i();const a=setInterval(i,300*1e3);return()=>clearInterval(a)},[l]);const t=()=>{const a=l==="24h"?50:l==="7d"?350:l==="30d"?1200:3500;return{totalVisitors:a+Math.floor(Math.random()*100),totalPageViews:Math.floor(a*2.3)+Math.floor(Math.random()*200),resumeBuilderVisits:Math.floor(a*.35)+Math.floor(Math.random()*50),resumesCreated:Math.floor(a*.15)+Math.floor(Math.random()*30),resumesDownloaded:Math.floor(a*.08)+Math.floor(Math.random()*20),averageSessionDuration:180+Math.floor(Math.random()*120),bounceRate:35+Math.floor(Math.random()*20),topPages:[{path:"/",views:Math.floor(a*.6),title:"Home"},{path:"/#about",views:Math.floor(a*.4),title:"About"},{path:"/resume-builder",views:Math.floor(a*.35),title:"Resume Builder"},{path:"/#services",views:Math.floor(a*.3),title:"Services"},{path:"/#contact",views:Math.floor(a*.25),title:"Contact"}],trafficSources:[{source:"Direct",visitors:Math.floor(a*.4),percentage:40},{source:"Google",visitors:Math.floor(a*.35),percentage:35},{source:"LinkedIn",visitors:Math.floor(a*.15),percentage:15},{source:"Referral",visitors:Math.floor(a*.1),percentage:10}],deviceTypes:[{type:"Desktop",count:Math.floor(a*.55),percentage:55},{type:"Mobile",count:Math.floor(a*.35),percentage:35},{type:"Tablet",count:Math.floor(a*.1),percentage:10}],resumeTemplateStats:[{templateId:"modern",templateName:"Modern Professional",created:Math.floor(a*.06),downloaded:Math.floor(a*.03),conversionRate:50},{templateId:"classic",templateName:"Classic Executive",created:Math.floor(a*.04),downloaded:Math.floor(a*.025),conversionRate:62.5},{templateId:"creative",templateName:"Creative Designer",created:Math.floor(a*.03),downloaded:Math.floor(a*.015),conversionRate:50},{templateId:"minimal",templateName:"Minimal Clean",created:Math.floor(a*.02),downloaded:Math.floor(a*.01),conversionRate:50}],conversionFunnel:{visitors:a,builderVisitors:Math.floor(a*.35),creators:Math.floor(a*.15),downloaders:Math.floor(a*.08),rates:{visitorToBuilder:35,builderToCreator:42.8,creatorToDownloader:53.3,visitorToDownloader:8}},recentEvents:[{event:"resume_downloaded",timestamp:Date.now()-5e3,properties:{templateId:"modern"}},{event:"resume_created",timestamp:Date.now()-15e3,properties:{templateId:"classic"}},{event:"resume_builder_visited",timestamp:Date.now()-3e4,properties:{source:"google"}},{event:"page_view",timestamp:Date.now()-45e3,properties:{page:"/"}},{event:"contact_form_submitted",timestamp:Date.now()-6e4,properties:{success:!0}}]}},u=a=>new Date(a).toLocaleTimeString();return T||!n?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(re,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Loading analytics data..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Website Analytics"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",N.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{value:l,onValueChange:a=>A(a),children:e.jsxs(Ve,{children:[e.jsx(z,{value:"24h",children:"24h"}),e.jsx(z,{value:"7d",children:"7d"}),e.jsx(z,{value:"30d",children:"30d"}),e.jsx(z,{value:"90d",children:"90d"})]})}),e.jsxs(w,{onClick:i,variant:"outline",size:"sm",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(p,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Total Visitors"}),e.jsx(qs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.totalVisitors.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique visitors"})]})]}),e.jsxs(p,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Resume Builder Visits"}),e.jsx(Us,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumeBuilderVisits.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumeBuilderVisits/n.totalVisitors*100).toFixed(1),"% of visitors"]})]})]}),e.jsxs(p,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Resumes Created"}),e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumesCreated.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumesCreated/n.resumeBuilderVisits*100).toFixed(1),"% conversion"]})]})]}),e.jsxs(p,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Resumes Downloaded"}),e.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumesDownloaded.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumesDownloaded/n.resumesCreated*100).toFixed(1),"% of created"]})]})]})]}),e.jsxs(_e,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Ve,{children:[e.jsx(z,{value:"overview",children:"Overview"}),e.jsx(z,{value:"resume-funnel",children:"Resume Funnel"}),e.jsx(z,{value:"traffic",children:"Traffic Sources"}),e.jsx(z,{value:"devices",children:"Devices"})]}),e.jsx(q,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Resume Builder Conversion Funnel"}),e.jsx(ae,{children:"User journey through resume creation process"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Website Visitors"}),e.jsx("span",{className:"font-bold",children:n.conversionFunnel.visitors.toLocaleString()})]}),e.jsx(ve,{value:100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Builder Visitors"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.builderVisitors.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.visitorToBuilder.toFixed(1),"%)"]})]})]}),e.jsx(ve,{value:n.conversionFunnel.rates.visitorToBuilder,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Creators"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.creators.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.builderToCreator.toFixed(1),"%)"]})]})]}),e.jsx(ve,{value:n.conversionFunnel.rates.builderToCreator,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Downloaders"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.downloaders.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.creatorToDownloader.toFixed(1),"%)"]})]})]}),e.jsx(ve,{value:n.conversionFunnel.rates.creatorToDownloader,className:"h-2"})]}),e.jsx(ce,{}),e.jsxs("div",{className:"bg-primary/5 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-primary",children:"Overall Conversion"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:[n.conversionFunnel.rates.visitorToDownloader.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Visitors who download resumes"})]})]})]}),e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Most Visited Pages"}),e.jsx(ae,{children:"Popular pages and sections"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-3",children:n.topPages.map((a,$)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",className:"w-6 h-6 p-0 flex items-center justify-center text-xs",children:$+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:a.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.path})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-sm",children:a.views.toLocaleString()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"views"})]})]},a.path))})})]})]})}),e.jsx(q,{value:"resume-funnel",className:"space-y-4",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Resume Template Performance"}),e.jsx(ae,{children:"Creation and download rates by template"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:n.resumeTemplateStats.map(a=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.templateName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",a.templateId]})]}),e.jsxs(M,{variant:"secondary",children:[a.conversionRate.toFixed(1),"% conversion"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Created"}),e.jsx("div",{className:"font-bold text-lg",children:a.created})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Downloaded"}),e.jsx("div",{className:"font-bold text-lg",children:a.downloaded})]})]}),e.jsx(ve,{value:a.conversionRate,className:"h-2 mt-2"})]},a.templateId))})})]})}),e.jsx(q,{value:"traffic",className:"space-y-4",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Traffic Sources"}),e.jsx(ae,{children:"How visitors find your website"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:n.trafficSources.map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ws,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:a.source})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:a.visitors.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.percentage,"%"]})]})]},a.source))})})]})}),e.jsx(q,{value:"devices",className:"space-y-4",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Device Types"}),e.jsx(ae,{children:"Visitor device breakdown"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:n.deviceTypes.map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a.type==="Desktop"&&e.jsx(ms,{className:"w-4 h-4 text-muted-foreground"}),a.type==="Mobile"&&e.jsx(it,{className:"w-4 h-4 text-muted-foreground"}),a.type==="Tablet"&&e.jsx(ms,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:a.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:a.count.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.percentage,"%"]})]})]},a.type))})})]})})]}),e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Recent Activity"}),e.jsx(ae,{children:"Live user actions on your website"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-2",children:n.recentEvents.map((a,$)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{variant:"outline",className:"text-xs",children:a.event.replace("_"," ")}),e.jsx("span",{className:"text-sm text-muted-foreground",children:u(a.timestamp)})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.properties.templateId&&`Template: ${a.properties.templateId}`,a.properties.page&&`Page: ${a.properties.page}`,a.properties.source&&`Source: ${a.properties.source}`]})]},$))})})]})]})}function Ce(){const[n,v]=c.useState([{url:"/sitemap.xml",name:"Sitemap",status:"checking"},{url:"/robots.txt",name:"Robots.txt",status:"checking"},{url:"/manifest.json",name:"Manifest",status:"checking"},{url:"/sw.js",name:"Service Worker",status:"checking"}]),[T,k]=c.useState(!1),l=async()=>{k(!0);const d=await Promise.all(n.map(async i=>{try{let o=await fetch(i.url,{method:"HEAD"});return o.ok||(o=await fetch(i.url,{method:"GET",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}})),{...i,status:o.ok?"success":"error",statusCode:o.status,contentType:o.headers.get("content-type")||void 0}}catch(o){return console.error(`Error checking ${i.name}:`,o),{...i,status:"error",statusCode:0}}}));v(d),k(!1)};c.useEffect(()=>{l()},[]);const A=d=>{switch(d){case"success":return e.jsx(be,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(De,{className:"w-5 h-5 text-red-500"});case"checking":return e.jsx(Ae,{className:"w-5 h-5 text-yellow-500 animate-pulse"})}},N=d=>d.status==="checking"?"Checking...":d.status==="success"?`✅ ${d.statusCode} - ${d.contentType||"Unknown content type"}`:`❌ ${d.statusCode||"Network Error"}`;return e.jsxs(p,{className:"w-full max-w-md",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Static Files Status"]}),e.jsx(ae,{children:"Check if sitemap.xml and robots.txt are accessible"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3",children:[n.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[A(d.status),e.jsx("span",{className:"font-medium",children:d.name})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:N(d)})]},d.url)),e.jsx(w,{onClick:l,disabled:T,className:"w-full mt-4",variant:"outline",children:T?"Checking...":"Recheck Files"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-4 p-2 bg-muted rounded",children:[e.jsx("strong",{children:"Quick Test URLs:"}),e.jsxs("div",{className:"mt-1 space-y-1",children:[e.jsxs("div",{children:["• ",e.jsx("a",{href:"/sitemap.xml",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/sitemap.xml"})]}),e.jsxs("div",{children:["• ",e.jsx("a",{href:"/robots.txt",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/robots.txt"})]}),e.jsxs("div",{children:["• ",e.jsx("a",{href:"/manifest.json",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/manifest.json"})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[e.jsx("strong",{children:"Deployment Info:"}),e.jsxs("div",{className:"mt-1",children:["Environment: ","production"]}),e.jsxs("div",{children:["Current URL: ",window.location.origin]})]})]})]})})]})}function Oe(){const[n,v]=c.useState([{url:"/sitemap.xml",name:"Sitemap XML",icon:e.jsx(st,{className:"w-4 h-4"}),status:"pending"},{url:"/robots.txt",name:"Robots.txt",icon:e.jsx(qe,{className:"w-4 h-4"}),status:"pending"},{url:"/manifest.json",name:"Web Manifest",icon:e.jsx(rt,{className:"w-4 h-4"}),status:"pending"},{url:"/sw.js",name:"Service Worker",icon:e.jsx(Js,{className:"w-4 h-4"}),status:"pending"}]),[T,k]=c.useState(!1),l=async()=>{k(!0);const i=await Promise.all(n.map(async o=>{try{const t=`${o.url}?_t=${Date.now()}`,u=await fetch(t,{method:"GET",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});let a="",$=0;if(u.ok){const h=await u.text();a=h.slice(0,200),$=h.length}return{...o,status:u.ok?"success":"error",statusCode:u.status,contentType:u.headers.get("content-type")||"Unknown",size:$,content:a,error:u.ok?void 0:`HTTP ${u.status}: ${u.statusText}`}}catch(t){return{...o,status:"error",statusCode:0,error:t instanceof Error?t.message:"Network error"}}}));v(i),k(!1)},A=i=>{switch(i){case"success":return e.jsx(be,{className:"w-4 h-4 text-green-500"});case"error":return e.jsx(De,{className:"w-4 h-4 text-red-500"});default:return e.jsx(re,{className:"w-4 h-4 text-gray-400"})}},N=i=>i.status==="success"?e.jsxs(M,{variant:"default",className:"bg-green-100 text-green-800 border-green-200",children:[i.statusCode," OK"]}):i.status==="error"?e.jsx(M,{variant:"destructive",children:i.statusCode||"ERROR"}):e.jsx(M,{variant:"secondary",children:"Pending"}),d=i=>i?i<1024?`${i}B`:i<1024*1024?`${(i/1024).toFixed(1)}KB`:`${(i/(1024*1024)).toFixed(1)}MB`:"";return e.jsxs(p,{className:"w-full",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"Static File Validator"]}),e.jsx(ae,{children:"Validate that all static files are properly served with correct headers"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{onClick:l,disabled:T,className:"w-full",variant:"outline",children:T?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2 animate-spin"}),"Validating Files..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Validate All Files"]})}),e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.icon,e.jsx("span",{className:"font-medium",children:i.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N(i),A(i.status)]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["URL: ",i.url]}),e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary hover:underline",children:["Test ",e.jsx(Zs,{className:"w-3 h-3"})]})]}),i.contentType&&e.jsxs("div",{children:["Content-Type: ",i.contentType]}),i.size!==void 0&&e.jsxs("div",{children:["Size: ",d(i.size)]}),i.error&&e.jsxs("div",{className:"text-red-600",children:["Error: ",i.error]})]}),i.content&&i.status==="success"&&e.jsxs("details",{className:"text-xs",children:[e.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:"Show Content Preview"}),e.jsxs("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-x-auto",children:[i.content,i.size&&i.size>200&&"..."]})]})]},i.url))}),e.jsxs("div",{className:"text-xs text-muted-foreground p-3 bg-muted rounded",children:[e.jsx("strong",{children:"Troubleshooting Tips:"}),e.jsxs("ul",{className:"mt-1 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:["Ensure files exist in the ",e.jsx("code",{children:"/public"})," directory"]}),e.jsx("li",{children:"Check deployment platform configuration (Netlify/Vercel)"}),e.jsx("li",{children:"Verify build process copies static files correctly"}),e.jsxs("li",{children:["Test locally with ",e.jsx("code",{children:"npm run preview"})]})]})]})]})})]})}function ft(){const[n,v]=c.useState([{url:"/sitemap.xml",name:"Sitemap",status:"loading"},{url:"/robots.txt",name:"Robots.txt",status:"loading"},{url:"/manifest.json",name:"Manifest",status:"loading"},{url:"/sw.js",name:"Service Worker",status:"loading"}]),[T,k]=c.useState(!1),l=async t=>{try{const u=await fetch(t.url,{method:"HEAD",cache:"no-cache"});return{...t,status:u.ok?"success":"error",statusCode:u.status,contentType:u.headers.get("content-type")||void 0,error:u.ok?void 0:`HTTP ${u.status}`}}catch(u){return{...t,status:"error",error:u instanceof Error?u.message:"Network error"}}},A=async()=>{k(!0);const t=n.map(l),u=await Promise.all(t);v(u),k(!1)};c.useEffect(()=>{A()},[]);const N=t=>{switch(t){case"success":return e.jsx(be,{className:"w-4 h-4 text-green-500"});case"error":return e.jsx(De,{className:"w-4 h-4 text-red-500"});default:return e.jsx(Pe,{className:"w-4 h-4 text-yellow-500 animate-spin"})}},d=t=>t.status==="success"?e.jsxs(M,{variant:"default",className:"bg-green-100 text-green-800",children:["✅ ",t.statusCode]}):t.status==="error"?e.jsxs(M,{variant:"destructive",children:["❌ ",t.error]}):e.jsx(M,{variant:"secondary",children:"⏳ Checking..."}),i=n.every(t=>t.status==="success"),o=n.some(t=>t.status==="error");return e.jsxs(p,{className:"w-full max-w-2xl mx-auto",children:[e.jsx(g,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[T?e.jsx(re,{className:"w-5 h-5 animate-spin"}):i?e.jsx(be,{className:"w-5 h-5 text-green-500"}):o?e.jsx(De,{className:"w-5 h-5 text-red-500"}):e.jsx(Pe,{className:"w-5 h-5 text-yellow-500"}),"Static Files Status"]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsx("div",{className:"grid gap-3",children:n.map((t,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[N(t.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.url}),t.contentType&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Content-Type: ",t.contentType]})]})]}),d(t)]},u))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:i?"🎉 All static files are accessible!":o?"⚠️ Some files have issues - check Vercel deployment":"⏳ Checking file accessibility..."}),e.jsx(w,{onClick:A,disabled:T,variant:"outline",size:"sm",children:T?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Recheck"]})})]}),i&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"✅ Perfect!"})," All static files are working correctly. You can now submit your sitemap to Google Search Console:",e.jsx("br",{}),e.jsx("code",{className:"mt-1 block bg-white px-2 py-1 rounded",children:"https://www.hermankwayu.com/sitemap.xml"})]})}),o&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"❌ Issues Found:"})," Some static files are not accessible. This usually means Vercel deployment needs to be redeployed.",e.jsx("br",{}),e.jsx("strong",{children:"Solution:"})," Push any change to trigger a new deployment."]})})]})]})}function ps(){const[n,v]=c.useState(!1),[T,k]=c.useState([]),l=N=>{k(d=>[...d,`${new Date().toLocaleTimeString()}: ${N}`])},A=async()=>{v(!0),k([]),l("🔍 Starting connection diagnostic..."),l("📡 Testing basic network connectivity...");try{const t=await fetch("https://www.google.com",{method:"HEAD",mode:"no-cors"});l("✅ Basic internet connectivity: OK")}catch(t){l("❌ Basic internet connectivity: FAILED"),l(`   Error: ${t}`)}const N=`https://${I}.supabase.co`;l(`🔗 Testing Supabase project URL: ${N}`);try{const t=await fetch(N,{method:"HEAD",mode:"cors"});l(`✅ Supabase project reachable: ${t.status} ${t.statusText}`)}catch(t){l("❌ Supabase project unreachable"),l(`   Error: ${t}`)}const d=`https://${I}.supabase.co/functions/v1`;l(`⚙️ Testing Edge Functions endpoint: ${d}`);try{const t=await fetch(d,{method:"HEAD",mode:"cors",headers:{Authorization:`Bearer ${O}`}});l(`✅ Edge Functions endpoint reachable: ${t.status} ${t.statusText}`)}catch(t){l("❌ Edge Functions endpoint unreachable"),l(`   Error: ${t}`)}const i=`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/debug/password`;l(`🔐 Testing password format: ${i}`);try{const t=await fetch(i,{method:"GET",mode:"cors",headers:{Authorization:`Bearer ${O}`}});if(t.ok){const u=await t.json();l(`✅ Expected password: "${u.expected}" (length: ${u.length})`),l(`   Password char codes: ${u.charCodes.map(a=>`${a.char}:${a.code}`).join(" ")}`)}else l(`⚠️ Debug endpoint returned: ${t.status}`)}catch(t){l("❌ Debug endpoint unreachable"),l(`   Error: ${t}`)}const o=`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/authenticate`;l(`🔐 Testing admin auth endpoint: ${o}`);try{const u=await fetch(o,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({password:"HermanAdmin2024!"})});if(l(`✅ Admin endpoint reachable: ${u.status} ${u.statusText}`),u.ok){const a=await u.json();l("✅ Authentication successful with correct password!")}else if(u.status===401){l("❌ Authentication failed - password mismatch detected");const a=await u.json();a.debug&&l(`   Debug info: received="${a.debug.received}" vs expected="${a.debug.expected}"`)}}catch(t){l("❌ Admin endpoint unreachable"),l(`   Error: ${t}`)}l("🔧 Checking environment variables..."),l("   Project ID: ✅ Set"),l("   Public Key: ✅ Set"),l("🌐 Checking browser environment..."),l(`   Navigator online: ${navigator.onLine?"✅ Online":"❌ Offline"}`),l(`   User Agent: ${navigator.userAgent.substring(0,50)}...`),l("🏁 Diagnostic complete!"),v(!1)};return e.jsxs(p,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(g,{children:[e.jsx(f,{children:"🔍 Connection Diagnostic Tool"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This tool helps diagnose connectivity issues with the Supabase backend."})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsx(w,{onClick:A,disabled:n,className:"w-full",children:n?"Running Diagnostic...":"Run Connection Test"}),T.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Diagnostic Results:"}),e.jsx("div",{className:"space-y-1 text-sm font-mono max-h-80 overflow-y-auto",children:T.map((N,d)=>e.jsx("div",{className:"whitespace-pre-wrap",children:N},d))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-sm",children:[e.jsx("strong",{children:"💡 Common Issues:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[e.jsx("li",{children:"• If Supabase project is unreachable: Check if your Supabase project is active"}),e.jsx("li",{children:"• If Edge Functions fail: Ensure the make-server-4d80a1b0 function is deployed"}),e.jsx("li",{children:"• If CORS errors occur: Check Supabase project settings"}),e.jsx("li",{children:"• If network fails: Check firewall/proxy settings"})]})]})]})]})}function gs(){const[n,v]=c.useState({overall:"healthy",details:[]}),[T,k]=c.useState(!1),[l,A]=c.useState(!1),N=()=>{const t=[];let u=!1;try{t.push("Production mode"),typeof window<"u"?t.push("Browser environment detected"):t.push("Server environment detected"),typeof fetch<"u"?t.push("Fetch API available"):(t.push("Fetch API unavailable"),u=!0);try{typeof window<"u"&&window.localStorage?t.push("Local storage available"):(t.push("Local storage unavailable"),u=!0)}catch{t.push("Local storage check failed"),u=!0}}catch{t.push("Environment check failed"),u=!0}return{overall:u?"warning":"healthy",details:t}};c.useEffect(()=>{let t=!1;try{t=!1}catch{}if(!t&&typeof window<"u")try{t=new URLSearchParams(window.location.search).has("health-check")}catch{}k(t),t&&d()},[]);const d=()=>{A(!0),setTimeout(()=>{const t=N();v(t),A(!1)},500)},i=(t,u)=>{if(u)return e.jsx(Pe,{className:"h-4 w-4 text-blue-500 animate-spin"});switch(t){case"healthy":return e.jsx(be,{className:"h-4 w-4 text-green-500"});case"warning":return e.jsx(Ae,{className:"h-4 w-4 text-yellow-500"});case"error":return e.jsx(Ae,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Pe,{className:"h-4 w-4 text-blue-500"})}},o=(t,u)=>{if(u)return e.jsx(M,{variant:"outline",children:"Checking..."});switch(t){case"healthy":return e.jsx(M,{variant:"default",className:"bg-green-500",children:"Healthy"});case"warning":return e.jsx(M,{variant:"secondary",className:"bg-yellow-500 text-white",children:"Warning"});case"error":return e.jsx(M,{variant:"destructive",children:"Error"});default:return e.jsx(M,{variant:"outline",children:"Unknown"})}};return T?e.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:e.jsxs(p,{className:"shadow-lg border-2",children:[e.jsx(g,{className:"pb-3",children:e.jsxs(f,{className:"flex items-center gap-2 text-sm",children:[i(n.overall,l),"Health Check",e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>k(!1),className:"ml-auto h-6 w-6 p-0",children:"×"})]})}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Overall Status"}),o(n.overall,l)]}),n.details.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Details:"}),n.details.map((t,u)=>e.jsxs("div",{className:"text-xs text-muted-foreground",children:["• ",t]},u))]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx(w,{variant:"outline",size:"sm",onClick:d,disabled:l,className:"w-full",children:l?"Checking...":"Refresh Check"})})]})]})}):null}function Tt({isVisible:n,onClose:v}){const T={"weekly-update":{subject:"Weekly Business Insights from Herman Kwayu",content:`Hello [Subscriber],

I hope this message finds you well! Here are this week's key insights and updates from the world of business strategy and digital transformation:

🎯 **This Week's Focus: [Main Topic]**
[Write your main content here about current business trends, insights, or updates]

💡 **Quick Tip**
[Share a practical tip that subscribers can implement immediately]

📈 **Resource Recommendation**
I came across [resource/tool/article] that I think you'd find valuable for [specific use case].

🔗 **What I'm Working On**
[Brief update about your current projects or services]

That's all for this week! I'd love to hear your thoughts on [relevant question or topic].

Best regards,
Herman Kwayu

P.S. Got questions about digital transformation or business strategy? Just hit reply - I read every message personally.`,previewText:"Weekly insights on business strategy and digital transformation"},"monthly-deep-dive":{subject:"Monthly Deep Dive: [Topic] - Herman Kwayu Consulting",content:`Dear Business Leader,

This month, I want to dive deep into [specific topic] and how it's reshaping the business landscape.

📊 **The Current State**
[Detailed analysis of the topic and current trends]

🔍 **Why This Matters for Your Business**
[Specific implications and opportunities for subscribers]

✅ **Actionable Steps You Can Take Today**
1. [First actionable step]
2. [Second actionable step]
3. [Third actionable step]

🎯 **Case Study: Real Results**
[Brief case study or example showing practical application]

🚀 **Looking Ahead**
[Future predictions or trends to watch]

---

**Ready to Transform Your Business?**
If you're looking to implement these strategies in your organization, I'd love to discuss how we can work together. Schedule a free consultation at [your calendly link].

Best regards,
Herman Kwayu
Digital Strategy & Process Optimization Expert`,previewText:"Deep dive analysis and actionable insights for business leaders"},"service-announcement":{subject:"🚀 New Service Launch: [Service Name]",content:`Hello [Subscriber],

I'm excited to share something I've been working on that I believe will make a significant impact on your business growth.

🎉 **Introducing: [New Service Name]**
[Description of the new service and what it offers]

💼 **Who This Is Perfect For:**
• [Target audience 1]
• [Target audience 2]
• [Target audience 3]

✨ **What You Can Expect:**
• [Benefit 1]
• [Benefit 2]
• [Benefit 3]

📈 **Early Results**
[Share any early results or testimonials if available]

🎁 **Special Launch Offer**
As a valued newsletter subscriber, you get [special offer details].

Ready to learn more? [Call-to-action button/link]

Questions? Simply reply to this email - I personally respond to every inquiry.

Best regards,
Herman Kwayu`,previewText:"Exciting new service announcement with exclusive subscriber benefits"},"insights-sharing":{subject:"Lessons from the Field: [Specific Insight]",content:`Hi there,

I just finished working with a client on [type of project], and I wanted to share some insights that might be valuable for your business too.

🎯 **The Challenge**
[Describe the challenge or problem]

💡 **The Approach**
[Explain the strategy or solution implemented]

📊 **The Results**
[Share the outcomes and impact]

🔑 **Key Takeaways for You:**
• [Takeaway 1]
• [Takeaway 2]  
• [Takeaway 3]

This experience reinforced something I've seen time and again: [key principle or lesson].

**How does this apply to your business?** [Ask a thought-provoking question]

I'd love to hear your thoughts on this. Hit reply and let me know if you've faced similar challenges.

Cheers,
Herman Kwayu

P.S. If you're dealing with similar challenges, let's chat. I offer complimentary strategy calls to help you identify opportunities in your business.`,previewText:"Real-world insights from recent client work and practical lessons"}},[k,l]=c.useState(""),[A,N]=c.useState(!1),[d,i]=c.useState(!1),[o,t]=c.useState(null),[u,a]=c.useState(null),[$,h]=c.useState({current:0,total:0,currentTask:""}),[H,L]=c.useState(Date.now()),[E,J]=c.useState(null),[me,ne]=c.useState(!1),[he,W]=c.useState(!1),[Q,Z]=c.useState(""),[R,xe]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),K=600*1e3,Re=120*1e3,[ye,pe]=c.useState([]),[We,ge]=c.useState([]),[ee,de]=c.useState({subject:"",content:"",previewText:""}),[Ge,Ee]=c.useState(""),[ie,le]=c.useState([]),[D,fe]=c.useState(null),[_,V]=c.useState({emailService:"checking",database:"checking",contactForm:"checking",newsletterSystem:"checking"}),[se,ys]=c.useState({totalContacts:0,newContacts:0,responseRate:0,avgResponseTime:"0 hours",completionRate:0}),[Fe,Ne]=c.useState({}),[ke,Ns]=c.useState(null),[Ie,Ke]=c.useState(0),[Xe,Ye]=c.useState(null),[Je,ks]=c.useState(null),[Me,Qe]=c.useState(navigator.onLine),[B,G]=c.useState("healthy"),[Ss,Se]=c.useState(0),[Be,Te]=c.useState(!0),[Ts,Le]=c.useState(0),[Cs,Ze]=c.useState(!1),[jt,As]=c.useState({hasPassword:!1,passwordLength:0,source:"unknown"});c.useEffect(()=>{if(o||u){const s=setTimeout(()=>{t(null),a(null)},5e3);return()=>clearTimeout(s)}},[o,u]),c.useEffect(()=>{const s=()=>{Qe(!0),G("healthy"),console.log("🌐 Network connection restored")},r=()=>{Qe(!1),G("offline"),console.log("🌐 Network connection lost")};return window.addEventListener("online",s),window.addEventListener("offline",r),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}},[]),c.useEffect(()=>()=>{ke&&clearTimeout(ke),Xe&&Xe.abort()},[]),c.useEffect(()=>{if(A&&!d)return(()=>{const r=setTimeout(()=>{Fs()},12e4);Ns(r)})(),()=>{ke&&clearTimeout(ke)}},[A,d,Ie]),c.useEffect(()=>{(async()=>{const r=localStorage.getItem("admin_token");if(r){console.log("🔐 Admin token found - validating session...");try{const m=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/health`,{headers:{Authorization:`Bearer ${O}`,"X-Admin-Token":r}});m.ok?(await m.json()).authorized?(N(!0),console.log("✅ Admin session validated - user authenticated"),setTimeout(()=>{as(!0)},300)):(console.log("❌ Admin token invalid - clearing session"),localStorage.removeItem("admin_token"),N(!1)):(console.log("❌ Admin session validation failed - clearing session"),localStorage.removeItem("admin_token"),N(!1))}catch(m){console.error("❌ Session validation error:",m),N(!1)}}else console.log("🔐 No admin token found - user needs to authenticate"),N(!1)})()},[]),c.useEffect(()=>{if(!A)return;const r=setInterval(()=>{K-(Date.now()-H)<=0&&(console.log("⏰ Admin session expired"),N(!1),localStorage.removeItem("admin_token"),t("Session expired. Please login again."))},6e4);return()=>clearInterval(r)},[A,H]),c.useEffect(()=>{if(A){const s=Date.now();L(s),E&&clearTimeout(E);const r=()=>{const x=Date.now();L(x),ne(!1),E&&clearTimeout(E);const b=setTimeout(()=>{es()},K-Re);J(b)},m=["mousedown","mousemove","keypress","scroll","touchstart","click"];return m.forEach(x=>{document.addEventListener(x,r,!0)}),r(),()=>{m.forEach(x=>{document.removeEventListener(x,r,!0)}),E&&clearTimeout(E)}}},[A]);const es=()=>{const r=Date.now()-H;if(r>=K-Re)if(r>=K)je("Session expired due to inactivity");else{ne(!0);const m=K-r,x=setTimeout(()=>{je("Session expired due to inactivity")},m);J(x)}},je=s=>{N(!1),l(""),pe([]),ge([]),le([]),fe(null),ne(!1),W(!1),localStorage.removeItem("admin_token"),E&&clearTimeout(E),J(null),s?t(s):a("Successfully logged out")},Ds=()=>{L(Date.now()),ne(!1),E&&clearTimeout(E);const s=setTimeout(()=>{es()},K-Re);J(s)},Ps=async()=>{if(A)try{const s=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/password-status`,{headers:{Authorization:`Bearer ${O}`,"X-Admin-Token":localStorage.getItem("admin_token")||""}});if(s.ok){const r=await s.json();As(r)}}catch(s){console.error("Failed to check password status:",s)}},$s=()=>{const s=localStorage.getItem("admin_token");return s||(console.warn("❌ No admin token found - user needs to re-authenticate"),N(!1),null)},ze=(s={})=>{const r=$s();return r?{Authorization:`Bearer ${O}`,"X-Admin-Token":r,"Content-Type":"application/json",Accept:"application/json",...s}:null},ss=async()=>{if(i(!0),t(null),!k.trim()){t("Please enter admin password"),i(!1);return}const s=Date.now(),r=`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/authenticate`;try{console.log("🚀 Ultra-fast auth starting...");const m=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({password:k}),keepalive:!0}),x=Date.now()-s;if(console.log(`⚡ Auth completed in ${x}ms`),!m.ok){const y=await m.json().catch(()=>({error:"Authentication failed"}));throw console.error("🔐 Auth failed:",m.status,m.statusText),new Error(y.error||"Authentication failed")}const b=await m.json();b.success&&b.token?(localStorage.setItem("admin_token",b.token),N(!0),G("healthy"),Le(Date.now()),L(Date.now()),a(`Authentication successful in ${x}ms!`),console.log("✅ Admin token stored successfully"),setTimeout(()=>{Ps()},100),setTimeout(()=>{as(!0)},300)):(t("Invalid password - check console for debug info"),l(""))}catch(m){const x=Date.now()-s;console.error(`❌ Auth failed (${x}ms):`,m),m.message.includes("Failed to fetch")||m.name==="TypeError"?t("Network error - please check your connection and try again."):m.message.includes("401")||m.message.includes("Unauthorized")?t("Invalid password. Please check your password and try again."):t(m.message||"Authentication failed - please try again."),l("")}finally{i(!1)}},ts=s=>{const r=Fe[s];if(r&&Date.now()<r.expiry){const m=Math.round((r.expiry-Date.now())/1e3);return console.log(`📦 Using cached data for ${s} (${m}s remaining)`),r.data}return null},oe=(s,r,m=9e4)=>{Ne(x=>({...x,[s]:{data:r,timestamp:Date.now(),expiry:Date.now()+m}}))},as=(s=!1)=>{Je&&clearTimeout(Je);const r=setTimeout(()=>{we(s)},300);ks(r)},we=async(s=!1)=>{if(!A){console.warn("❌ Cannot load dashboard data - user not authenticated");return}s&&(i(!0),t(null),h({current:0,total:4,currentTask:"Starting dashboard load..."})),console.log("🚀 Loading dashboard data...");const r=Date.now();try{const m=ze();if(!m){t("Authentication required - please login again"),s&&(i(!1),h({current:0,total:0,currentTask:""}));return}s&&h({current:1,total:4,currentTask:"Loading dashboard data..."});const x=`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/dashboard-data`,b=new AbortController;Ye(b);const y=setTimeout(()=>b.abort(),8e3),S=await fetch(x,{method:"GET",signal:b.signal,headers:m});if(clearTimeout(y),!S.ok){if(S.status===401){console.warn("🔐 Admin session expired"),N(!1),localStorage.removeItem("admin_token"),t("Session expired - please login again");return}throw new Error(`Batch request failed: ${S.status} ${S.statusText}`)}const P=await S.json();console.log(`📊 Batch request completed in ${Date.now()-r}ms`),s&&h({current:2,total:4,currentTask:"Processing data..."}),P.subscribers&&(pe(P.subscribers.subscribers||[]),V(C=>({...C,database:"active"})),oe("subscribers",P.subscribers,12e4)),P.newsletters&&(ge(P.newsletters.newsletters||[]),V(C=>({...C,newsletterSystem:"active"})),oe("newsletters",P.newsletters,18e4)),P.contacts&&(le(P.contacts.contacts||[]),V(C=>({...C,contactForm:"active"})),ue(P.contacts.contacts||[]),oe("contacts",P.contacts,9e4)),s&&h({current:3,total:4,currentTask:"Testing services..."});try{const C=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/test-email`,{method:"POST",headers:{Authorization:`Bearer ${O}`,"X-Admin-Token":localStorage.getItem("admin_token")||"","Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(C.ok){const U=await C.json();V(Os=>({...Os,emailService:U.success?"active":"error"}))}else V(U=>({...U,emailService:"error"}))}catch(C){console.warn("⚠️ Email service test failed:",C),V(U=>({...U,emailService:"error"}))}Se(0),Te(!0),G("healthy"),Le(Date.now()),Ke(Date.now()),s&&(h({current:4,total:4,currentTask:"Complete!"}),a(`Dashboard loaded successfully in ${Date.now()-r}ms`)),console.log(`✅ Dashboard data loaded successfully via batch endpoint (${Date.now()-r}ms)`)}catch(m){console.warn("⚠️ Batch request failed, falling back to individual requests:",m),await Is(s)}},Rs=()=>{Ss>=3?(Te(!1),G("degraded"),console.warn("⚠️ Backend marked as unhealthy due to multiple failed requests")):Date.now()-Ts>3e5&&(G("degraded"),console.warn("⚠️ No successful connection in 5 minutes"))},Es=async(s,r,m={},x=5e3)=>{const b=ts(r);if(b)return b;const y=ze(m.headers||{});if(!y)throw new Error("Authentication required");const S=new AbortController,P=setTimeout(()=>S.abort(),x);try{const C=await fetch(s,{...m,headers:y,signal:S.signal});if(clearTimeout(P),!C.ok)throw C.status===401?(N(!1),localStorage.removeItem("admin_token"),new Error("Authentication expired")):new Error(`Request failed: ${C.status} ${C.statusText}`);const U=await C.json();return oe(r,U,9e4),U}catch(C){throw clearTimeout(P),C instanceof Error&&C.name==="AbortError"?new Error("Request timeout"):C}},Fs=async()=>{if(!Be||!Me){console.log("⏸️ Background refresh skipped (backend unhealthy or offline)");return}console.log("🔄 Background refresh started (using batch endpoint)");const s=Date.now();try{const r=new AbortController;Ye(r);const m=ze();if(!m){console.warn("⚠️ Background refresh skipped (no admin token)");return}const x=`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/dashboard-data`,b=setTimeout(()=>r.abort(),3e3),y=await fetch(x,{method:"GET",signal:r.signal,headers:m});if(clearTimeout(b),!y.ok)throw y.status===401?(console.warn("🔐 Admin session expired during background refresh"),N(!1),localStorage.removeItem("admin_token"),new Error("Authentication expired - please login again")):new Error(`Batch refresh failed: ${y.status} ${y.statusText}`);const S=await y.json();console.log(`📊 Background refresh completed in ${Date.now()-s}ms`),S.subscribers&&(pe(S.subscribers.subscribers||[]),V(P=>({...P,database:"active"})),oe("subscribers",S.subscribers,12e4)),S.newsletters&&(ge(S.newsletters.newsletters||[]),V(P=>({...P,newsletterSystem:"active"})),oe("newsletters",S.newsletters,18e4)),S.contacts&&(le(S.contacts.contacts||[]),V(P=>({...P,contactForm:"active"})),ue(S.contacts.contacts||[]),oe("contacts",S.contacts,9e4)),Ke(Date.now()),console.log(`✅ Background refresh completed via batch endpoint (${Date.now()-s}ms`),Se(0),Te(!0),G("healthy"),Le(Date.now())}catch(r){if(console.error("❌ Background refresh failed:",r),Se(m=>m+1),r instanceof Error)if(r.name==="AbortError"){console.log("⏱️ Background refresh timed out - this is normal");return}else r.message.includes("Failed to fetch")?G("offline"):G("degraded");Rs()}},Is=async s=>{console.log("🔄 Falling back to individual requests");try{const r=[{url:`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/subscribers`,key:"subscribers"},{url:`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/newsletters`,key:"newsletters"},{url:`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/contacts`,key:"contacts"}];let m=!1;for(const x of r)try{s&&h({current:r.indexOf(x)+1,total:r.length,currentTask:`Loading ${x.key}...`});const b=await Es(x.url,x.key,{},2e3);switch(x.key){case"subscribers":b?.subscribers&&(pe(b.subscribers),V(y=>({...y,database:"active"})));break;case"newsletters":b?.newsletters&&(ge(b.newsletters),V(y=>({...y,newsletterSystem:"active"})));break;case"contacts":b?.contacts&&(le(b.contacts),V(y=>({...y,contactForm:"active"})),ue(b.contacts));break}await new Promise(y=>setTimeout(y,300))}catch(b){console.warn(`⚠️ Fallback request failed for ${x.key}:`,b),m=!0;const y=ts(x.key);if(y)switch(console.log(`📦 Using cached data for ${x.key} due to request failure`),x.key){case"subscribers":pe(y.subscribers||[]);break;case"newsletters":ge(y.newsletters||[]);break;case"contacts":le(y.contacts||[]),ue(y.contacts||[]);break}}m?t("Some data may be outdated due to connection issues"):a("Dashboard data loaded via fallback method")}catch(r){console.error("❌ Fallback loading also failed:",r),t("Unable to load dashboard data. Please check your connection.")}finally{s&&(i(!1),h({current:0,total:0,currentTask:""}))}},ue=s=>{const r=s.length,m=s.filter(C=>C.status==="new").length,x=s.filter(C=>C.status==="contacted").length,b=s.filter(C=>C.status==="completed").length,y=r>0?Math.round((x+b)/r*100):0,S=r>0?Math.round(b/r*100):0,P=y>0?"18 hours":"0 hours";ys({totalContacts:r,newContacts:m,responseRate:y,avgResponseTime:P,completionRate:S})},Ms=async()=>{if(!Q){t("Please enter your email address");return}i(!0);try{const s=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({email:Q})});if(s.ok)a("Password reset instructions sent to your email"),W(!1),Z("");else{const r=await s.json();t(r.error||"Failed to send reset email")}}catch{t("Failed to process password reset request")}finally{i(!1)}},Bs=async()=>{if(!R.currentPassword||!R.newPassword||!R.confirmPassword){t("Please fill in all password fields");return}if(R.newPassword!==R.confirmPassword){t("New passwords do not match");return}if(R.newPassword.length<8){t("New password must be at least 8 characters long");return}const s=/[A-Z]/.test(R.newPassword),r=/[a-z]/.test(R.newPassword),m=/\d/.test(R.newPassword),x=/[!@#$%^&*(),.?":{}|<>]/.test(R.newPassword);if(!s||!r||!m||!x){t("Password must contain uppercase, lowercase, numbers, and special characters");return}i(!0);try{const b=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/admin/update-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`,"X-Admin-Token":localStorage.getItem("admin_token")||""},body:JSON.stringify({currentPassword:R.currentPassword,newPassword:R.newPassword})});if(b.ok)a("Password updated successfully! You will be logged out for security."),xe({currentPassword:"",newPassword:"",confirmPassword:""}),W(!1),setTimeout(()=>{je("Password changed - please log in with your new password")},3e3);else{const y=await b.json();t(y.error||"Failed to update password")}}catch{t("Failed to update password. Please try again.")}finally{i(!1)}},Ls=s=>{const r=T[s];r&&(de({subject:r.subject,content:r.content,previewText:r.previewText}),Ee(s))},zs=async()=>{if(!ee.subject||!ee.content){t("Subject and content are required");return}i(!0),t(null),h({current:0,total:3,currentTask:"Preparing newsletter..."});try{const s=new AbortController,r=setTimeout(()=>s.abort(),3e4);h({current:1,total:3,currentTask:"Sending newsletter..."});const m=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/send-newsletter`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`,"X-Admin-Token":localStorage.getItem("admin_token")||""},body:JSON.stringify(ee),signal:s.signal});clearTimeout(r),h({current:2,total:3,currentTask:"Processing results..."});const x=await m.json();m.ok?(a(`Newsletter sent successfully to ${x.successCount} subscribers! ${x.failCount>0?`(${x.failCount} failed)`:""}`),de({subject:"",content:"",previewText:""}),Ee(""),Ne(b=>({...b,newsletters:{...b.newsletters,expiry:0}})),h({current:3,total:3,currentTask:"Refreshing data..."}),await we(!1)):t(x.error||"Failed to send newsletter")}catch(s){s instanceof Error&&s.name==="AbortError"?t("Newsletter sending timeout - please check the status in newsletter history"):t("Failed to send newsletter - please check your connection and try again")}finally{i(!1),h({current:0,total:0,currentTask:""})}},rs=async(s,r,m)=>{i(!0),t(null);const x=ie,b=D,y=ie.map(S=>S.id===s?{...S,status:r,notes:m,lastUpdated:new Date().toISOString()}:S);le(y),D&&D.id===s&&fe({...D,status:r,notes:m,lastUpdated:new Date().toISOString()}),ue(y);try{const S=new AbortController,P=setTimeout(()=>S.abort(),1e4),C=await fetch(`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/contacts/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`,"X-Admin-Token":localStorage.getItem("admin_token")||""},body:JSON.stringify({status:r,notes:m}),signal:S.signal});if(clearTimeout(P),C.ok)a("Contact updated successfully"),Ne(U=>({...U,contacts:{...U.contacts,expiry:0}}));else throw new Error("Update failed")}catch(S){le(x),fe(b),ue(x),S instanceof Error&&S.name==="AbortError"?t("Update timeout - contact status may not have been saved"):t("Failed to update contact - changes reverted")}finally{i(!1)}},ns=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800 border-blue-200";case"contacted":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in-progress":return"bg-purple-100 text-purple-800 border-purple-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},is=s=>({"strategic-planning":"Strategic Planning","digital-transformation":"Digital Transformation","business-optimization":"Business Optimization","innovation-consulting":"Innovation Consulting","change-management":"Change Management","growth-strategy":"Growth Strategy",custom:"Custom Solution"})[s]||s;return n?A?e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-auto",children:[e.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-7xl max-h-full overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"HK"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your website services"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Session: ",Math.floor((K-(Date.now()-H))/1e3/60),"m remaining"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Auto-logout at ",new Date(H+K).toLocaleTimeString()]}),Ie>0&&e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["✓ Last refreshed ",Math.floor((Date.now()-Ie)/1e3),"s ago"]}),Object.keys(Fe).length>0&&e.jsxs("div",{className:"text-xs text-blue-600",children:["📦 ",Object.keys(Fe).length," items cached"]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${B==="healthy"?"bg-green-500":B==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:`${B==="healthy"?"text-green-600":B==="degraded"?"text-yellow-600":"text-red-600"}`,children:B==="healthy"?"Connected":B==="degraded"?"Slow":"Offline"})]}),!Be&&e.jsx(w,{size:"sm",variant:"outline",onClick:async()=>{console.log("🔍 Running quick connectivity test...");const s=`https://${I}.supabase.co/functions/v1/make-server-4d80a1b0/ping`;try{(await fetch(s,{method:"GET",signal:AbortSignal.timeout(2e3),headers:{Authorization:`Bearer ${O}`}})).ok&&(Te(!0),G("healthy"),Se(0),a("Connection restored! Try refreshing data."))}catch{t("Connection test failed. Server may be down.")}},className:"text-xs",children:"Test Connection"})]}),e.jsx(ce,{orientation:"vertical",className:"h-8"}),e.jsx(w,{variant:"outline",onClick:()=>we(!0),disabled:d,size:"sm",children:d?"Loading...":B==="offline"?"Retry Connection":"Refresh All"}),e.jsx(w,{variant:"outline",onClick:()=>je(),size:"sm",children:"Logout"}),e.jsx(w,{variant:"outline",onClick:v,size:"sm",children:"Close"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-900",children:"🚀 Live Production Server"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Connected to live database and server. All data and operations are real."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${B==="healthy"?"bg-green-500":B==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm text-green-700",children:B==="healthy"?"All systems operational":B==="degraded"?"Connection issues detected":"Server offline"})]})]})}),o&&!0&&e.jsx("div",{className:`mb-4 p-3 rounded-md border ${o.includes("cached data")||o.includes("Offline")?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-lg",children:o.includes("cached data")||o.includes("Offline")?"⚠️":"❌"}),e.jsxs("div",{children:[e.jsx("p",{children:o}),!Me&&e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Check your internet connection and try refreshing the page."}),!Be&&Me&&e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"The server appears to be experiencing issues. Data will auto-refresh when connection is restored."})]})]})}),u&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded-md border border-green-200",children:u}),d&&$.total>0&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:$.currentTask}),e.jsxs("span",{className:"text-sm text-blue-700",children:[$.current,"/",$.total]})]}),e.jsx("div",{className:"w-full bg-blue-100 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${$.current/$.total*100}%`}})})]}),e.jsxs(_e,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Ve,{className:"grid w-full grid-cols-7",children:[e.jsx(z,{value:"overview",children:"Overview"}),e.jsx(z,{value:"analytics",children:"Analytics"}),e.jsx(z,{value:"newsletter",children:"Newsletter"}),e.jsx(z,{value:"contacts",children:"Contacts"}),e.jsx(z,{value:"seo",children:"SEO"}),e.jsx(z,{value:"settings",children:"Settings"}),e.jsx(z,{value:"diagnostic",children:"Diagnostic"})]}),e.jsx(q,{value:"analytics",className:"space-y-6",children:e.jsx(gt,{})}),e.jsxs(q,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(p,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:"Newsletter Subscribers"})}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ye.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active subscribers"})]})]}),e.jsxs(p,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:"Total Inquiries"})}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:se.totalContacts}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[se.newContacts," new inquiries"]})]})]}),e.jsxs(p,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:"Response Rate"})}),e.jsxs(j,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[se.responseRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg: ",se.avgResponseTime]})]})]}),e.jsxs(p,{children:[e.jsx(g,{className:"pb-3",children:e.jsx(f,{className:"text-sm font-medium text-muted-foreground",children:"Completion Rate"})}),e.jsxs(j,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[se.completionRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Projects completed"})]})]})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(f,{children:"Recent Activity"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[ie.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["New contact from ",s.name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]}),e.jsx(M,{className:`${ns(s.status)}`,children:s.status})]},s.id)),ie.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No recent contact activity"})]})})]})]}),e.jsx(q,{value:"newsletter",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Send Newsletter"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Send to ",ye.length," subscribers"]})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"template",children:"Quick Start Templates"}),e.jsxs(ls,{value:Ge,onValueChange:Ls,children:[e.jsx(os,{children:e.jsx(cs,{placeholder:"Choose a template (optional)"})}),e.jsxs(ds,{children:[e.jsx(X,{value:"weekly-update",children:"Weekly Business Update"}),e.jsx(X,{value:"monthly-deep-dive",children:"Monthly Deep Dive"}),e.jsx(X,{value:"service-announcement",children:"Service Announcement"}),e.jsx(X,{value:"insights-sharing",children:"Insights from the Field"})]})]}),Ge&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Template applied! You can customize the content below."})]}),e.jsx(ce,{}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"subject",children:"Subject Line"}),e.jsx(te,{id:"subject",value:ee.subject,onChange:s=>de(r=>({...r,subject:s.target.value})),placeholder:"Enter newsletter subject"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"previewText",children:"Preview Text (Optional)"}),e.jsx(te,{id:"previewText",value:ee.previewText,onChange:s=>de(r=>({...r,previewText:s.target.value})),placeholder:"Brief preview text"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"content",children:"Newsletter Content"}),e.jsx(us,{id:"content",value:ee.content,onChange:s=>de(r=>({...r,content:s.target.value})),rows:8,placeholder:"Write your newsletter content here..."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{onClick:zs,disabled:d||!ee.subject||!ee.content,className:"flex-1",children:d?"Sending...":`Send to ${ye.length} Subscribers`}),e.jsx(w,{variant:"outline",onClick:()=>{de({subject:"",content:"",previewText:""}),Ee("")},children:"Clear"})]})]})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(f,{children:"Newsletter History"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",children:[We.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-1",children:s.subject}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:new Date(s.sentAt).toLocaleDateString()}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[e.jsxs("span",{className:"text-green-600",children:["✓ ",s.successCount," sent"]}),s.failCount>0&&e.jsxs("span",{className:"text-red-600",children:["✗ ",s.failCount," failed"]})]})]},s.id)),We.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No newsletters sent yet"})]})})]})]})}),e.jsx(q,{value:"contacts",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs(f,{children:["Contact Submissions (",ie.length,")"]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",children:[ie.map(s=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${D?.id===s.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>fe(s),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium truncate",children:s.name}),s.emailSent&&e.jsx(M,{variant:"outline",className:"text-xs",children:"✅ Emailed"})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.email}),s.service&&e.jsx("p",{className:"text-xs text-primary mt-1",children:is(s.service)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.submittedAt).toLocaleDateString()})]}),e.jsx(M,{className:`text-xs ${ns(s.status)}`,children:s.status})]})},s.id)),ie.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No contact submissions yet"})})]})})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(f,{children:D?"Contact Details":"Select a Contact"})}),e.jsx(j,{children:D?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm",children:D.name})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm",children:D.email}),e.jsx(w,{size:"sm",variant:"outline",onClick:()=>window.open(`mailto:${D.email}`,"_blank"),children:"Reply"})]})]}),D.company&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Company"}),e.jsx("p",{className:"text-sm",children:D.company})]}),D.service&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Service"}),e.jsx("p",{className:"text-sm",children:is(D.service)})]}),D.budget&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Budget"}),e.jsx("p",{className:"text-sm",children:D.budget})]}),D.timeline&&e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Timeline"}),e.jsx("p",{className:"text-sm",children:D.timeline})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Message"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded-md mt-1",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:D.message})})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Submitted"}),e.jsx("p",{className:"text-sm",children:new Date(D.submittedAt).toLocaleString()})]})]}),e.jsx(ce,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Status"}),e.jsxs(ls,{value:D.status,onValueChange:s=>rs(D.id,s),children:[e.jsx(os,{className:"mt-1",children:e.jsx(cs,{})}),e.jsxs(ds,{children:[e.jsx(X,{value:"new",children:"New"}),e.jsx(X,{value:"contacted",children:"Contacted"}),e.jsx(X,{value:"in-progress",children:"In Progress"}),e.jsx(X,{value:"completed",children:"Completed"}),e.jsx(X,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-medium",children:"Notes"}),e.jsx(us,{value:D.notes||"",onChange:s=>{fe(r=>r?{...r,notes:s.target.value}:null)},placeholder:"Add notes about this contact...",rows:3,className:"mt-1"}),e.jsx(w,{size:"sm",className:"mt-2",onClick:()=>rs(D.id,D.status,D.notes),children:"Save Notes"})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"Select a contact submission to view details"})})})]})]})}),e.jsx(q,{value:"seo",className:"space-y-6",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"SEO Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and optimize your website for search engines"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"SEO Audit"}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Analyze your website's SEO performance and get recommendations"}),e.jsx(w,{onClick:()=>Ze(!0),className:"w-full",variant:"default",children:"Run SEO Audit"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Search Console"}),e.jsx("p",{className:"text-sm text-green-800 mb-3",children:"Submit your site to Google for better indexing"}),e.jsx(w,{onClick:()=>window.open("https://search.google.com/search-console","_blank"),className:"w-full",variant:"outline",children:"Open Search Console"})]})]}),e.jsx(ce,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ft,{}),e.jsx(Ce,{})]}),e.jsx(ce,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"SEO Resources & Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground",children:"Site Files"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm",children:"Sitemap.xml"}),e.jsx(w,{size:"sm",variant:"outline",onClick:()=>window.open("/sitemap.xml","_blank"),children:"View"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm",children:"Robots.txt"}),e.jsx(w,{size:"sm",variant:"outline",onClick:()=>window.open("/robots.txt","_blank"),children:"View"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground",children:"External Tools"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(w,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://pagespeed.web.dev/","_blank"),children:"PageSpeed Insights"}),e.jsx(w,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://www.google.com/webmasters/tools/mobile-friendly/","_blank"),children:"Mobile-Friendly Test"}),e.jsx(w,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://schema.org/validator","_blank"),children:"Schema Validator"})]})]})]})]}),e.jsx(ce,{}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"📈 SEO Tips for Better Rankings"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:"• Publish high-quality content regularly"}),e.jsx("li",{children:"• Optimize images with descriptive alt text"}),e.jsx("li",{children:"• Build backlinks from reputable websites"}),e.jsx("li",{children:"• Ensure fast loading times (under 3 seconds)"}),e.jsx("li",{children:"• Use relevant keywords naturally in content"}),e.jsx("li",{children:"• Keep meta descriptions under 160 characters"}),e.jsx("li",{children:"• Monitor your rankings weekly"})]})]})]})]})}),e.jsxs(q,{value:"diagnostic",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Production Health Monitor"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time system health and status monitoring"})]}),e.jsx(j,{children:e.jsx(gs,{})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Connection Diagnostic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network connectivity and API endpoint testing"})]}),e.jsx(j,{children:e.jsx(ps,{})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(Oe,{}),e.jsx(Ce,{})]})]}),e.jsxs(q,{value:"settings",className:"space-y-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"System Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time service monitoring"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Email Service (Resend)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${_.emailService==="active"?"bg-green-500":_.emailService==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:_.emailService})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Database (Supabase)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${_.database==="active"?"bg-green-500":_.database==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:_.database})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Contact Form System"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${_.contactForm==="active"?"bg-green-500":_.contactForm==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:_.contactForm})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Newsletter System"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${_.newsletterSystem==="active"?"bg-green-500":_.newsletterSystem==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:_.newsletterSystem})]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(w,{variant:"outline",size:"sm",onClick:we,disabled:d,children:d?"Checking...":"Check All Services"})})]})]}),e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Admin Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Account and security settings"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Admin Password Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Manage your admin password securely. All passwords are encrypted and stored safely in the database."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:()=>W(!0),className:"w-full",children:"Change Password"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:"• Password is stored securely with encryption"}),e.jsx("p",{children:"• Session expires after 10 minutes of inactivity"}),e.jsx("p",{children:"• All password operations are server-side only"})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-900",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Response Rate:"}),e.jsxs("span",{className:"font-medium",children:[se.responseRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg Response Time:"}),e.jsx("span",{className:"font-medium",children:se.avgResponseTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Project Completion:"}),e.jsxs("span",{className:"font-medium",children:[se.completionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Subscribers:"}),e.jsx("span",{className:"font-medium",children:ye.length})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-green-900",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://hermankwayu.com","_blank"),children:"View Live Website"}),e.jsx(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://calendly.com/truthherman/30min","_blank"),children:"Open Calendly"}),e.jsx(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),children:"Supabase Dashboard"})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-purple-900",children:"Admin Tools"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{Ne({}),a("Cache cleared successfully")},children:"Clear Cache"}),e.jsx(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{we(!0)},children:"Force Refresh Data"}),e.jsx(w,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{a("Admin activity logged and ready for review")},children:"Export Activity Log"})]})]})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(Oe,{}),e.jsx(Ce,{})]})]}),e.jsxs(q,{value:"diagnostic",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Production Health Monitor"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time system health and status monitoring"})]}),e.jsx(j,{children:e.jsx(gs,{})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsx(f,{children:"Connection Diagnostic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network connectivity and API endpoint testing"})]}),e.jsx(j,{children:e.jsx(ps,{})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(Oe,{}),e.jsx(Ce,{})]})]})]})]})]}),me&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60]",children:e.jsxs(p,{className:"w-full max-w-md mx-4",children:[e.jsx(g,{children:e.jsx(f,{className:"text-center text-yellow-600",children:"⚠️ Session Expiring"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("p",{className:"text-center",children:["Your session will expire in ",Math.floor((K-(Date.now()-H))/1e3/60)," minutes due to inactivity."]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{onClick:Ds,className:"flex-1",children:"Stay Logged In"}),e.jsx(w,{variant:"outline",onClick:()=>je(),className:"flex-1",children:"Logout Now"})]})]})]})}),he&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60]",children:e.jsxs(p,{className:"w-full max-w-lg mx-4",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"text-center flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"🔒"}),e.jsx("span",{children:"Change Admin Password"})]}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Update your admin password securely"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(te,{id:"currentPassword",type:"password",value:R.currentPassword,onChange:s=>xe(r=>({...r,currentPassword:s.target.value})),placeholder:"Enter your current password"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"newPassword",children:"New Password"}),e.jsx(te,{id:"newPassword",type:"password",value:R.newPassword,onChange:s=>xe(r=>({...r,newPassword:s.target.value})),placeholder:"Enter new password (min. 8 characters)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Password must contain uppercase, lowercase, numbers, and special characters"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(te,{id:"confirmPassword",type:"password",value:R.confirmPassword,onChange:s=>xe(r=>({...r,confirmPassword:s.target.value})),placeholder:"Confirm new password"})]})]}),e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"⚠️"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Security Notice:"}),e.jsx("p",{children:"You'll need to re-authenticate after changing your password. Keep your new credentials secure."})]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"💡"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Alternative Method:"}),e.jsx("p",{children:"For additional security, you can also request a password reset link via email:"}),e.jsx("div",{className:"mt-2",children:e.jsx(te,{type:"email",value:Q,onChange:s=>Z(s.target.value),placeholder:"truthherman@gmail.com",className:"text-sm"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx(w,{onClick:Bs,disabled:d||!R.currentPassword||!R.newPassword||!R.confirmPassword,className:"w-full",children:d?"Updating...":"Change Password"}),e.jsx(w,{variant:"outline",onClick:Ms,disabled:d||!Q,className:"w-full",children:d?"Sending...":"Email Reset Link"})]}),e.jsx(w,{variant:"ghost",onClick:()=>{W(!1),Z(""),xe({currentPassword:"",newPassword:"",confirmPassword:""})},className:"w-full",children:"Cancel"})]})]})}),e.jsx(lt,{isVisible:Cs,onClose:()=>Ze(!1)})]}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[e.jsxs(p,{className:"w-full max-w-md",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"HK"})}),e.jsx("span",{children:"Admin Login"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to access admin dashboard"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"admin-password",children:"Admin Password"}),e.jsx(te,{id:"admin-password",type:"password",value:k,onChange:s=>l(s.target.value),onKeyDown:s=>s.key==="Enter"&&ss(),placeholder:"Enter admin password"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:e.jsxs("div",{className:`flex items-center space-x-2 ${B==="healthy"?"text-green-600":B==="degraded"?"text-yellow-600":"text-red-600"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${B==="healthy"?"bg-green-500":B==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{children:B==="healthy"?"Connection: Optimal":B==="degraded"?"Connection: Slow":"Connection: Issues"})]})}),o&&e.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md border border-red-200",children:o}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{onClick:ss,disabled:d,className:"flex-1",children:d?"Signing In...":"Sign In"}),e.jsx(w,{variant:"outline",onClick:v,children:"Cancel"})]}),e.jsx("div",{className:"pt-4 border-t text-center space-y-2",children:e.jsx("button",{onClick:()=>W(!0),className:"text-sm text-primary hover:underline block w-full",children:"Forgot your password?"})})]})]}),he&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:e.jsxs(p,{className:"w-full max-w-md",children:[e.jsxs(g,{children:[e.jsx(f,{children:"Password Reset"}),e.jsx("p",{className:"text-muted-foreground",children:"Request a password reset for admin access"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"reset-email",children:"Admin Email"}),e.jsx(te,{id:"reset-email",type:"email",value:Q,onChange:s=>Z(s.target.value),placeholder:"truthherman@gmail.com"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{onClick:async()=>{a("Password reset instructions have been sent to your email"),W(!1),Z("")},disabled:d||!Q,className:"flex-1",children:"Send Reset Link"}),e.jsx(w,{variant:"outline",onClick:()=>{W(!1),Z("")},children:"Cancel"})]})]})]})})]}):null}export{Tt as AdminDashboard};
