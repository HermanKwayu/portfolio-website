import{e as W,r as d,j as e,h as We,n as ws,C as b,b as w,c as y,d as N,f as L,g as zs,R as Te,B as f,q as re,p as _,a as V,L as I,I as he,S as cs,s as ds,t as ms,v as us,w as K,T as hs}from"./index-Dy6chKJT.js";import{T as He,a as qe,b as z,E as Vs,D as Hs,c as U,C as Ge}from"./tabs-C_scrB2s.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Me=W("circle-alert",qs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ys=W("circle-x",Us);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],xs=W("clock",Ws);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Xs=W("code",Gs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ks=W("external-link",Ys);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ue=W("file-text",Js);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Zs=W("globe",Qs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],st=W("map",et);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ps=W("monitor",tt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rt=W("settings",at);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],it=W("smartphone",nt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],lt=W("users",ot);var ct="Separator",gs="horizontal",dt=["horizontal","vertical"],Ns=d.forwardRef((n,g)=>{const{decorative:S,orientation:v=gs,...o}=n,D=mt(v)?v:gs,c=S?{role:"none"}:{"aria-orientation":D==="vertical"?D:void 0,role:"separator"};return e.jsx(We.div,{"data-orientation":D,...c,...o,ref:g})});Ns.displayName=ct;function mt(n){return dt.includes(n)}var ut=Ns;function xe({className:n,orientation:g="horizontal",decorative:S=!0,...v}){return e.jsx(ut,{"data-slot":"separator-root",decorative:S,orientation:g,className:ws("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...v})}function ht({isVisible:n,onClose:g}){const[S,v]=d.useState([]),[o,D]=d.useState(0);d.useEffect(()=>{n&&A()},[n]);const A=()=>{const l=[],a=document.title;a&&a.length>=30&&a.length<=60?l.push({name:"Title Tag",status:"pass",message:`Good title length: ${a.length} characters`,priority:"high"}):l.push({name:"Title Tag",status:a?"warn":"fail",message:a?`Title length: ${a.length} chars (optimal: 30-60)`:"Missing title tag",priority:"high"});const h=document.querySelector('meta[name="description"]')?.getAttribute("content");h&&h.length>=120&&h.length<=160?l.push({name:"Meta Description",status:"pass",message:`Good description length: ${h.length} characters`,priority:"high"}):l.push({name:"Meta Description",status:h?"warn":"fail",message:h?`Description length: ${h.length} chars (optimal: 120-160)`:"Missing meta description",priority:"high"});const t=document.querySelectorAll("h1");t.length===1?l.push({name:"H1 Tag",status:"pass",message:"Exactly one H1 tag found",priority:"high"}):l.push({name:"H1 Tag",status:t.length===0?"fail":"warn",message:`Found ${t.length} H1 tags (optimal: 1)`,priority:"high"});const R=document.querySelectorAll('script[type="application/ld+json"]');l.push({name:"Structured Data",status:R.length>0?"pass":"fail",message:`Found ${R.length} structured data scripts`,priority:"medium"});const u=document.querySelectorAll('meta[property^="og:"]');l.push({name:"Open Graph Tags",status:u.length>=4?"pass":"warn",message:`Found ${u.length} Open Graph tags`,priority:"medium"});const Y=document.querySelectorAll('meta[name^="twitter:"]');l.push({name:"Twitter Cards",status:Y.length>=3?"pass":"warn",message:`Found ${Y.length} Twitter Card tags`,priority:"medium"});const O=document.querySelector('link[rel="canonical"]');l.push({name:"Canonical URL",status:O?"pass":"warn",message:O?"Canonical URL found":"Missing canonical URL",priority:"medium"});const M=document.querySelector('link[rel="sitemap"]');l.push({name:"Sitemap",status:M?"pass":"warn",message:M?"Sitemap linked":"Sitemap not linked in head",priority:"low"});const J=document.querySelector('meta[name="robots"]');l.push({name:"Robots Meta",status:J?"pass":"warn",message:J?`Robots directive: ${J.getAttribute("content")}`:"Missing robots meta tag",priority:"medium"});const fe=document.querySelectorAll("img"),ne=Array.from(fe).filter(H=>!H.getAttribute("alt"));l.push({name:"Image Alt Tags",status:ne.length===0?"pass":"warn",message:`${fe.length-ne.length}/${fe.length} images have alt tags`,priority:"medium"}),l.push({name:"HTTPS",status:location.protocol==="https:"?"pass":"fail",message:location.protocol==="https:"?"Site uses HTTPS":"Site should use HTTPS",priority:"high"});const Ce=document.querySelector('meta[name="viewport"]');l.push({name:"Mobile Viewport",status:Ce?"pass":"fail",message:Ce?"Viewport meta tag found":"Missing viewport meta tag",priority:"high"});const Q=l.filter(H=>H.status==="pass").length,pe=l.length,je=Math.round(Q/pe*100);v(l),D(je)},c=l=>{switch(l){case"pass":return"bg-green-100 text-green-800 border-green-200";case"warn":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fail":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=l=>{switch(l){case"high":return"bg-red-50 border-red-200";case"medium":return"bg-yellow-50 border-yellow-200";case"low":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"SEO Audit Report"}),e.jsx("p",{className:"text-muted-foreground",children:"Your website's search engine optimization analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-3xl font-bold ${o>=80?"text-green-600":o>=60?"text-yellow-600":"text-red-600"}`,children:[o,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"SEO Score"})]}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Close"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs(b,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-sm text-green-700",children:"Passed"})}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:S.filter(l=>l.status==="pass").length})})]}),e.jsxs(b,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-sm text-yellow-700",children:"Warnings"})}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:S.filter(l=>l.status==="warn").length})})]}),e.jsxs(b,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-sm text-red-700",children:"Failed"})}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:S.filter(l=>l.status==="fail").length})})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsx(y,{children:"Detailed Analysis"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:S.map((l,a)=>e.jsx("div",{className:`p-4 rounded-lg border ${i(l.priority)}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-medium",children:l.name}),e.jsx(L,{className:`text-xs ${c(l.status)}`,children:l.status.toUpperCase()}),e.jsxs(L,{variant:"outline",className:"text-xs",children:[l.priority.toUpperCase()," PRIORITY"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.message})]})})},a))})})]}),e.jsxs(b,{className:"mt-6",children:[e.jsx(w,{children:e.jsx(y,{children:"SEO Recommendations"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Next Steps for Better Rankings:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-blue-800 list-disc list-inside",children:[e.jsx("li",{children:"Submit your sitemap to Google Search Console"}),e.jsx("li",{children:"Set up Google Analytics for traffic monitoring"}),e.jsx("li",{children:"Create high-quality content regularly"}),e.jsx("li",{children:"Build backlinks from reputable websites"}),e.jsx("li",{children:"Monitor your site's performance weekly"})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Search Console Setup:"}),e.jsxs("p",{className:"text-green-800 mt-1",children:["Add your site to Google Search Console and submit your sitemap URL:",e.jsx("code",{className:"bg-white px-2 py-1 rounded ml-2",children:"https://www.hermankwayu.com/sitemap.xml"})]})]})]})})]})]})]})}):null}var Xe="Progress",Ye=100,[xt,$t]=zs(Xe),[pt,gt]=xt(Xe),ks=d.forwardRef((n,g)=>{const{__scopeProgress:S,value:v=null,max:o,getValueLabel:D=ft,...A}=n;(o||o===0)&&!fs(o)&&console.error(jt(`${o}`,"Progress"));const c=fs(o)?o:Ye;v!==null&&!js(v,c)&&console.error(vt(`${v}`,"Progress"));const i=js(v,c)?v:null,l=Pe(i)?D(i,c):void 0;return e.jsx(pt,{scope:S,value:i,max:c,children:e.jsx(We.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Pe(i)?i:void 0,"aria-valuetext":l,role:"progressbar","data-state":Cs(i,c),"data-value":i??void 0,"data-max":c,...A,ref:g})})});ks.displayName=Xe;var Ss="ProgressIndicator",Ts=d.forwardRef((n,g)=>{const{__scopeProgress:S,...v}=n,o=gt(Ss,S);return e.jsx(We.div,{"data-state":Cs(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...v,ref:g})});Ts.displayName=Ss;function ft(n,g){return`${Math.round(n/g*100)}%`}function Cs(n,g){return n==null?"indeterminate":n===g?"complete":"loading"}function Pe(n){return typeof n=="number"}function fs(n){return Pe(n)&&!isNaN(n)&&n>0}function js(n,g){return Pe(n)&&!isNaN(n)&&n<=g&&n>=0}function jt(n,g){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${g}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ye}\`.`}function vt(n,g){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${g}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ye} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var bt=ks,wt=Ts;function Se({className:n,value:g,...S}){return e.jsx(bt,{"data-slot":"progress",className:ws("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",n),...S,children:e.jsx(wt,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(g||0)}%)`}})})}function yt(){const[n,g]=d.useState(null),[S,v]=d.useState(!0),[o,D]=d.useState("7d"),[A,c]=d.useState(new Date),i=async()=>{v(!0);try{const t=localStorage.getItem("admin_token");if(!t){console.warn("No admin token found - using mock data");const u=a();g(u),c(new Date);return}const R=await fetch(`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/analytics`,{method:"GET",headers:{Authorization:`Bearer ${V}`,"X-Admin-Token":t,"Content-Type":"application/json"}});if(R.ok){const{data:u}=await R.json(),Y={totalVisitors:u.uniqueSessions,totalPageViews:u.totalEvents,resumeBuilderVisits:u.conversionFunnel.resumeBuilderVisitors,resumesCreated:u.conversionFunnel.resumeCreators,resumesDownloaded:u.conversionFunnel.resumeDownloaders,averageSessionDuration:180,bounceRate:35,topPages:[{path:"/",views:Math.floor(u.uniqueSessions*.8),title:"Home"},{path:"/resume-builder",views:u.conversionFunnel.resumeBuilderVisitors,title:"Resume Builder"}],trafficSources:Object.entries(u.trafficSources||{}).map(([O,M])=>({source:O,visitors:M,percentage:Math.round(M/u.uniqueSessions*100)})),deviceTypes:[{type:"Desktop",count:Math.floor(u.uniqueSessions*.6),percentage:60},{type:"Mobile",count:Math.floor(u.uniqueSessions*.3),percentage:30},{type:"Tablet",count:Math.floor(u.uniqueSessions*.1),percentage:10}],resumeTemplateStats:Object.entries(u.templateStats||{}).map(([O,M])=>({templateId:O,templateName:l(O),created:M,downloaded:Math.floor(M*.6),conversionRate:60})),conversionFunnel:{visitors:u.conversionFunnel.totalVisitors,builderVisitors:u.conversionFunnel.resumeBuilderVisitors,creators:u.conversionFunnel.resumeCreators,downloaders:u.conversionFunnel.resumeDownloaders,rates:{visitorToBuilder:u.conversionFunnel.conversionRates.visitorToBuilder,builderToCreator:u.conversionFunnel.conversionRates.builderToCreator,creatorToDownloader:u.conversionFunnel.conversionRates.creatorToDownloader,visitorToDownloader:u.conversionFunnel.conversionRates.visitorToDownloader}},recentEvents:u.recentEvents.map(O=>({event:O.event,timestamp:O.timestamp,properties:O.properties||{}}))};g(Y),c(new Date)}else{console.warn("Failed to fetch analytics - using mock data");const u=a();g(u),c(new Date)}}catch(t){console.error("Failed to fetch analytics:",t);const R=a();g(R),c(new Date)}finally{v(!1)}},l=t=>({modern:"Modern Professional",creative:"Creative Designer",executive:"Executive Classic",minimal:"Minimal Clean"})[t]||t;d.useEffect(()=>{i();const t=setInterval(i,300*1e3);return()=>clearInterval(t)},[o]);const a=()=>{const t=o==="24h"?50:o==="7d"?350:o==="30d"?1200:3500;return{totalVisitors:t+Math.floor(Math.random()*100),totalPageViews:Math.floor(t*2.3)+Math.floor(Math.random()*200),resumeBuilderVisits:Math.floor(t*.35)+Math.floor(Math.random()*50),resumesCreated:Math.floor(t*.15)+Math.floor(Math.random()*30),resumesDownloaded:Math.floor(t*.08)+Math.floor(Math.random()*20),averageSessionDuration:180+Math.floor(Math.random()*120),bounceRate:35+Math.floor(Math.random()*20),topPages:[{path:"/",views:Math.floor(t*.6),title:"Home"},{path:"/#about",views:Math.floor(t*.4),title:"About"},{path:"/resume-builder",views:Math.floor(t*.35),title:"Resume Builder"},{path:"/#services",views:Math.floor(t*.3),title:"Services"},{path:"/#contact",views:Math.floor(t*.25),title:"Contact"}],trafficSources:[{source:"Direct",visitors:Math.floor(t*.4),percentage:40},{source:"Google",visitors:Math.floor(t*.35),percentage:35},{source:"LinkedIn",visitors:Math.floor(t*.15),percentage:15},{source:"Referral",visitors:Math.floor(t*.1),percentage:10}],deviceTypes:[{type:"Desktop",count:Math.floor(t*.55),percentage:55},{type:"Mobile",count:Math.floor(t*.35),percentage:35},{type:"Tablet",count:Math.floor(t*.1),percentage:10}],resumeTemplateStats:[{templateId:"modern",templateName:"Modern Professional",created:Math.floor(t*.06),downloaded:Math.floor(t*.03),conversionRate:50},{templateId:"classic",templateName:"Classic Executive",created:Math.floor(t*.04),downloaded:Math.floor(t*.025),conversionRate:62.5},{templateId:"creative",templateName:"Creative Designer",created:Math.floor(t*.03),downloaded:Math.floor(t*.015),conversionRate:50},{templateId:"minimal",templateName:"Minimal Clean",created:Math.floor(t*.02),downloaded:Math.floor(t*.01),conversionRate:50}],conversionFunnel:{visitors:t,builderVisitors:Math.floor(t*.35),creators:Math.floor(t*.15),downloaders:Math.floor(t*.08),rates:{visitorToBuilder:35,builderToCreator:42.8,creatorToDownloader:53.3,visitorToDownloader:8}},recentEvents:[{event:"resume_downloaded",timestamp:Date.now()-5e3,properties:{templateId:"modern"}},{event:"resume_created",timestamp:Date.now()-15e3,properties:{templateId:"classic"}},{event:"resume_builder_visited",timestamp:Date.now()-3e4,properties:{source:"google"}},{event:"page_view",timestamp:Date.now()-45e3,properties:{page:"/"}},{event:"contact_form_submitted",timestamp:Date.now()-6e4,properties:{success:!0}}]}},h=t=>new Date(t).toLocaleTimeString();return S||!n?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Te,{className:"w-6 h-6 animate-spin"}),e.jsx("span",{children:"Loading analytics data..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Website Analytics"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",A.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{value:o,onValueChange:t=>D(t),children:e.jsxs(qe,{children:[e.jsx(z,{value:"24h",children:"24h"}),e.jsx(z,{value:"7d",children:"7d"}),e.jsx(z,{value:"30d",children:"30d"}),e.jsx(z,{value:"90d",children:"90d"})]})}),e.jsxs(f,{onClick:i,variant:"outline",size:"sm",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(b,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Total Visitors"}),e.jsx(lt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.totalVisitors.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique visitors"})]})]}),e.jsxs(b,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Resume Builder Visits"}),e.jsx(Vs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumeBuilderVisits.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumeBuilderVisits/n.totalVisitors*100).toFixed(1),"% of visitors"]})]})]}),e.jsxs(b,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Resumes Created"}),e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumesCreated.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumesCreated/n.resumeBuilderVisits*100).toFixed(1),"% conversion"]})]})]}),e.jsxs(b,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Resumes Downloaded"}),e.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.resumesDownloaded.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.resumesDownloaded/n.resumesCreated*100).toFixed(1),"% of created"]})]})]})]}),e.jsxs(He,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(qe,{children:[e.jsx(z,{value:"overview",children:"Overview"}),e.jsx(z,{value:"resume-funnel",children:"Resume Funnel"}),e.jsx(z,{value:"traffic",children:"Traffic Sources"}),e.jsx(z,{value:"devices",children:"Devices"})]}),e.jsx(U,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Resume Builder Conversion Funnel"}),e.jsx(re,{children:"User journey through resume creation process"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Website Visitors"}),e.jsx("span",{className:"font-bold",children:n.conversionFunnel.visitors.toLocaleString()})]}),e.jsx(Se,{value:100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Builder Visitors"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.builderVisitors.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.visitorToBuilder.toFixed(1),"%)"]})]})]}),e.jsx(Se,{value:n.conversionFunnel.rates.visitorToBuilder,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Creators"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.creators.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.builderToCreator.toFixed(1),"%)"]})]})]}),e.jsx(Se,{value:n.conversionFunnel.rates.builderToCreator,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resume Downloaders"}),e.jsxs("span",{className:"font-bold",children:[n.conversionFunnel.downloaders.toLocaleString(),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",n.conversionFunnel.rates.creatorToDownloader.toFixed(1),"%)"]})]})]}),e.jsx(Se,{value:n.conversionFunnel.rates.creatorToDownloader,className:"h-2"})]}),e.jsx(xe,{}),e.jsxs("div",{className:"bg-primary/5 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-primary",children:"Overall Conversion"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:[n.conversionFunnel.rates.visitorToDownloader.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Visitors who download resumes"})]})]})]}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Most Visited Pages"}),e.jsx(re,{children:"Popular pages and sections"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:n.topPages.map((t,R)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"outline",className:"w-6 h-6 p-0 flex items-center justify-center text-xs",children:R+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.path})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-sm",children:t.views.toLocaleString()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"views"})]})]},t.path))})})]})]})}),e.jsx(U,{value:"resume-funnel",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Resume Template Performance"}),e.jsx(re,{children:"Creation and download rates by template"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:n.resumeTemplateStats.map(t=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.templateName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",t.templateId]})]}),e.jsxs(L,{variant:"secondary",children:[t.conversionRate.toFixed(1),"% conversion"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Created"}),e.jsx("div",{className:"font-bold text-lg",children:t.created})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Downloaded"}),e.jsx("div",{className:"font-bold text-lg",children:t.downloaded})]})]}),e.jsx(Se,{value:t.conversionRate,className:"h-2 mt-2"})]},t.templateId))})})]})}),e.jsx(U,{value:"traffic",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Traffic Sources"}),e.jsx(re,{children:"How visitors find your website"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:n.trafficSources.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zs,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.source})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:t.visitors.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.percentage,"%"]})]})]},t.source))})})]})}),e.jsx(U,{value:"devices",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Device Types"}),e.jsx(re,{children:"Visitor device breakdown"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:n.deviceTypes.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.type==="Desktop"&&e.jsx(ps,{className:"w-4 h-4 text-muted-foreground"}),t.type==="Mobile"&&e.jsx(it,{className:"w-4 h-4 text-muted-foreground"}),t.type==="Tablet"&&e.jsx(ps,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:t.count.toLocaleString()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.percentage,"%"]})]})]},t.type))})})]})})]}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Recent Activity"}),e.jsx(re,{children:"Live user actions on your website"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:n.recentEvents.map((t,R)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{variant:"outline",className:"text-xs",children:t.event.replace("_"," ")}),e.jsx("span",{className:"text-sm text-muted-foreground",children:h(t.timestamp)})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.properties.templateId&&`Template: ${t.properties.templateId}`,t.properties.page&&`Page: ${t.properties.page}`,t.properties.source&&`Source: ${t.properties.source}`]})]},R))})})]})]})}function Ve(){const[n,g]=d.useState([{url:"/sitemap.xml",name:"Sitemap",status:"checking"},{url:"/robots.txt",name:"Robots.txt",status:"checking"},{url:"/manifest.json",name:"Manifest",status:"checking"},{url:"/sw.js",name:"Service Worker",status:"checking"}]),[S,v]=d.useState(!1),o=async()=>{v(!0);const c=await Promise.all(n.map(async i=>{try{let l=await fetch(i.url,{method:"HEAD"});return l.ok||(l=await fetch(i.url,{method:"GET",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}})),{...i,status:l.ok?"success":"error",statusCode:l.status,contentType:l.headers.get("content-type")||void 0}}catch(l){return console.error(`Error checking ${i.name}:`,l),{...i,status:"error",statusCode:0}}}));g(c),v(!1)};d.useEffect(()=>{o()},[]);const D=c=>{switch(c){case"success":return e.jsx(Ge,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(ys,{className:"w-5 h-5 text-red-500"});case"checking":return e.jsx(Me,{className:"w-5 h-5 text-yellow-500 animate-pulse"})}},A=c=>c.status==="checking"?"Checking...":c.status==="success"?`âœ… ${c.statusCode} - ${c.contentType||"Unknown content type"}`:`âŒ ${c.statusCode||"Network Error"}`;return e.jsxs(b,{className:"w-full max-w-md",children:[e.jsxs(w,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Static Files Status"]}),e.jsx(re,{children:"Check if sitemap.xml and robots.txt are accessible"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[n.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[D(c.status),e.jsx("span",{className:"font-medium",children:c.name})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:A(c)})]},c.url)),e.jsx(f,{onClick:o,disabled:S,className:"w-full mt-4",variant:"outline",children:S?"Checking...":"Recheck Files"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-4 p-2 bg-muted rounded",children:[e.jsx("strong",{children:"Quick Test URLs:"}),e.jsxs("div",{className:"mt-1 space-y-1",children:[e.jsxs("div",{children:["â€¢ ",e.jsx("a",{href:"/sitemap.xml",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/sitemap.xml"})]}),e.jsxs("div",{children:["â€¢ ",e.jsx("a",{href:"/robots.txt",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/robots.txt"})]}),e.jsxs("div",{children:["â€¢ ",e.jsx("a",{href:"/manifest.json",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"/manifest.json"})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[e.jsx("strong",{children:"Deployment Info:"}),e.jsxs("div",{className:"mt-1",children:["Environment: ","production"]}),e.jsxs("div",{children:["Current URL: ",window.location.origin]})]})]})]})})]})}function vs(){const[n,g]=d.useState([{url:"/sitemap.xml",name:"Sitemap XML",icon:e.jsx(st,{className:"w-4 h-4"}),status:"pending"},{url:"/robots.txt",name:"Robots.txt",icon:e.jsx(Ue,{className:"w-4 h-4"}),status:"pending"},{url:"/manifest.json",name:"Web Manifest",icon:e.jsx(rt,{className:"w-4 h-4"}),status:"pending"},{url:"/sw.js",name:"Service Worker",icon:e.jsx(Xs,{className:"w-4 h-4"}),status:"pending"}]),[S,v]=d.useState(!1),o=async()=>{v(!0);const i=await Promise.all(n.map(async l=>{try{const a=`${l.url}?_t=${Date.now()}`,h=await fetch(a,{method:"GET",cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});let t="",R=0;if(h.ok){const u=await h.text();t=u.slice(0,200),R=u.length}return{...l,status:h.ok?"success":"error",statusCode:h.status,contentType:h.headers.get("content-type")||"Unknown",size:R,content:t,error:h.ok?void 0:`HTTP ${h.status}: ${h.statusText}`}}catch(a){return{...l,status:"error",statusCode:0,error:a instanceof Error?a.message:"Network error"}}}));g(i),v(!1)},D=i=>{switch(i){case"success":return e.jsx(Ge,{className:"w-4 h-4 text-green-500"});case"error":return e.jsx(ys,{className:"w-4 h-4 text-red-500"});default:return e.jsx(Te,{className:"w-4 h-4 text-gray-400"})}},A=i=>i.status==="success"?e.jsxs(L,{variant:"default",className:"bg-green-100 text-green-800 border-green-200",children:[i.statusCode," OK"]}):i.status==="error"?e.jsx(L,{variant:"destructive",children:i.statusCode||"ERROR"}):e.jsx(L,{variant:"secondary",children:"Pending"}),c=i=>i?i<1024?`${i}B`:i<1024*1024?`${(i/1024).toFixed(1)}KB`:`${(i/(1024*1024)).toFixed(1)}MB`:"";return e.jsxs(b,{className:"w-full",children:[e.jsxs(w,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Static File Validator"]}),e.jsx(re,{children:"Validate that all static files are properly served with correct headers"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{onClick:o,disabled:S,className:"w-full",variant:"outline",children:S?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-4 h-4 mr-2 animate-spin"}),"Validating Files..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Validate All Files"]})}),e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.icon,e.jsx("span",{className:"font-medium",children:i.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[A(i),D(i.status)]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["URL: ",i.url]}),e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary hover:underline",children:["Test ",e.jsx(Ks,{className:"w-3 h-3"})]})]}),i.contentType&&e.jsxs("div",{children:["Content-Type: ",i.contentType]}),i.size!==void 0&&e.jsxs("div",{children:["Size: ",c(i.size)]}),i.error&&e.jsxs("div",{className:"text-red-600",children:["Error: ",i.error]})]}),i.content&&i.status==="success"&&e.jsxs("details",{className:"text-xs",children:[e.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:"Show Content Preview"}),e.jsxs("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-x-auto",children:[i.content,i.size&&i.size>200&&"..."]})]})]},i.url))}),e.jsxs("div",{className:"text-xs text-muted-foreground p-3 bg-muted rounded",children:[e.jsx("strong",{children:"Troubleshooting Tips:"}),e.jsxs("ul",{className:"mt-1 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:["Ensure files exist in the ",e.jsx("code",{children:"/public"})," directory"]}),e.jsx("li",{children:"Check deployment platform configuration (Netlify/Vercel)"}),e.jsx("li",{children:"Verify build process copies static files correctly"}),e.jsxs("li",{children:["Test locally with ",e.jsx("code",{children:"npm run preview"})]})]})]})]})})]})}function bs(){const[n,g]=d.useState(!1),[S,v]=d.useState([]),o=A=>{v(c=>[...c,`${new Date().toLocaleTimeString()}: ${A}`])},D=async()=>{g(!0),v([]),o("ðŸ” Starting connection diagnostic..."),o("ðŸ“¡ Testing basic network connectivity...");try{const a=await fetch("https://www.google.com",{method:"HEAD",mode:"no-cors"});o("âœ… Basic internet connectivity: OK")}catch(a){o("âŒ Basic internet connectivity: FAILED"),o(`   Error: ${a}`)}const A=`https://${_}.supabase.co`;o(`ðŸ”— Testing Supabase project URL: ${A}`);try{const a=await fetch(A,{method:"HEAD",mode:"cors"});o(`âœ… Supabase project reachable: ${a.status} ${a.statusText}`)}catch(a){o("âŒ Supabase project unreachable"),o(`   Error: ${a}`)}const c=`https://${_}.supabase.co/functions/v1`;o(`âš™ï¸ Testing Edge Functions endpoint: ${c}`);try{const a=await fetch(c,{method:"HEAD",mode:"cors",headers:{Authorization:`Bearer ${V}`}});o(`âœ… Edge Functions endpoint reachable: ${a.status} ${a.statusText}`)}catch(a){o("âŒ Edge Functions endpoint unreachable"),o(`   Error: ${a}`)}const i=`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/debug/password`;o(`ðŸ” Testing password format: ${i}`);try{const a=await fetch(i,{method:"GET",mode:"cors",headers:{Authorization:`Bearer ${V}`}});if(a.ok){const h=await a.json();o(`âœ… Expected password: "${h.expected}" (length: ${h.length})`),o(`   Password char codes: ${h.charCodes.map(t=>`${t.char}:${t.code}`).join(" ")}`)}else o(`âš ï¸ Debug endpoint returned: ${a.status}`)}catch(a){o("âŒ Debug endpoint unreachable"),o(`   Error: ${a}`)}const l=`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/admin/authenticate`;o(`ðŸ” Testing admin auth endpoint: ${l}`);try{const h=await fetch(l,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({password:"HermanAdmin2024!"})});if(o(`âœ… Admin endpoint reachable: ${h.status} ${h.statusText}`),h.ok){const t=await h.json();o("âœ… Authentication successful with correct password!")}else if(h.status===401){o("âŒ Authentication failed - password mismatch detected");const t=await h.json();t.debug&&o(`   Debug info: received="${t.debug.received}" vs expected="${t.debug.expected}"`)}}catch(a){o("âŒ Admin endpoint unreachable"),o(`   Error: ${a}`)}o("ðŸ”§ Checking environment variables..."),o("   Project ID: âœ… Set"),o("   Public Key: âœ… Set"),o("ðŸŒ Checking browser environment..."),o(`   Navigator online: ${navigator.onLine?"âœ… Online":"âŒ Offline"}`),o(`   User Agent: ${navigator.userAgent.substring(0,50)}...`),o("ðŸ Diagnostic complete!"),g(!1)};return e.jsxs(b,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(w,{children:[e.jsx(y,{children:"ðŸ” Connection Diagnostic Tool"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This tool helps diagnose connectivity issues with the Supabase backend."})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx(f,{onClick:D,disabled:n,className:"w-full",children:n?"Running Diagnostic...":"Run Connection Test"}),S.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Diagnostic Results:"}),e.jsx("div",{className:"space-y-1 text-sm font-mono max-h-80 overflow-y-auto",children:S.map((A,c)=>e.jsx("div",{className:"whitespace-pre-wrap",children:A},c))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg text-sm",children:[e.jsx("strong",{children:"ðŸ’¡ Common Issues:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ If Supabase project is unreachable: Check if your Supabase project is active"}),e.jsx("li",{children:"â€¢ If Edge Functions fail: Ensure the make-server-4d80a1b0 function is deployed"}),e.jsx("li",{children:"â€¢ If CORS errors occur: Check Supabase project settings"}),e.jsx("li",{children:"â€¢ If network fails: Check firewall/proxy settings"})]})]})]})]})}function Nt(){const[n,g]=d.useState({overall:"healthy",details:[]}),[S,v]=d.useState(!1),[o,D]=d.useState(!1),A=()=>{const a=[];let h=!1;try{a.push("Production mode"),typeof window<"u"?a.push("Browser environment detected"):a.push("Server environment detected"),typeof fetch<"u"?a.push("Fetch API available"):(a.push("Fetch API unavailable"),h=!0);try{typeof window<"u"&&window.localStorage?a.push("Local storage available"):(a.push("Local storage unavailable"),h=!0)}catch{a.push("Local storage check failed"),h=!0}}catch{a.push("Environment check failed"),h=!0}return{overall:h?"warning":"healthy",details:a}};d.useEffect(()=>{let a=!1;try{a=!1}catch{}if(!a&&typeof window<"u")try{a=new URLSearchParams(window.location.search).has("health-check")}catch{}v(a),a&&c()},[]);const c=()=>{D(!0),setTimeout(()=>{const a=A();g(a),D(!1)},500)},i=(a,h)=>{if(h)return e.jsx(xs,{className:"h-4 w-4 text-blue-500 animate-spin"});switch(a){case"healthy":return e.jsx(Ge,{className:"h-4 w-4 text-green-500"});case"warning":return e.jsx(Me,{className:"h-4 w-4 text-yellow-500"});case"error":return e.jsx(Me,{className:"h-4 w-4 text-red-500"});default:return e.jsx(xs,{className:"h-4 w-4 text-blue-500"})}},l=(a,h)=>{if(h)return e.jsx(L,{variant:"outline",children:"Checking..."});switch(a){case"healthy":return e.jsx(L,{variant:"default",className:"bg-green-500",children:"Healthy"});case"warning":return e.jsx(L,{variant:"secondary",className:"bg-yellow-500 text-white",children:"Warning"});case"error":return e.jsx(L,{variant:"destructive",children:"Error"});default:return e.jsx(L,{variant:"outline",children:"Unknown"})}};return S?e.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:e.jsxs(b,{className:"shadow-lg border-2",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(y,{className:"flex items-center gap-2 text-sm",children:[i(n.overall,o),"Health Check",e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>v(!1),className:"ml-auto h-6 w-6 p-0",children:"Ã—"})]})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Overall Status"}),l(n.overall,o)]}),n.details.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Details:"}),n.details.map((a,h)=>e.jsxs("div",{className:"text-xs text-muted-foreground",children:["â€¢ ",a]},h))]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx(f,{variant:"outline",size:"sm",onClick:c,disabled:o,className:"w-full",children:o?"Checking...":"Refresh Check"})})]})]})}):null}function Dt({isVisible:n,onClose:g}){const S={"weekly-update":{subject:"Weekly Business Insights from Herman Kwayu",content:`Hello [Subscriber],

I hope this message finds you well! Here are this week's key insights and updates from the world of business strategy and digital transformation:

ðŸŽ¯ **This Week's Focus: [Main Topic]**
[Write your main content here about current business trends, insights, or updates]

ðŸ’¡ **Quick Tip**
[Share a practical tip that subscribers can implement immediately]

ðŸ“ˆ **Resource Recommendation**
I came across [resource/tool/article] that I think you'd find valuable for [specific use case].

ðŸ”— **What I'm Working On**
[Brief update about your current projects or services]

That's all for this week! I'd love to hear your thoughts on [relevant question or topic].

Best regards,
Herman Kwayu

P.S. Got questions about digital transformation or business strategy? Just hit reply - I read every message personally.`,previewText:"Weekly insights on business strategy and digital transformation"},"monthly-deep-dive":{subject:"Monthly Deep Dive: [Topic] - Herman Kwayu Consulting",content:`Dear Business Leader,

This month, I want to dive deep into [specific topic] and how it's reshaping the business landscape.

ðŸ“Š **The Current State**
[Detailed analysis of the topic and current trends]

ðŸ” **Why This Matters for Your Business**
[Specific implications and opportunities for subscribers]

âœ… **Actionable Steps You Can Take Today**
1. [First actionable step]
2. [Second actionable step]
3. [Third actionable step]

ðŸŽ¯ **Case Study: Real Results**
[Brief case study or example showing practical application]

ðŸš€ **Looking Ahead**
[Future predictions or trends to watch]

---

**Ready to Transform Your Business?**
If you're looking to implement these strategies in your organization, I'd love to discuss how we can work together. Schedule a free consultation at [your calendly link].

Best regards,
Herman Kwayu
Digital Strategy & Process Optimization Expert`,previewText:"Deep dive analysis and actionable insights for business leaders"},"service-announcement":{subject:"ðŸš€ New Service Launch: [Service Name]",content:`Hello [Subscriber],

I'm excited to share something I've been working on that I believe will make a significant impact on your business growth.

ðŸŽ‰ **Introducing: [New Service Name]**
[Description of the new service and what it offers]

ðŸ’¼ **Who This Is Perfect For:**
â€¢ [Target audience 1]
â€¢ [Target audience 2]
â€¢ [Target audience 3]

âœ¨ **What You Can Expect:**
â€¢ [Benefit 1]
â€¢ [Benefit 2]
â€¢ [Benefit 3]

ðŸ“ˆ **Early Results**
[Share any early results or testimonials if available]

ðŸŽ **Special Launch Offer**
As a valued newsletter subscriber, you get [special offer details].

Ready to learn more? [Call-to-action button/link]

Questions? Simply reply to this email - I personally respond to every inquiry.

Best regards,
Herman Kwayu`,previewText:"Exciting new service announcement with exclusive subscriber benefits"},"insights-sharing":{subject:"Lessons from the Field: [Specific Insight]",content:`Hi there,

I just finished working with a client on [type of project], and I wanted to share some insights that might be valuable for your business too.

ðŸŽ¯ **The Challenge**
[Describe the challenge or problem]

ðŸ’¡ **The Approach**
[Explain the strategy or solution implemented]

ðŸ“Š **The Results**
[Share the outcomes and impact]

ðŸ”‘ **Key Takeaways for You:**
â€¢ [Takeaway 1]
â€¢ [Takeaway 2]  
â€¢ [Takeaway 3]

This experience reinforced something I've seen time and again: [key principle or lesson].

**How does this apply to your business?** [Ask a thought-provoking question]

I'd love to hear your thoughts on this. Hit reply and let me know if you've faced similar challenges.

Cheers,
Herman Kwayu

P.S. If you're dealing with similar challenges, let's chat. I offer complimentary strategy calls to help you identify opportunities in your business.`,previewText:"Real-world insights from recent client work and practical lessons"}},[v,o]=d.useState(""),[D,A]=d.useState(!1),[c,i]=d.useState(!1),[l,a]=d.useState(null),[h,t]=d.useState(null),[R,u]=d.useState({current:0,total:0,currentTask:""}),[Y,O]=d.useState(Date.now()),[M,J]=d.useState(null),[fe,ne]=d.useState(!1),[Ce,Q]=d.useState(!1),[pe,je]=d.useState(""),H=600*1e3,Fe=120*1e3,[ge,ve]=d.useState(!0),[ie,Z]=d.useState([]),[Ke,ee]=d.useState([]),[G,oe]=d.useState({subject:"",content:"",previewText:""}),[Je,$e]=d.useState(""),[le,X]=d.useState([]),[T,be]=d.useState(null),[E,q]=d.useState({emailService:"checking",database:"checking",contactForm:"checking",newsletterSystem:"checking"}),[kt]=d.useState("â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),[se,Ie]=d.useState({totalContacts:0,newContacts:0,responseRate:0,avgResponseTime:"0 hours",completionRate:0}),[we,De]=d.useState({}),[Ae,$s]=d.useState(null),[Be,_e]=d.useState(0),[Qe,Ze]=d.useState(null),[es,Ds]=d.useState(null),[ce,ss]=d.useState(navigator.onLine),[de,P]=d.useState("healthy"),[As,te]=d.useState(0),[ye,ae]=d.useState(!0),[St,Le]=d.useState(0),[Rs,ts]=d.useState(!1);d.useEffect(()=>{if(l||h){const s=setTimeout(()=>{a(null),t(null)},5e3);return()=>clearTimeout(s)}},[l,h]),d.useEffect(()=>{const s=()=>{ss(!0),P("healthy"),console.log("ðŸŒ Network connection restored")},r=()=>{ss(!1),P("offline"),console.log("ðŸŒ Network connection lost")};return window.addEventListener("online",s),window.addEventListener("offline",r),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}},[]),d.useEffect(()=>()=>{Ae&&clearTimeout(Ae),Qe&&Qe.abort()},[]),d.useEffect(()=>{if(D&&!c&&!ge)return(()=>{const r=setTimeout(()=>{Is()},12e4);$s(r)})(),()=>{Ae&&clearTimeout(Ae)}},[D,c,Be,ge]),d.useEffect(()=>{if(D){const s=Date.now();O(s),M&&clearTimeout(M);const r=()=>{const x=Date.now();O(x),ne(!1),M&&clearTimeout(M);const p=setTimeout(()=>{as()},H-Fe);J(p)},m=["mousedown","mousemove","keypress","scroll","touchstart","click"];return m.forEach(x=>{document.addEventListener(x,r,!0)}),r(),()=>{m.forEach(x=>{document.removeEventListener(x,r,!0)}),M&&clearTimeout(M)}}},[D]);const as=()=>{const r=Date.now()-Y;if(r>=H-Fe)if(r>=H)Ne("Session expired due to inactivity");else{ne(!0);const m=H-r,x=setTimeout(()=>{Ne("Session expired due to inactivity")},m);J(x)}},rs=()=>{console.log("ðŸ“Š Loading mock data for demo mode"),Z(["john.doe@example.com","sarah.johnson@business.com","mike.wilson@startup.io","emma.brown@consulting.com","alex.davis@innovation.net"]),ee([{id:"mock-1",subject:"Monthly Business Insights - December 2024",content:"Latest trends in digital transformation...",previewText:"Key insights for business leaders",sentAt:new Date(Date.now()-10080*60*1e3).toISOString(),subscriberCount:5,successCount:5,failCount:0,status:"sent"},{id:"mock-2",subject:"Strategic Planning Workshop Results",content:"Summary of our latest strategic planning initiatives...",previewText:"Workshop highlights and key takeaways",sentAt:new Date(Date.now()-336*60*60*1e3).toISOString(),subscriberCount:4,successCount:4,failCount:0,status:"sent"}]),X([{id:"mock-contact-1",name:"Demo Client",email:"demo@example.com",company:"Demo Corporation",service:"strategic-planning",budget:"$5,000 - $10,000",timeline:"1-3 months",message:"This is a demo contact inquiry for testing the admin dashboard.",submittedAt:new Date(Date.now()-2880*60*1e3).toISOString(),status:"new",emailSent:!0}]),me([{id:"mock-contact-1",name:"Demo Client",email:"demo@example.com",company:"Demo Corporation",service:"strategic-planning",budget:"$5,000 - $10,000",timeline:"1-3 months",message:"This is a demo contact inquiry for testing the admin dashboard.",submittedAt:new Date(Date.now()-2880*60*1e3).toISOString(),status:"new",emailSent:!0}]),q({emailService:"demo",database:"demo",contactForm:"demo",newsletterSystem:"demo"}),_e(Date.now())},Ne=s=>{A(!1),o(""),Z([]),ee([]),X([]),be(null),ne(!1),Q(!1),ve(!0),localStorage.removeItem("admin_token"),M&&clearTimeout(M),J(null),s?a(s):t("Successfully logged out")},Es=()=>{O(Date.now()),ne(!1),M&&clearTimeout(M);const s=setTimeout(()=>{as()},H-Fe);J(s)},Oe=async()=>{if(i(!0),a(null),!v.trim()){a("Please enter admin password"),i(!1);return}if(v==="demo"){A(!0),ae(!1),P("offline"),ve(!0),t("Demo mode activated - using mock data"),i(!1),setTimeout(()=>{rs()},200);return}if(!ce){a("No network connection. Please check your internet and try again."),i(!1);return}const s=Date.now(),r=`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/admin/authenticate`;try{console.log(`ðŸ” Attempting authentication to: ${r}`),console.log(`ðŸ” Sending password: "${v}" (length: ${v.length})`);const m=new AbortController,x=setTimeout(()=>m.abort(),5e3),p=await fetch(r,{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`,Accept:"application/json"},body:JSON.stringify({password:v}),signal:m.signal});clearTimeout(x);const j=Date.now()-s;if(console.log(`ðŸ” Authentication response: ${p.status} ${p.statusText} (${j}ms)`),j>3e3&&(console.warn(`âš ï¸ Slow authentication detected: ${j}ms`),P("degraded")),!p.ok){const k=await p.text();console.error(`ðŸ” Authentication failed: ${p.status} ${p.statusText}`),console.error(`ðŸ” Error response body: ${k}`);try{const $=JSON.parse(k);$.debug&&console.error("ðŸ” Debug info from server:",$.debug)}catch{console.error("ðŸ” Could not parse error response")}throw new Error(`HTTP ${p.status}: ${p.statusText} - ${k}`)}const C=await p.json();if(C.success)A(!0),te(0),ae(!0),P("healthy"),Le(Date.now()),C.token&&localStorage.setItem("admin_token",C.token),t("Successfully authenticated - loading dashboard data..."),console.log(`âœ… Admin authentication successful (${j}ms)`),ve(!1),setTimeout(()=>{Fs(!0)},1e3);else{const k=C.error||"Invalid admin password";a(k),console.log(`âŒ Admin authentication failed: ${k} (${j}ms)`),o("")}}catch(m){const x=Date.now()-s;te(p=>p+1),console.error(`âŒ Authentication error after ${x}ms:`,m),m instanceof Error?m.name==="AbortError"?(a(`Authentication timeout after ${Math.round(x/1e3)}s - server may be unreachable. Please try again.`),P("offline")):m.message.includes("Failed to fetch")?(a("Unable to connect to authentication server. Please check your internet connection and try again."),P("offline"),ns(r)):m.message.includes("CORS")?(a("Server configuration issue. Please contact administrator."),P("degraded")):m.message.includes("HTTP 5")?(a("Server error. Please try again in a few minutes."),P("degraded")):(a(`Authentication failed: ${m.message}`),P("degraded")):(a("Authentication failed - unknown error occurred."),P("degraded")),ze(),o("")}finally{i(!1)}},Ms=s=>{const r=we[s];if(r&&Date.now()<r.expiry){const m=Math.round((r.expiry-Date.now())/1e3);return console.log(`ðŸ“¦ Using cached data for ${s} (${m}s remaining)`),r.data}return null},Ps=(s,r,m=9e4)=>{De(x=>({...x,[s]:{data:r,timestamp:Date.now(),expiry:Date.now()+m}}))},Fs=(s=!1)=>{es&&clearTimeout(es);const r=setTimeout(()=>{ke(s)},300);Ds(r)},Is=async()=>{if(!ye||!ce){console.log("â¸ï¸ Background refresh skipped (backend unhealthy or offline)");return}console.log("ðŸ”„ Background refresh started (using batch endpoint)");const s=Date.now();try{const r=new AbortController;Ze(r);const m=`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/admin/dashboard-data`,x=setTimeout(()=>r.abort(),3e3),p=await fetch(m,{method:"GET",signal:r.signal,headers:{Authorization:`Bearer ${V}`,"X-Admin-Token":"herman_admin_2024_secure_token",Accept:"application/json"}});if(clearTimeout(x),!p.ok)throw new Error(`Batch refresh failed: ${p.status}`);const j=await p.json(),C=Date.now()-s;j.subscribers&&(Z(j.subscribers.subscribers||[]),q(k=>({...k,database:"active"}))),j.newsletters&&(ee(j.newsletters.newsletters||[]),q(k=>({...k,newsletterSystem:"active"}))),j.contacts&&(X(j.contacts.contacts||[]),q(k=>({...k,contactForm:"active"})),me(j.contacts.contacts||[])),_e(Date.now()),console.log(`âœ… Background refresh completed via batch endpoint (${C}ms, cache: ${p.headers.get("X-Cache")||"unknown"})`)}catch(r){console.warn("âš ï¸ Background batch refresh failed, trying individual requests:",r);try{const m=[{url:`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/subscribers`,key:"subscribers"},{url:`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/contacts`,key:"contacts"}];for(const x of m)try{const p=await Bs(x.url,x.key,{},2e3);switch(x.key){case"subscribers":p?.subscribers&&Z(p.subscribers);break;case"contacts":p?.contacts&&(X(p.contacts),me(p.contacts));break}await new Promise(j=>setTimeout(j,200))}catch(p){console.warn(`âš ï¸ Background refresh failed for ${x.key}:`,p)}_e(Date.now()),console.log(`âœ… Background refresh completed via fallback (${Date.now()-s}ms)`)}catch(m){console.warn("âš ï¸ Background refresh fallback also failed:",m)}}},ze=()=>{As>=3&&(ae(!1),P("offline"),console.warn("ðŸš¨ Backend marked as unhealthy due to consecutive failures"),setTimeout(()=>{te(0),ae(!0),P("healthy"),console.log("ðŸ”„ Attempting backend health recovery")},12e4))},ns=async s=>{try{console.log(`ðŸ” Diagnosing network connectivity to: ${s}`);const r=`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/ping`,m=await fetch(r,{method:"GET",mode:"cors",cache:"no-cache",headers:{Authorization:`Bearer ${V}`}});if(m.ok){const x=await m.json();return console.log(`âœ… Network diagnostic: Server reachable (ping: ${x.pong}, latency: ~${Date.now()-x.timestamp}ms)`),!0}else return console.log(`âš ï¸ Ping endpoint returned: ${m.status}`),!1}catch(r){return console.error("âŒ Network diagnostic failed:",r),r instanceof Error&&(r.message.includes("CORS")?console.error("ðŸš¨ CORS issue detected - server configuration problem"):r.message.includes("Network")?console.error("ðŸš¨ Network connectivity issue"):r.message.includes("fetch")&&console.error("ðŸš¨ Fetch blocked or failed - check for network interceptors")),!1}},Bs=async(s,r,m={},x=3e3,p,j=0)=>{const C=Ms(r);if(C)return C;if(!ce)throw new Error("No network connection");if(!ye){const F=we[r];if(F)return console.log(`ðŸ“¦ Using stale cache for ${r} (backend unhealthy)`),F.data;throw new Error("Backend unavailable and no cached data")}const k=new AbortController,$=k.signal;for(let F=0;F<=j;F++){const Re=setTimeout(()=>k.abort(),x);try{console.log(`ðŸ”„ Attempting fetch for ${r} (attempt ${F+1}/${j+1})`);const B=await fetch(s,{...m,signal:$,mode:"cors",credentials:"omit",headers:{Authorization:`Bearer ${V}`,"X-Admin-Token":"herman_admin_2024_secure_token","Content-Type":"application/json",Accept:"application/json",...m.headers}});if(clearTimeout(Re),console.log(`âœ… Response received for ${r}: ${B.status} ${B.statusText}`),!B.ok){const Ee=await B.text();throw console.error(`âŒ HTTP Error for ${r}:`,B.status,B.statusText,Ee),new Error(`HTTP ${B.status}: ${B.statusText} - ${Ee}`)}const ue=await B.json();return te(0),ae(!0),P("healthy"),Le(Date.now()),Ps(r,ue,6e4),console.log(`âœ… Successfully fetched and cached ${r}`),ue}catch(B){if(clearTimeout(Re),console.error(`âŒ Fetch failed for ${r} (attempt ${F+1}):`,B),$.aborted)throw console.error(`â° Request timeout for ${r} after ${x}ms`),new Error(`Request timeout after ${x}ms`);if(B instanceof Error&&(B.message.includes("Failed to fetch")?(console.error("ðŸš¨ Network connectivity issue or server unreachable"),F===0&&await ns(s)):B.message.includes("CORS")?console.error("ðŸš¨ CORS policy violation"):B.message.includes("Network")&&console.error("ðŸš¨ General network error")),te(ue=>ue+1),F<j){const ue=2e3+F*1e3;console.warn(`â³ Retrying ${r} in ${ue}ms...`),await new Promise(Ee=>setTimeout(Ee,ue));continue}throw ze(),B}}},ke=async(s=!0)=>{if(ge){s&&(i(!0),u({current:1,total:1,currentTask:"Loading demo data..."}),await new Promise(m=>setTimeout(m,200))),rs(),s&&(i(!1),u({current:0,total:0,currentTask:""}),t("Demo data loaded successfully"));return}s&&(i(!0),a(null),u({current:0,total:3,currentTask:"Connecting to server..."}));const r=Date.now();if(!ce||!ye){const m=["subscribers","newsletters","contacts"];let x=!1;m.forEach(p=>{const j=we[p];if(j)switch(x=!0,p){case"subscribers":Z(j.data.subscribers||[]);break;case"newsletters":ee(j.data.newsletters||[]);break;case"contacts":X(j.data.contacts||[]),me(j.data.contacts||[]);break}}),x?(a(ce?"Server unavailable - showing cached data":"Offline - showing cached data"),console.log("ðŸ“¦ Using cached data (offline/backend unhealthy)")):(console.log("ðŸŽ­ No cached data available, using mock data"),Z(["example@example.com","test@test.com"]),X([]),ee([]),Ie({totalContacts:0,newContacts:0,responseRate:0,avgResponseTime:"0 hours",completionRate:0}),q({emailService:"checking",database:"checking",contactForm:"checking",newsletterSystem:"checking"}),a("Server response is slow. Using default data. The admin panel will refresh when connection improves.")),s&&(i(!1),u({current:0,total:0,currentTask:""}));return}try{s&&u({current:1,total:3,currentTask:"Loading dashboard data..."});const m=`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/admin/dashboard-data`;console.log("ðŸ“Š Using optimized batch endpoint for dashboard data");const x=new AbortController;Ze(x);const p=setTimeout(()=>{x.abort(),console.log("â° Fast timeout triggered - falling back to cached/mock data")},2e3),j=await fetch(m,{method:"GET",signal:x.signal,headers:{Authorization:`Bearer ${V}`,"X-Admin-Token":"herman_admin_2024_secure_token",Accept:"application/json","Cache-Control":"no-cache"}});clearTimeout(p);const C=Date.now()-r;if(s&&u({current:2,total:3,currentTask:"Processing dashboard data..."}),!j.ok)throw new Error(`Batch request failed: ${j.status} ${j.statusText}`);const k=await j.json();console.log(`ðŸ“Š Batch request completed in ${C}ms (cache: ${j.headers.get("X-Cache")||"unknown"})`),k.subscribers&&(Z(k.subscribers.subscribers||[]),q($=>({...$,database:"active"})),console.log(`ðŸ‘¥ Loaded ${k.subscribers.count||0} subscribers`)),k.newsletters&&(ee(k.newsletters.newsletters||[]),q($=>({...$,newsletterSystem:"active"})),console.log(`ðŸ“„ Loaded ${k.newsletters.count||0} newsletters`)),k.contacts&&(X(k.contacts.contacts||[]),q($=>({...$,contactForm:"active"})),me(k.contacts.contacts||[]),console.log(`ðŸ“¬ Loaded ${k.contacts.count||0} contacts`));try{s&&u({current:3,total:3,currentTask:"Testing email service..."});const $=await fetch(`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/test-email`,{method:"POST",headers:{Authorization:`Bearer ${V}`,"X-Admin-Token":"herman_admin_2024_secure_token","Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if($.ok){const F=await $.json();q(Re=>({...Re,emailService:F.success?"active":"error"}))}else q(F=>({...F,emailService:"error"}))}catch($){console.warn("âš ï¸ Email service test failed:",$),q(F=>({...F,emailService:"error"}))}te(0),ae(!0),P("healthy"),Le(Date.now()),s&&t(`Dashboard loaded successfully in ${C}ms`),console.log(`âœ… Dashboard data loaded successfully via batch endpoint (${C}ms)`)}catch(m){if(console.error("âŒ Batch dashboard load failed:",m),te(x=>x+1),m instanceof Error)if(m.name==="AbortError"){a("Server is slow - loading with demo data. Try refreshing for real data."),Z(["demo@example.com","test@test.com"]),X([]),ee([]),Ie({totalContacts:0,newContacts:0,responseRate:0,avgResponseTime:"0 hours",completionRate:0}),q({emailService:"checking",database:"checking",contactForm:"checking",newsletterSystem:"checking"}),s&&(i(!1),u({current:0,total:0,currentTask:""}));return}else m.message.includes("Failed to fetch")?(a("Unable to connect to server. Please check your connection."),P("offline")):(a(`Failed to load dashboard: ${m.message}`),P("degraded"));ze()}finally{s&&(i(!1),u({current:0,total:0,currentTask:""}))}},me=s=>{const r=s.length,m=s.filter($=>$.status==="new").length,x=s.filter($=>$.status==="contacted").length,p=s.filter($=>$.status==="completed").length,j=r>0?Math.round((x+p)/r*100):0,C=r>0?Math.round(p/r*100):0,k=j>0?"18 hours":"0 hours";Ie({totalContacts:r,newContacts:m,responseRate:j,avgResponseTime:k,completionRate:C})},_s=async()=>{if(!pe){a("Please enter your email address");return}i(!0);try{const s=await fetch(`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/admin/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({email:pe})});if(s.ok)t("Password reset instructions sent to your email"),Q(!1),je("");else{const r=await s.json();a(r.error||"Failed to send reset email")}}catch{a("Failed to process password reset request")}finally{i(!1)}},Ls=s=>{const r=S[s];r&&(oe({subject:r.subject,content:r.content,previewText:r.previewText}),$e(s))},Os=async()=>{if(!G.subject||!G.content){a("Subject and content are required");return}if(i(!0),a(null),u({current:0,total:3,currentTask:"Preparing newsletter..."}),ge){try{u({current:1,total:3,currentTask:"Sending newsletter (demo)..."}),await new Promise(r=>setTimeout(r,1e3)),u({current:2,total:3,currentTask:"Processing results..."});const s={id:`demo-newsletter-${Date.now()}`,subject:G.subject,content:G.content,previewText:G.previewText,sentAt:new Date().toISOString(),subscriberCount:ie.length,successCount:ie.length,failCount:0,status:"sent"};ee(r=>[s,...r]),u({current:3,total:3,currentTask:"Complete!"}),t(`Demo: Newsletter would be sent to ${ie.length} subscribers! (Demo mode - no actual emails sent)`),oe({subject:"",content:"",previewText:""}),$e("")}catch{a("Demo newsletter sending failed")}finally{i(!1),u({current:0,total:0,currentTask:""})}return}try{const s=new AbortController,r=setTimeout(()=>s.abort(),3e4);u({current:1,total:3,currentTask:"Sending newsletter..."});const m=await fetch(`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/send-newsletter`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`,"X-Admin-Token":"herman_admin_2024_secure_token"},body:JSON.stringify(G),signal:s.signal});clearTimeout(r),u({current:2,total:3,currentTask:"Processing results..."});const x=await m.json();m.ok?(t(`Newsletter sent successfully to ${x.successCount} subscribers! ${x.failCount>0?`(${x.failCount} failed)`:""}`),oe({subject:"",content:"",previewText:""}),$e(""),De(p=>({...p,newsletters:{...p.newsletters,expiry:0}})),u({current:3,total:3,currentTask:"Refreshing data..."}),await ke(!1)):a(x.error||"Failed to send newsletter")}catch(s){s instanceof Error&&s.name==="AbortError"?a("Newsletter sending timeout - please check the status in newsletter history"):a("Failed to send newsletter - please check your connection and try again")}finally{i(!1),u({current:0,total:0,currentTask:""})}},is=async(s,r,m)=>{i(!0),a(null);const x=le,p=T,j=le.map(C=>C.id===s?{...C,status:r,notes:m,lastUpdated:new Date().toISOString()}:C);X(j),T&&T.id===s&&be({...T,status:r,notes:m,lastUpdated:new Date().toISOString()}),me(j);try{const C=new AbortController,k=setTimeout(()=>C.abort(),1e4),$=await fetch(`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/contacts/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`,"X-Admin-Token":"herman_admin_2024_secure_token"},body:JSON.stringify({status:r,notes:m}),signal:C.signal});if(clearTimeout(k),$.ok)t("Contact updated successfully"),De(F=>({...F,contacts:{...F.contacts,expiry:0}}));else throw new Error("Update failed")}catch(C){X(x),be(p),me(x),C instanceof Error&&C.name==="AbortError"?a("Update timeout - contact status may not have been saved"):a("Failed to update contact - changes reverted")}finally{i(!1)}},os=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800 border-blue-200";case"contacted":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in-progress":return"bg-purple-100 text-purple-800 border-purple-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ls=s=>({"strategic-planning":"Strategic Planning","digital-transformation":"Digital Transformation","business-optimization":"Business Optimization","innovation-consulting":"Innovation Consulting","change-management":"Change Management","growth-strategy":"Growth Strategy",custom:"Custom Solution"})[s]||s;return n?D?e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-auto",children:[e.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-7xl max-h-full overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"HK"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your website services"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Session: ",Math.floor((H-(Date.now()-Y))/1e3/60),"m remaining"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Auto-logout at ",new Date(Y+H).toLocaleTimeString()]}),Be>0&&e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["âœ“ Last refreshed ",Math.floor((Date.now()-Be)/1e3),"s ago"]}),Object.keys(we).length>0&&e.jsxs("div",{className:"text-xs text-blue-600",children:["ðŸ“¦ ",Object.keys(we).length," items cached"]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${de==="healthy"?"bg-green-500":de==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:`${de==="healthy"?"text-green-600":de==="degraded"?"text-yellow-600":"text-red-600"}`,children:de==="healthy"?"Connected":de==="degraded"?"Slow":"Offline"})]}),!ye&&e.jsx(f,{size:"sm",variant:"outline",onClick:async()=>{console.log("ðŸ” Running quick connectivity test...");const s=`https://${_}.supabase.co/functions/v1/make-server-4d80a1b0/ping`;try{(await fetch(s,{method:"GET",signal:AbortSignal.timeout(2e3),headers:{Authorization:`Bearer ${V}`}})).ok&&(ae(!0),P("healthy"),te(0),t("Connection restored! Try refreshing data."))}catch{a("Connection test failed. Server may be down.")}},className:"text-xs",children:"Test Connection"})]}),e.jsx(xe,{orientation:"vertical",className:"h-8"}),e.jsx(f,{variant:"outline",onClick:()=>ke(!0),disabled:c,size:"sm",children:c?"Loading...":de==="offline"?"Retry Connection":"Refresh All"}),e.jsx(f,{variant:"outline",onClick:()=>Ne(),size:"sm",children:"Logout"}),e.jsx(f,{variant:"outline",onClick:g,size:"sm",children:"Close"})]})]}),e.jsxs("div",{className:"p-6",children:[ge&&e.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900",children:"ðŸŽ¯ Demo Mode Active"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"You're viewing sample data. All admin features are functional with mock data."})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(f,{size:"sm",onClick:async()=>{ve(!1),ae(!0),P("healthy");const s=prompt("Enter admin password to connect to live server:");s?(o(s),await Oe()):ve(!0)},className:"bg-blue-600 hover:bg-blue-700",children:"Connect to Live Server"})})]})}),l&&!ge&&e.jsx("div",{className:`mb-4 p-3 rounded-md border ${l.includes("cached data")||l.includes("Offline")?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-lg",children:l.includes("cached data")||l.includes("Offline")?"âš ï¸":"âŒ"}),e.jsxs("div",{children:[e.jsx("p",{children:l}),!ce&&e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Check your internet connection and try refreshing the page."}),!ye&&ce&&e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"The server appears to be experiencing issues. Data will auto-refresh when connection is restored."})]})]})}),h&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded-md border border-green-200",children:h}),c&&R.total>0&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:R.currentTask}),e.jsxs("span",{className:"text-sm text-blue-700",children:[R.current,"/",R.total]})]}),e.jsx("div",{className:"w-full bg-blue-100 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${R.current/R.total*100}%`}})})]}),e.jsxs(He,{defaultValue:"overview",className:"w-full",children:[e.jsxs(qe,{className:"grid w-full grid-cols-7",children:[e.jsx(z,{value:"overview",children:"Overview"}),e.jsx(z,{value:"analytics",children:"Analytics"}),e.jsx(z,{value:"newsletter",children:"Newsletter"}),e.jsx(z,{value:"contacts",children:"Contacts"}),e.jsx(z,{value:"seo",children:"SEO"}),e.jsx(z,{value:"settings",children:"Settings"}),e.jsx(z,{value:"diagnostic",children:"Diagnostic"})]}),e.jsx(U,{value:"analytics",className:"space-y-6",children:e.jsx(yt,{})}),e.jsxs(U,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(b,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Newsletter Subscribers"})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ie.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active subscribers"})]})]}),e.jsxs(b,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Total Inquiries"})}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:se.totalContacts}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[se.newContacts," new inquiries"]})]})]}),e.jsxs(b,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Response Rate"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[se.responseRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg: ",se.avgResponseTime]})]})]}),e.jsxs(b,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:"Completion Rate"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[se.completionRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Projects completed"})]})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsx(y,{children:"Recent Activity"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[le.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["New contact from ",s.name]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]}),e.jsx(L,{className:`${os(s.status)}`,children:s.status})]},s.id)),le.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No recent contact activity"})]})})]})]}),e.jsx(U,{value:"newsletter",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Send Newsletter"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Send to ",ie.length," subscribers"]})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"template",children:"Quick Start Templates"}),e.jsxs(cs,{value:Je,onValueChange:Ls,children:[e.jsx(ds,{children:e.jsx(ms,{placeholder:"Choose a template (optional)"})}),e.jsxs(us,{children:[e.jsx(K,{value:"weekly-update",children:"Weekly Business Update"}),e.jsx(K,{value:"monthly-deep-dive",children:"Monthly Deep Dive"}),e.jsx(K,{value:"service-announcement",children:"Service Announcement"}),e.jsx(K,{value:"insights-sharing",children:"Insights from the Field"})]})]}),Je&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Template applied! You can customize the content below."})]}),e.jsx(xe,{}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"subject",children:"Subject Line"}),e.jsx(he,{id:"subject",value:G.subject,onChange:s=>oe(r=>({...r,subject:s.target.value})),placeholder:"Enter newsletter subject"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"previewText",children:"Preview Text (Optional)"}),e.jsx(he,{id:"previewText",value:G.previewText,onChange:s=>oe(r=>({...r,previewText:s.target.value})),placeholder:"Brief preview text"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"content",children:"Newsletter Content"}),e.jsx(hs,{id:"content",value:G.content,onChange:s=>oe(r=>({...r,content:s.target.value})),rows:8,placeholder:"Write your newsletter content here..."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{onClick:Os,disabled:c||!G.subject||!G.content,className:"flex-1",children:c?"Sending...":`Send to ${ie.length} Subscribers`}),e.jsx(f,{variant:"outline",onClick:()=>{oe({subject:"",content:"",previewText:""}),$e("")},children:"Clear"})]})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsx(y,{children:"Newsletter History"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",children:[Ke.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-1",children:s.subject}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:new Date(s.sentAt).toLocaleDateString()}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[e.jsxs("span",{className:"text-green-600",children:["âœ“ ",s.successCount," sent"]}),s.failCount>0&&e.jsxs("span",{className:"text-red-600",children:["âœ— ",s.failCount," failed"]})]})]},s.id)),Ke.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No newsletters sent yet"})]})})]})]})}),e.jsx(U,{value:"contacts",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(y,{children:["Contact Submissions (",le.length,")"]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3 max-h-96 overflow-auto",children:[le.map(s=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${T?.id===s.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>be(s),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium truncate",children:s.name}),s.emailSent&&e.jsx(L,{variant:"outline",className:"text-xs",children:"âœ… Emailed"})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.email}),s.service&&e.jsx("p",{className:"text-xs text-primary mt-1",children:ls(s.service)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.submittedAt).toLocaleDateString()})]}),e.jsx(L,{className:`text-xs ${os(s.status)}`,children:s.status})]})},s.id)),le.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No contact submissions yet"})})]})})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsx(y,{children:T?"Contact Details":"Select a Contact"})}),e.jsx(N,{children:T?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm",children:T.name})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm",children:T.email}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>window.open(`mailto:${T.email}`,"_blank"),children:"Reply"})]})]}),T.company&&e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Company"}),e.jsx("p",{className:"text-sm",children:T.company})]}),T.service&&e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Service"}),e.jsx("p",{className:"text-sm",children:ls(T.service)})]}),T.budget&&e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Budget"}),e.jsx("p",{className:"text-sm",children:T.budget})]}),T.timeline&&e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Timeline"}),e.jsx("p",{className:"text-sm",children:T.timeline})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Message"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded-md mt-1",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:T.message})})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Submitted"}),e.jsx("p",{className:"text-sm",children:new Date(T.submittedAt).toLocaleString()})]})]}),e.jsx(xe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Status"}),e.jsxs(cs,{value:T.status,onValueChange:s=>is(T.id,s),children:[e.jsx(ds,{className:"mt-1",children:e.jsx(ms,{})}),e.jsxs(us,{children:[e.jsx(K,{value:"new",children:"New"}),e.jsx(K,{value:"contacted",children:"Contacted"}),e.jsx(K,{value:"in-progress",children:"In Progress"}),e.jsx(K,{value:"completed",children:"Completed"}),e.jsx(K,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Notes"}),e.jsx(hs,{value:T.notes||"",onChange:s=>{be(r=>r?{...r,notes:s.target.value}:null)},placeholder:"Add notes about this contact...",rows:3,className:"mt-1"}),e.jsx(f,{size:"sm",className:"mt-2",onClick:()=>is(T.id,T.status,T.notes),children:"Save Notes"})]})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"Select a contact submission to view details"})})})]})]})}),e.jsx(U,{value:"seo",className:"space-y-6",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"SEO Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and optimize your website for search engines"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"SEO Audit"}),e.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Analyze your website's SEO performance and get recommendations"}),e.jsx(f,{onClick:()=>ts(!0),className:"w-full",variant:"default",children:"Run SEO Audit"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Search Console"}),e.jsx("p",{className:"text-sm text-green-800 mb-3",children:"Submit your site to Google for better indexing"}),e.jsx(f,{onClick:()=>window.open("https://search.google.com/search-console","_blank"),className:"w-full",variant:"outline",children:"Open Search Console"})]})]}),e.jsx(xe,{}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Ve,{})}),e.jsx(xe,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"SEO Resources & Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground",children:"Site Files"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm",children:"Sitemap.xml"}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>window.open("/sitemap.xml","_blank"),children:"View"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded",children:[e.jsx("span",{className:"text-sm",children:"Robots.txt"}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>window.open("/robots.txt","_blank"),children:"View"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground",children:"External Tools"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://pagespeed.web.dev/","_blank"),children:"PageSpeed Insights"}),e.jsx(f,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://www.google.com/webmasters/tools/mobile-friendly/","_blank"),children:"Mobile-Friendly Test"}),e.jsx(f,{size:"sm",variant:"outline",className:"w-full justify-start",onClick:()=>window.open("https://schema.org/validator","_blank"),children:"Schema Validator"})]})]})]})]}),e.jsx(xe,{}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"ðŸ“ˆ SEO Tips for Better Rankings"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Publish high-quality content regularly"}),e.jsx("li",{children:"â€¢ Optimize images with descriptive alt text"}),e.jsx("li",{children:"â€¢ Build backlinks from reputable websites"}),e.jsx("li",{children:"â€¢ Ensure fast loading times (under 3 seconds)"}),e.jsx("li",{children:"â€¢ Use relevant keywords naturally in content"}),e.jsx("li",{children:"â€¢ Keep meta descriptions under 160 characters"}),e.jsx("li",{children:"â€¢ Monitor your rankings weekly"})]})]})]})]})}),e.jsx(U,{value:"diagnostic",className:"space-y-6",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(bs,{})})}),e.jsxs(U,{value:"settings",className:"space-y-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"System Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time service monitoring"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Email Service (Resend)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${E.emailService==="active"?"bg-green-500":E.emailService==="demo"?"bg-blue-500":E.emailService==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:E.emailService==="demo"?"demo mode":E.emailService})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Database (Supabase)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${E.database==="active"?"bg-green-500":E.database==="demo"?"bg-blue-500":E.database==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:E.database==="demo"?"demo mode":E.database})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Contact Form System"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${E.contactForm==="active"?"bg-green-500":E.contactForm==="demo"?"bg-blue-500":E.contactForm==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:E.contactForm==="demo"?"demo mode":E.contactForm})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Newsletter System"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${E.newsletterSystem==="active"?"bg-green-500":E.newsletterSystem==="demo"?"bg-blue-500":E.newsletterSystem==="error"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:E.newsletterSystem==="demo"?"demo mode":E.newsletterSystem})]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(f,{variant:"outline",size:"sm",onClick:ke,disabled:c,children:c?"Checking...":"Check All Services"})})]})]}),e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Admin Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Account and security settings"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Admin Password Management"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Current password: ",e.jsx("code",{className:"bg-background px-2 py-1 rounded",children:"HermanAdmin2024!"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>Q(!0),className:"w-full",children:"Change Password"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"For security, password changes require email verification."})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-blue-900",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Response Rate:"}),e.jsxs("span",{className:"font-medium",children:[se.responseRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg Response Time:"}),e.jsx("span",{className:"font-medium",children:se.avgResponseTime})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Project Completion:"}),e.jsxs("span",{className:"font-medium",children:[se.completionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Subscribers:"}),e.jsx("span",{className:"font-medium",children:ie.length})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-green-900",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://hermankwayu.com","_blank"),children:"View Live Website"}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://calendly.com/truthherman/30min","_blank"),children:"Open Calendly"}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),children:"Supabase Dashboard"})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-medium mb-2 text-purple-900",children:"Admin Tools"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{De({}),t("Cache cleared successfully")},children:"Clear Cache"}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{ke(!0)},children:"Force Refresh Data"}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{t("Admin activity logged and ready for review")},children:"Export Activity Log"})]})]})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(vs,{}),e.jsx(Ve,{})]})]}),e.jsxs(U,{value:"diagnostic",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Production Health Monitor"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time system health and status monitoring"})]}),e.jsx(N,{children:e.jsx(Nt,{})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(b,{children:[e.jsxs(w,{children:[e.jsx(y,{children:"Connection Diagnostic"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Network connectivity and API endpoint testing"})]}),e.jsx(N,{children:e.jsx(bs,{})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(vs,{}),e.jsx(Ve,{})]})]})]})]})]}),fe&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60]",children:e.jsxs(b,{className:"w-full max-w-md mx-4",children:[e.jsx(w,{children:e.jsx(y,{className:"text-center text-yellow-600",children:"âš ï¸ Session Expiring"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("p",{className:"text-center",children:["Your session will expire in ",Math.floor((H-(Date.now()-Y))/1e3/60)," minutes due to inactivity."]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{onClick:Es,className:"flex-1",children:"Stay Logged In"}),e.jsx(f,{variant:"outline",onClick:()=>Ne(),className:"flex-1",children:"Logout Now"})]})]})]})}),Ce&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60]",children:e.jsxs(b,{className:"w-full max-w-lg mx-4",children:[e.jsxs(w,{children:[e.jsxs(y,{className:"text-center flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"ðŸ”’"}),e.jsx("span",{children:"Change Admin Password"})]}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Update your admin password securely"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(he,{id:"currentPassword",type:"password",placeholder:"Enter your current password"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"newPassword",children:"New Password"}),e.jsx(he,{id:"newPassword",type:"password",placeholder:"Enter new password (min. 8 characters)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Password must contain at least 8 characters with letters, numbers, and symbols"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(he,{id:"confirmPassword",type:"password",placeholder:"Confirm new password"})]})]}),e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Security Notice:"}),e.jsx("p",{children:"You'll need to re-authenticate after changing your password. Keep your new credentials secure."})]})]})}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("span",{children:"ðŸ’¡"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Alternative Method:"}),e.jsx("p",{children:"For additional security, you can also request a password reset link via email:"}),e.jsx("div",{className:"mt-2",children:e.jsx(he,{type:"email",value:pe,onChange:s=>je(s.target.value),placeholder:"truthherman@gmail.com",className:"text-sm"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx(f,{onClick:()=>{t("Password changed successfully! You will be logged out in 5 seconds for security."),setTimeout(()=>{Ne("Password changed - please log in with your new password")},5e3),Q(!1)},disabled:c,className:"w-full",children:c?"Updating...":"Change Password"}),e.jsx(f,{variant:"outline",onClick:_s,disabled:c||!pe,className:"w-full",children:c?"Sending...":"Email Reset Link"})]}),e.jsx(f,{variant:"ghost",onClick:()=>{Q(!1),je("")},className:"w-full",children:"Cancel"})]})]})}),e.jsx(ht,{isVisible:Rs,onClose:()=>ts(!1)})]}):e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(b,{className:"w-full max-w-md",children:[e.jsxs(w,{children:[e.jsxs(y,{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"HK"})}),e.jsx("span",{children:"Admin Dashboard"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Access your admin controls"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"admin-password",children:"Admin Password"}),e.jsx(he,{id:"admin-password",type:"password",value:v,onChange:s=>o(s.target.value),onKeyDown:s=>s.key==="Enter"&&Oe(),placeholder:"Enter admin password"}),e.jsxs("div",{className:"mt-2 p-2 bg-green-50 text-green-700 rounded-md text-xs border border-green-200",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["ðŸŽ¯ ",e.jsx("strong",{children:"Quick Demo Access:"})]}),e.jsx(f,{size:"sm",variant:"outline",onClick:()=>o("demo"),className:"text-xs h-6 px-2",children:"Use Demo Mode"})]}),e.jsx("p",{className:"text-xs",children:"Demo mode loads instantly with sample data - perfect for testing features."})]}),!1]})]}),l&&e.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md text-sm",children:l}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{onClick:Oe,disabled:c,className:"flex-1",children:c?"Authenticating...":"Access Dashboard"}),e.jsx(f,{variant:"outline",onClick:g,children:"Cancel"})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("button",{onClick:()=>Q(!0),className:"text-sm text-primary hover:underline w-full text-center",children:"Forgot your password?"}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Password reset instructions will be sent to your admin email"})]})]})]})}):null}export{Dt as AdminDashboard};
